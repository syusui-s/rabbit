import{s as N,t as f,aF as e,aG as de,r as ue,y as fe,aH as ge,d as ee,u as j,c as L,a as l,i as r,h as k,f as T,F as R,j as I,b as U,aI as me,n as te,ak as pe,aJ as he}from"./index-BGil3yr3.js";import{A as be}from"./arrow-left-BDvgeC3W.js";import{U as ne,g as re,w as ve,i as $e,F as ye,b as _e,f as xe,X as A,x as we,m as ke}from"./SideBar-D7s-pOfk.js";import{L as G,E as Ce}from"./EventDisplay-Bg-BUC7y.js";import{B as le}from"./BasicModal-CQiIcb-s.js";import{S as J}from"./SafeLink-DKfOjhw_.js";import{s as je}from"./url-DPIb-kBm.js";import"./resolveAsset-CQahj-FY.js";const Se=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="m19.5 8.25-7.5 7.5-7.5-7.5">'),Ee=(t={})=>(()=>{const n=Se();return N(n,t,!0),n})(),Ie=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="m4.5 15.75 7.5-7.5 7.5 7.5">'),Re=(t={})=>(()=>{const n=Ie();return N(n,t,!0),n})(),Le=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12c1.292 4.338 5.31 7.5 10.066 7.5.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88">'),Ue=(t={})=>(()=>{const n=Le();return N(n,t,!0),n})(),Te=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128m0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42">'),Oe=(t={})=>(()=>{const n=Te();return N(n,t,!0),n})(),Fe=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008zm0-6h.008v.008h-.008zm-3 6h.008v.008h-.008zm0-6h.008v.008h-.008z">'),Me=(t={})=>(()=>{const n=Fe();return N(n,t,!0),n})(),Ne=e.object({max_message_length:e.optional(e.number()),max_subscriptions:e.optional(e.number()),max_filters:e.optional(e.number()),max_limit:e.optional(e.number()),max_subid_length:e.optional(e.number()),max_event_tags:e.optional(e.number()),max_content_length:e.optional(e.number()),min_pow_difficulty:e.optional(e.number()),auth_required:e.optional(e.boolean()),payment_required:e.optional(e.boolean()),restricted_writes:e.optional(e.boolean()),created_at_lower_limit:e.optional(e.number()),created_at_upper_limit:e.optional(e.number())}),Pe=e.array(e.object({kinds:e.array(e.union([e.number(),e.array(e.number())])),time:e.nullable(e.number())})),K=e.object({amount:e.number(),unit:e.string(),period:e.optional(e.number()),kinds:e.optional(e.array(e.number()))}),ze=e.object({admission:e.optional(e.array(K)),subscription:e.optional(e.array(K)),publication:e.optional(e.array(K))}),qe=e.object({name:e.optional(e.string()),description:e.optional(e.string()),pubkey:e.optional(e.string().refine(de)),contact:e.optional(e.string()),supported_nips:e.optional(e.array(e.number())),software:e.optional(e.string()),version:e.optional(e.string()),icon:e.optional(e.string().url()),limitation:e.optional(Ne),retention:e.optional(Pe),relay_countries:e.optional(e.array(e.string())),language_tags:e.optional(e.array(e.string())),tags:e.optional(e.array(e.string())),posting_policy:e.optional(e.string().url()),payments_url:e.optional(e.string().url()),fees:e.optional(ze)}),Be=t=>{const n=new URL(t);if(n.protocol==="wss:")n.protocol="https";else if(n.protocol==="ws:")n.protocol="http";else throw new Error("unexpected protocol");return n},De=async t=>{const n=Be(t),s=await fetch(n,{headers:{Accept:"application/nostr+json"},mode:"cors"});if(s.status!==200)throw new Error("failed to fetch relay info: status was not 200");const h=await s.json();if(!ge(qe)(h))throw new Error("failed to fetch relay info: unexpected form of data");return h},oe=t=>{const n=ue(t),s=fe(()=>({queryKey:["useRelayInfo",n()],queryFn:({queryKey:h})=>{const[,m]=h;if(m!=null)return De(m.relayUrl)},enabled:n()!=null,staleTime:5*60*1e3,gcTime:3*24*60*60*1e3}));return{relayInfo:()=>s.data,query:s}},Ae=f('<div class="scrollbar max-h-24 overflow-scroll whitespace-pre-wrap break-words px-4 py-2">'),Je=f('<pre class="w-full overflow-scroll rounded-lg border border-border p-4">'),Ke=f('<div class="divide-y divide-border"><div class="flex max-w-full items-center gap-4 p-4"><div class="min-w-0 flex-1"><h3 class="truncate text-2xl font-bold"></h3><div class="truncate text-sm"></div></div></div><div class="flex divide-x divide-border"><div class="flex-1 shrink-0 px-4 py-2"><div class="text-sm text-fg-secondary"></div></div><div class="flex-1 shrink-0 px-4 py-2"><div class="text-sm text-fg-secondary"></div></div></div><div class="flex divide-x divide-border"><div class="flex-1 shrink-0 px-4 py-2"><div class="text-sm text-fg-secondary"></div></div><div class="flex-1 shrink-0 px-4 py-2"><div class="text-sm text-fg-secondary"></div></div></div><div class="flex flex-col gap-2 p-4"><button class="select-text rounded-lg border border-border bg-bg-tertiary/20 p-2 text-fg-secondary hover:bg-bg-tertiary">'),He=f('<div class="size-16 overflow-hidden rounded-lg shadow-md"><img alt="icon of relay"class="size-full object-cover">'),D=f("<div>"),Ge=f('<div class="whitespace-normal break-words"><button class="inline select-text underline">'),H=f('<div class="whitespace-pre-wrap break-all">'),Xe=f('<div class="flex-1 shrink-0 border-t border-border px-4 py-2"><div class="text-sm text-fg-secondary"></div><div class="scrollbar flex w-full gap-1 overflow-x-scroll pt-1">'),Ve=f('<span class="inline-block w-12 rounded-xl border border-border py-2 text-center hover:border-fg-tertiary hover:text-fg-secondary">'),Qe=t=>`https://github.com/nostr-protocol/nips/blob/master/${t.toString(10).padStart(2,"0")}.md`,Ye=t=>{const n=j(),{relayInfo:s}=oe(()=>({relayUrl:t.relayUrl})),[h,m]=L(!1),a=()=>m(i=>!i),{showProfile:o}=re();return l(le,{get onClose(){return t.onClose},get children(){const i=Ke(),u=i.firstChild,d=u.firstChild,g=d.firstChild,b=g.nextSibling,c=u.nextSibling,p=c.firstChild,y=p.firstChild,_=p.nextSibling,w=_.firstChild,x=c.nextSibling,S=x.firstChild,P=S.firstChild,z=S.nextSibling,q=z.firstChild,F=x.nextSibling,M=F.firstChild;return r(u,l(k,{get when(){return s()?.icon},keyed:!0,children:v=>(()=>{const $=He(),E=$.firstChild;return T(E,"src",v),$})()}),d),r(g,()=>s()?.name??t.relayUrl),r(b,()=>t.relayUrl),r(i,l(k,{get when(){return s()?.description},keyed:!0,get children(){const v=Ae();return r(v,()=>s()?.description),v}}),c),r(y,()=>n.t("relayInfo.administrator")),r(p,l(k,{get when(){return s()?.pubkey},get fallback(){return(()=>{const v=D();return r(v,()=>n.t("relayInfo.unknown")),v})()},keyed:!0,children:v=>(()=>{const $=Ge(),E=$.firstChild;return E.$$click=()=>o(v),r(E,l(ne,{pubkey:v})),$})()}),null),r(w,()=>n.t("relayInfo.contact")),r(_,l(k,{get when(){return s()?.contact},get fallback(){return(()=>{const v=D();return r(v,()=>n.t("relayInfo.unknown")),v})()},keyed:!0,children:v=>(()=>{const $=H();return r($,l(J,{class:"underline",href:v,children:v})),$})()}),null),r(P,()=>n.t("relayInfo.software")),r(S,l(k,{get when(){return s()?.software},get fallback(){return(()=>{const v=D();return r(v,()=>n.t("relayInfo.unknown")),v})()},keyed:!0,children:v=>(()=>{const $=H();return r($,l(k,{get when(){return je(v)},fallback:v,keyed:!0,children:E=>l(J,{class:"underline",href:E})})),$})()}),null),r(q,()=>n.t("relayInfo.version")),r(z,l(k,{get when(){return s()?.version},get fallback(){return(()=>{const v=D();return r(v,()=>n.t("relayInfo.unknown")),v})()},keyed:!0,children:v=>(()=>{const $=H();return r($,v),$})()}),null),r(i,l(k,{get when(){return s()?.supported_nips},keyed:!0,children:v=>(()=>{const $=Xe(),E=$.firstChild,B=E.nextSibling;return r(E,()=>n.t("relayInfo.supportedNips")),r(B,l(R,{each:v,children:V=>l(J,{get href(){return Qe(V)},get children(){const Q=Ve();return r(Q,V),Q}})})),$})()}),F),M.$$click=a,r(M,()=>n.t("relayInfo.showJSON")),r(F,l(k,{get when(){return h()},get children(){const v=Je();return r(v,()=>JSON.stringify(s(),null,2)),v}}),null),i}})};ee(["click"]);const Y=e.string().length(64).regex(/^[0-9a-f]{64}$/),X=e.string().regex(/^\w+$/),Ze=e.object({shortcode:X,url:e.string().url(),keywords:e.optional(e.array(X))}),We=e.object({manifest:e.literal("emojipack_v1"),name:e.string(),emojis:e.array(Ze),description:e.optional(e.string()),author:e.optional(Y),publisher:e.optional(Y)}).refine(t=>ve(t.emojis,s=>s.shortcode).length===t.emojis.length,{message:"shortcodes should be unique"}),ie=e.record(X,e.string().url());We.or(ie);const et=t=>Object.entries(t).map(([n,s])=>({shortcode:n,url:s})),tt=f('<div class="border-t border-border p-2">'),nt=f('<div class="mb-2 rounded border border-border shadow hover:shadow-md"><h3 class="text-lg font-bold"><button type=button class="flex w-full items-center p-2 text-start"><span class="flex-1 hover:text-fg-secondary"></span><span class="inline-block size-4 shrink-0 text-fg">'),rt=f('<button class="flex h-[24px] w-[48px] items-center rounded-full border border-primary/80 px-1"><span class="m-[-3px] inline-block size-5 rounded-full border bg-primary-fg shadow">'),se=f('<div class="flex gap-2 py-1"><button class="rounded border border-primary px-4 py-1 font-bold text-primary"></button><button class="rounded border border-primary px-4 py-1 font-bold text-primary">'),lt=f("<input type=file hidden name=config accept=application/json>"),ot=f("<p class=py-1>"),it=f('<form class="flex gap-2"><input class="flex-1 rounded-md border border-border bg-bg ring-border placeholder:text-fg-secondary focus:border-border focus:ring-primary"type=text name=relayUrl placeholder=wss://...><button type=submit class="rounded bg-primary p-2 font-bold text-primary-fg">'),st=f('<ul class="mt-2 divide-y divide-border rounded border border-border">'),at=f('<button type=button class="rounded bg-primary p-2 font-bold text-primary-fg">'),ct=f('<li class=flex><button class="flex flex-1 items-center truncate rounded py-1 text-start hover:bg-bg-tertiary"><div class="shrink-0 px-2"><span class="inline-block size-2 rounded-full"aria-label=""></span></div><div class="min-w-0 flex-1"><div class=truncate></div><div class="truncate text-xs text-fg-secondary"></div></div></button><button class="align-center flex shrink-0 items-center justify-center pe-6 ps-4"><span class=size-3>'),dt=f('<div class="scrollbar flex flex-col overflow-y-auto rounded-md border border-border">'),ut=f('<button type=button class="border-t border-border px-2 py-1 text-left first:border-none">'),ft=f('<div class="flex flex-col justify-evenly gap-2 sm:flex-row">'),gt=f('<div class="flex flex-1 flex-row items-center gap-1 sm:flex-col"><button type=button class="w-48 rounded border border-primary p-2 font-bold sm:w-full"></button><div class=text-xs>'),mt=f('<div class="flex flex-col justify-evenly gap-2"><div class="flex w-full"><div class=flex-1></div></div><div class="flex w-full"><div class=flex-1>'),pt=f('<form class="flex flex-col gap-2"><label class="flex flex-1 items-center gap-1"><div class=w-9></div><input class="flex-1 rounded-md border-border bg-bg placeholder:text-fg-secondary focus:border-border focus:ring-primary"type=text name=shortcode placeholder=smiley pattern=^\\w+$ required></label><label class="flex flex-1 items-center gap-1"><div class=w-9></div><input class="flex-1 rounded-md border-border bg-bg placeholder:text-fg-secondary focus:border-border focus:ring-primary"type=text name=url placeholder=https://example.com/smiley.png required></label><button type=submit class="w-24 self-end rounded bg-primary p-2 font-bold text-primary-fg">'),ht=f('<ul class="mt-4 flex max-h-[40vh] min-h-64 flex-wrap overflow-y-auto border-t border-border">'),bt=f('<div class="flex min-w-24 flex-col items-center rounded border border-border bg-bg shadow"><div class="flex items-center p-1"><img class="h-20 max-w-20 object-contain"></div><div class="p-1 text-center text-sm"></div><div class="w-full border-t border-border"><button type=button class="w-full px-2 py-1 text-danger">'),vt=f('<li class="min-w-0 basis-1/2 sm:basis-1/4"><button type=button class="flex w-full flex-col items-center gap-1 rounded p-2 hover:bg-bg-tertiary/20 hover:shadow"><div class="w-full truncate text-xs text-fg-secondary">'),$t=f("<div class=size-8>"),yt=f('<div class="flex h-8 max-w-8 items-center"><img class=object-contain>'),ae=f("<p>"),_t=f('<form class="flex flex-col gap-2"><textarea class="flex-1 rounded-md border-border bg-bg placeholder:text-fg-secondary focus:border-border focus:ring-primary"name=json placeholder="{ &quot;smiley&quot;: &quot;https://example.com/smiley.png&quot; }"></textarea><button type=submit class="w-24 self-end rounded bg-primary p-2 font-bold text-primary-fg">'),xt=f('<ul class="flex max-h-[50vh] min-h-64 flex-col overflow-y-auto">'),wt=f('<form class="flex gap-2"><input class="flex-1 rounded-md border border-border bg-bg ring-border focus:border-border focus:ring-primary"type=text name=keyword><button type=submit class="rounded bg-primary p-2 font-bold text-primary-fg">'),kt=f('<ul class="mt-2 flex max-h-[50vh] min-h-64 flex-col overflow-y-auto border-t border-border">'),Ct=f('<ul class="flex max-h-[50vh] min-h-64 flex-col gap-1 overflow-y-auto">'),Z=f('<li class="flex items-center border-b border-border pr-4"><div class="flex-1 truncate"></div><button class="size-3 shrink-0">'),W=f("<div class=h-4>"),jt=f('<li class="flex items-center"><div class="flex-1 truncate rounded border border-border p-2"></div><button class=p-4><span class="inline-block size-4">'),St=f('<div class="flex flex-col justify-evenly gap-2"><div class="flex w-full"><div class=flex-1>YouTube</div></div><div class="flex w-full"><div class=flex-1>X (Twitter)</div></div><div class="flex w-full"><div class=flex-1>OGP'),Et=f('<div class="flex flex-col justify-evenly gap-2"><div class="flex w-full"><div class=flex-1></div></div><div class="flex w-full"><div class=flex-1></div></div><div class="flex w-full"><div class=flex-1>'),It=f("<div class=p-4>"),Rt=f('<h2 class="flex-1 text-center text-lg font-bold">'),Lt=f('<ul class="flex flex-col">'),Ut=f('<li class=w-full><button class="flex w-full gap-2 py-3 hover:text-primary"><span class="inline-block size-6">'),Tt=f('<div class="flex flex-col"><div><button class="pr-4 text-fg hover:text-fg-secondary"><span class="inline-block size-6"></span></button></div><div class="w-full flex-1 pt-4">'),ce=t=>`^(?:${t})://[-a-zA-Z0-9.]+(:\\d{1,5})?(?:/[-[\\]~!$&'()*+.,:;@&=%\\w]+|/)*(?:\\?[-[\\]~!$&'()*+.,/:;%@&=\\w?]+)?(?:#[-[\\]~!$&'()*+.,/:;%@\\w&=?#]+)?$`,Ot=ce("https?"),Ft=ce("wss?"),C=t=>{const[n,s]=L(t.initialOpened??!0),h=()=>s(m=>!m);return(()=>{const m=nt(),a=m.firstChild,o=a.firstChild,i=o.firstChild,u=i.nextSibling;return o.$$click=()=>h(),r(i,()=>t.title),r(u,l(k,{get when(){return n()},get fallback(){return l(Ee,{})},get children(){return l(Re,{})}})),r(m,l(k,{get when(){return n()},get children(){const d=tt();return r(d,()=>t.children),d}}),null),m})()},O=t=>(()=>{const n=rt();return n.$$click=s=>t.onClick(s),U(s=>{const h=!t.value,m=!t.value,a=!!t.value,o=!!t.value,i=t.value;return h!==s._v$&&n.classList.toggle("bg-bg-tertiary",s._v$=h),m!==s._v$2&&n.classList.toggle("justify-start",s._v$2=m),a!==s._v$3&&n.classList.toggle("bg-primary",s._v$3=a),o!==s._v$4&&n.classList.toggle("justify-end",s._v$4=o),i!==s._v$5&&T(n,"area-label",s._v$5=i),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})(),Mt=()=>{const t=j(),n=_e(),{showProfile:s,showProfileEdit:h}=re();return l(C,{get title(){return t.t("config.account.profile")},get children(){const m=se(),a=m.firstChild,o=a.nextSibling;return a.$$click=()=>xe([n()])(([i])=>{s(i)}),r(a,()=>t.t("config.account.openProfile")),o.$$click=()=>h(),r(o,()=>t.t("config.account.editProfile")),m}})},Nt=()=>{let t;const n=j(),s=I(),h=()=>{const i=JSON.stringify(s.config(),null,2),u=new Blob([i],{type:"application/json"}),d=URL.createObjectURL(u),g=new Date().toISOString(),b=document.createElement("a");b.href=d,b.download=`rabbit-${g}.json`,b.click()},m=()=>{t?.click()},a=async i=>{try{const u=await i.text(),d=he.parse(JSON.parse(u));s.setConfig(d),window.alert(n.t("config.account.restored")),window.location.reload()}catch(u){u instanceof Error?window.alert(`${n.t("config.account.failedToRestore")}: ${u.message}`):window.alert(n.t("config.account.failedToRestore"))}},o=i=>{i.preventDefault();const u=[...i.currentTarget.files??[]];if(u.length!==1)return;const d=u[0];a(d).catch(g=>console.log(g))};return l(C,{get title(){return n.t("config.account.backupConfig")},get children(){return[(()=>{const i=se(),u=i.firstChild,d=u.nextSibling;return u.$$click=h,r(u,()=>n.t("config.account.save")),d.$$click=m,r(d,()=>n.t("config.account.restore")),i})(),(()=>{const i=lt();i.addEventListener("change",o);const u=t;return typeof u=="function"?te(u,i):t=i,i.multiple=!1,i})()]}})},Pt=()=>{const t=j(),{config:n,addRelay:s,removeRelay:h}=I(),m=ke(),[a,o]=L(""),[i,u]=L(null),d=()=>u(null),g=c=>{c.preventDefault(),a().length!==0&&(s(a()),o(""))},b=async()=>{if(window.nostr==null)return;const c=Object.entries(await window.nostr?.getRelays?.()??[]),p=c.map(([x])=>x).join(`
`);if(c.length===0){window.alert(t.t("config.relays.notConfigured"));return}if(!window.confirm(`${t.t("config.relays.askImport")}

${p}`))return;const y=n().relayUrls.length;pe(()=>{c.forEach(([x])=>{s(x)})});const w=n().relayUrls.length-y;window.alert(t.t("config.relays.imported",{count:w}))};return[l(C,{get title(){return t.t("config.relays.relays")},get children(){return[(()=>{const c=ot();return r(c,()=>t.t("config.relays.numOfRelays",{count:n().relayUrls.length})),c})(),(()=>{const c=it(),p=c.firstChild,y=p.nextSibling;return c.addEventListener("submit",g),p.addEventListener("change",_=>o(_.currentTarget.value)),T(p,"pattern",Ft),r(y,()=>t.t("config.relays.addRelay")),U(()=>p.value=a()),c})(),(()=>{const c=st();return r(c,l(R,{get each(){return n().relayUrls},children:p=>{const{relayInfo:y}=oe(()=>({relayUrl:p})),_=()=>m().getRelay(p)?.connected??!1;return(()=>{const w=ct(),x=w.firstChild,S=x.firstChild,P=S.firstChild,z=S.nextSibling,q=z.firstChild,F=q.nextSibling,M=x.nextSibling,v=M.firstChild;return x.$$click=()=>u({type:"RelayInfo",relayUrl:p}),r(q,()=>y()?.name??p),r(F,p),M.$$click=()=>h(p),r(v,l(A,{})),U($=>{const E=!_(),B=!!_();return E!==$._v$6&&P.classList.toggle("bg-rose-500",$._v$6=E),B!==$._v$7&&P.classList.toggle("bg-green-500",$._v$7=B),$},{_v$6:void 0,_v$7:void 0}),w})()}})),c})()]}}),l(C,{get title(){return t.t("config.relays.importRelays")},get children(){const c=at();return c.$$click=()=>{b().catch(p=>{console.error("failed to import relays",p),window.alert(t.t("config.relays.failedToImport"))})},r(c,()=>t.t("config.relays.importFromExtension")),c}}),l(k,{get when(){return i()},keyed:!0,children:c=>l(k,{get when(){return c.type==="RelayInfo"},get children(){return l(Ye,{get relayUrl(){return c.relayUrl},onClose:()=>d()})}})})]},zt=()=>{const t=j(),{config:n,setConfig:s}=I(),h=a=>{const o=n().colorTheme;return o.type==="specific"?o.id===a:!1},m=a=>{s(o=>({...o,colorTheme:{type:"specific",id:a}}))};return l(C,{get title(){return t.t("config.display.colorTheme")},get children(){const a=dt();return r(a,l(R,{get each(){return Object.values(me)},children:o=>(()=>{const i=ut();return i.$$click=()=>m(o.id),r(i,()=>o.name),U(u=>{const d=!!h(o.id),g=!!h(o.id),b=!h(o.id);return d!==u._v$8&&i.classList.toggle("bg-primary",u._v$8=d),g!==u._v$9&&i.classList.toggle("text-primary-fg",u._v$9=g),b!==u._v$10&&i.classList.toggle("text-fg",u._v$10=b),u},{_v$8:void 0,_v$9:void 0,_v$10:void 0}),i})()})),a}})},qt=()=>{const t=j(),{config:n,setConfig:s}=I(),h=[{id:"relative",name:t.t("config.display.relativeTimeNotation"),example:t.t("config.display.relativeTimeNotationExample")},{id:"absolute-short",name:t.t("config.display.absoluteTimeNotationShort"),example:t.t("config.display.absoluteTimeNotationShortExample")},{id:"absolute-long",name:t.t("config.display.absoluteTimeNotationLong"),example:t.t("config.display.absoluteTimeNotationLongExample")}],m=a=>{s(o=>({...o,dateFormat:a}))};return l(C,{get title(){return t.t("config.display.timeNotation")},get children(){const a=ft();return r(a,l(R,{each:h,children:({id:o,name:i,example:u})=>(()=>{const d=gt(),g=d.firstChild,b=g.nextSibling;return g.$$click=()=>m(o),r(g,i),r(b,u),U(c=>{const p=n().dateFormat===o,y=n().dateFormat===o,_=n().dateFormat!==o,w=n().dateFormat!==o;return p!==c._v$11&&g.classList.toggle("bg-primary",c._v$11=p),y!==c._v$12&&g.classList.toggle("text-primary-fg",c._v$12=y),_!==c._v$13&&g.classList.toggle("bg-bg",c._v$13=_),w!==c._v$14&&g.classList.toggle("text-primary",c._v$14=w),c},{_v$11:void 0,_v$12:void 0,_v$13:void 0,_v$14:void 0}),d})()})),a}})},Bt=()=>{const t=j(),{config:n,setConfig:s}=I(),h=()=>{s(a=>({...a,useEmojiReaction:!(a.useEmojiReaction??!1)}))},m=()=>{s(a=>({...a,showEmojiReaction:!(a.showEmojiReaction??!1)}))};return l(C,{get title(){return t.t("config.display.reaction")},get children(){const a=mt(),o=a.firstChild,i=o.firstChild,u=o.nextSibling,d=u.firstChild;return r(i,()=>t.t("config.display.enableEmojiReaction")),r(o,l(O,{get value(){return n().useEmojiReaction},onClick:()=>h()}),null),r(d,()=>t.t("config.display.showEmojiReaction")),r(u,l(O,{get value(){return n().showEmojiReaction},onClick:()=>m()}),null),a}})},Dt=()=>{const t=j(),{config:n,saveEmoji:s,removeEmoji:h}=I(),[m,a]=L(""),[o,i]=L(""),u=d=>{d.preventDefault(),!(m().length===0||o().length===0)&&(s({shortcode:m(),url:o()}),a(""),i(""))};return l(C,{get title(){return t.t("config.customEmoji.customEmoji")},get children(){return[(()=>{const d=pt(),g=d.firstChild,b=g.firstChild,c=b.nextSibling,p=g.nextSibling,y=p.firstChild,_=y.nextSibling,w=p.nextSibling;return d.addEventListener("submit",u),r(b,()=>t.t("config.customEmoji.shortcode")),c.addEventListener("change",x=>a(x.currentTarget.value)),r(y,()=>t.t("config.customEmoji.url")),_.addEventListener("change",x=>i(x.currentTarget.value)),T(_,"pattern",Ot),r(w,()=>t.t("config.customEmoji.addEmoji")),U(()=>c.value=m()),U(()=>_.value=o()),d})(),(()=>{const d=ht();return r(d,l(R,{get each(){return Object.values(n().customEmojis)},children:({shortcode:g,url:b})=>{const c=we(()=>({popup:(()=>{const p=bt(),y=p.firstChild,_=y.firstChild,w=y.nextSibling,x=w.nextSibling,S=x.firstChild;return T(_,"src",b),T(_,"alt",g),r(w,g),S.$$click=()=>h(g),r(S,()=>t.t("config.customEmoji.removeEmoji")),p})()}));return(()=>{const p=vt(),y=p.firstChild,_=y.firstChild,w=c.targetRef;return typeof w=="function"?te(w,p):c.targetRef=p,y.$$click=()=>c.open(),r(y,l(G,{get fallback(){return $t()},children:()=>(()=>{const x=yt(),S=x.firstChild;return T(S,"src",b),T(S,"alt",g),x})()}),_),r(_,g),r(p,()=>c.popup(),null),p})()}})),d})()]}})},At=()=>{const t=j(),{saveEmojis:n}=I(),[s,h]=L(""),m=a=>{if(a.preventDefault(),s().length!==0)try{const o=ie.parse(JSON.parse(s())),i=et(o);n(i),h("")}catch(o){const i=o instanceof Error?`:${o.message}`:"";window.alert(`JSONの読み込みに失敗しました${i}`)}};return l(C,{get title(){return t.t("config.customEmoji.emojiImport")},get children(){return[(()=>{const a=ae();return r(a,()=>t.t("config.customEmoji.emojiImportDescription")),a})(),(()=>{const a=_t(),o=a.firstChild,i=o.nextSibling;return a.addEventListener("submit",m),o.addEventListener("change",u=>h(u.currentTarget.value)),r(i,()=>t.t("config.customEmoji.importEmoji")),U(()=>o.value=s()),a})()]}})},Jt=()=>{const t=j(),{config:n,removeMutedPubkey:s,removeMutedThread:h,addMutedKeyword:m,removeMutedKeyword:a}=I(),[o,i]=L(""),u=d=>{d.preventDefault(),o().length!==0&&(m(o()),i(""))};return[l(C,{get title(){return t.t("config.mute.mutedUsers")},initialOpened:!1,get children(){const d=xt();return r(d,l(R,{get each(){return n().mutedPubkeys},children:g=>(()=>{const b=Z(),c=b.firstChild,p=c.nextSibling;return r(c,l(G,{get fallback(){return W()},children:()=>l(ne,{pubkey:g})})),p.$$click=()=>s(g),r(p,l(A,{})),b})()})),d}}),l(C,{get title(){return t.t("config.mute.mutedKeywords")},initialOpened:!1,get children(){return[(()=>{const d=wt(),g=d.firstChild,b=g.nextSibling;return d.addEventListener("submit",u),g.addEventListener("change",c=>i(c.currentTarget.value)),r(b,()=>t.t("config.mute.add")),U(()=>g.value=o()),d})(),(()=>{const d=kt();return r(d,l(R,{get each(){return n().mutedKeywords},children:g=>(()=>{const b=Z(),c=b.firstChild,p=c.nextSibling;return r(c,g),p.$$click=()=>a(g),r(p,l(A,{})),b})()})),d})()]}}),l(C,{get title(){return t.t("config.mute.mutedThreads")},initialOpened:!1,get children(){const d=Ct();return r(d,l(R,{get each(){return n().mutedThreads},children:g=>(()=>{const b=jt(),c=b.firstChild,p=c.nextSibling,y=p.firstChild;return r(c,l(G,{get fallback(){return W()},children:()=>l(Ce,{eventId:g,actions:!1,displayForcibly:!0})})),p.$$click=()=>h(g),r(y,l(A,{})),b})()})),d}})]},Kt=()=>{const t=j(),{config:n,setConfig:s}=I(),h=m=>{s(a=>({...a,embedding:{...a.embedding,[m]:!a.embedding[m]}}))};return l(C,{get title(){return t.t("config.display.embedding")},get children(){return[(()=>{const m=ae();return r(m,()=>t.t("config.display.embeddingDescription")),m})(),(()=>{const m=St(),a=m.firstChild;a.firstChild;const o=a.nextSibling;o.firstChild;const i=o.nextSibling;return i.firstChild,r(a,l(O,{get value(){return n().embedding.youtube},onClick:()=>h("youtube")}),null),r(o,l(O,{get value(){return n().embedding.twitter},onClick:()=>h("twitter")}),null),r(i,l(O,{get value(){return n().embedding.ogp},onClick:()=>h("ogp")}),null),m})()]}})},Ht=()=>{const t=j(),{config:n,setConfig:s}=I(),h=()=>{s(o=>({...o,keepOpenPostForm:!(o.keepOpenPostForm??!1)}))},m=()=>{s(o=>({...o,showMedia:!(o.showMedia??!0)}))},a=()=>{s(o=>({...o,hideCount:!(o.hideCount??!1)}))};return l(C,{get title(){return t.t("config.display.others")},get children(){const o=Et(),i=o.firstChild,u=i.firstChild,d=i.nextSibling,g=d.firstChild,b=d.nextSibling,c=b.firstChild;return r(u,()=>t.t("config.display.keepOpenPostForm")),r(i,l(O,{get value(){return n().keepOpenPostForm},onClick:()=>h()}),null),r(g,()=>t.t("config.display.showMediaByDefault")),r(d,l(O,{get value(){return n().showMedia},onClick:()=>m()}),null),r(c,()=>t.t("config.display.hideNumbers")),r(b,l(O,{get value(){return n().hideCount},onClick:()=>a()}),null),o}})},tn=t=>{const n=j(),[s,h]=L(null),m=[{name:()=>n.t("config.account.profile"),icon:()=>l($e,{}),render:()=>[l(Mt,{}),l(Nt,{})]},{name:()=>n.t("config.relays.relays"),icon:()=>l(Me,{}),render:()=>l(Pt,{})},{name:()=>n.t("config.display.display"),icon:()=>l(Oe,{}),render:()=>[l(zt,{}),l(qt,{}),l(Bt,{}),l(Kt,{}),l(Ht,{})]},{name:()=>n.t("config.customEmoji.customEmoji"),icon:()=>l(ye,{}),render:()=>[l(Dt,{}),l(At,{})]},{name:()=>n.t("config.mute.mute"),icon:()=>l(Ue,{}),render:()=>l(Jt,{})}],a=()=>{const o=s();return o==null?null:m[o]};return l(le,{get onClose(){return t.onClose},get children(){const o=It();return r(o,l(k,{get when(){return a()},get fallback(){return[(()=>{const i=Rt();return r(i,()=>n.t("config.config")),i})(),(()=>{const i=Lt();return r(i,l(R,{each:m,children:(u,d)=>(()=>{const g=Ut(),b=g.firstChild,c=b.firstChild;return b.$$click=()=>h(d),r(c,()=>u.icon()),r(b,()=>u.name(),null),g})()})),i})()]},keyed:!0,children:i=>(()=>{const u=Tt(),d=u.firstChild,g=d.firstChild,b=g.firstChild,c=d.nextSibling;return g.$$click=()=>h(null),r(b,l(be,{})),r(c,()=>i.render()),u})()})),o}})};ee(["click"]);export{tn as default};
//# sourceMappingURL=Config-FmDC1srI.js.map
