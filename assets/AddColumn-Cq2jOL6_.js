import{s as R,t as m,w as M,j as S,D as A,d as x,u as w,i as c,a as s,h as j,f as T,F as v,c as k,S as U,al as H,M as $,am as N,an as q,ao as z,ap as B,aq as L,aj as P,ar as D,as as E}from"./index-rSJcjQqR.js";import{g as h,T as G,b as J,a as O,H as W,j as K,h as Q,G as V,M as X,k as Y,l as Z}from"./SideBar-6zVQ4zFe.js";import{B as I}from"./BasicModal-CXYbLpgB.js";import{a as ee}from"./NostrSet-CDfEQmOn.js";import{u as te}from"./useSubscription-DHwPlFh7.js";import{i as ne}from"./url-DPIb-kBm.js";import"./resolveAsset-CRJrG7IV.js";const oe=m('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008zm-3 0h.008v.008h-.008z">'),se=(a={})=>(()=>{const n=oe();return R(n,a,!0),n})(),le=a=>{const o=new G(a.tags).findFirstTagByName("d")?.[1];return o==null?!1:!(o==="mute"||/^chats\//.test(o)||/^settings\//.test(o)||/^notifications\//.test(o))},ae=a=>{const n=M(a),{config:o}=S(),{events:e}=te(()=>h([n()])(([i])=>({filters:[{kinds:[A],authors:[i.author]}],relayUrls:o().relayUrls})));return{events:e,followSets:()=>e().filter(le)}},re=m('<div class=p-8><div class="flex flex-col divide-y divide-border rounded border border-border">'),ce=m('<button type=button class="flex items-center gap-2 p-2 hover:bg-bg-tertiary"><div class="size-8 shrink-0 bg-fg-secondary"></div><div class="shrink-0 grow truncate text-start"></div><div class="px-2 text-fg-secondary">'),ie=m('<img class="size-full object-cover"alt=icon>'),ue=a=>{const n=w(),{followSets:o}=ae(()=>h([a.pubkey])(([e])=>({author:e})));return(()=>{const e=re(),p=e.firstChild;return c(e,()=>n.t("column.addFollowSetColumn.numberOfFollowSets",{count:o().length}),p),c(p,s(v,{get each(){return o()},children:i=>{const r=new ee(i);return(()=>{const t=ce(),f=t.firstChild,g=f.nextSibling,y=g.nextSibling;return t.$$click=()=>a.onSelectFollowSet(r.pubkey,r.identifier()),c(f,s(j,{get when(){return r.image()},keyed:!0,children:u=>(()=>{const d=ie();return T(d,"src",u),d})()})),c(g,()=>r.title()??r.identifier()),c(y,()=>r.pTags().length),t})()}})),e})()};x(["click"]);const de=m('<div class=p-8><form class="flex gap-1"><input class="flex-1 rounded-md border-border bg-bg placeholder:text-fg-secondary focus:border-border focus:ring-primary"type=text name=url placeholder=wss://... pattern=wss?://.* required><button class="rounded border border-primary px-4 py-1 font-bold text-primary"type=submit></button></form><div class="flex flex-col items-start gap-1 pt-8">'),me=m('<button type=button class="text-fg-secondary hover:text-fg">'),pe=m('<div class="flex flex-wrap p-4">'),fe=m('<button class="flex basis-1/2 flex-col items-center gap-2 py-8 hover:text-primary sm:basis-1/4"><span class="inline-block size-8">'),ge=a=>{const n=w(),{config:o}=S(),[e,p]=k(""),i=r=>{r.preventDefault();const t=e();if(!ne(t)){window.alert("Invalid url");return}a.addRelaysColumn([t])};return(()=>{const r=de(),t=r.firstChild,f=t.firstChild,g=f.nextSibling,y=t.nextSibling;return t.addEventListener("submit",i),f.addEventListener("change",u=>p(u.currentTarget.value)),c(g,()=>n.t("column.addRelayColumn.add")),c(y,s(v,{get each(){return o().relayUrls},children:u=>(()=>{const d=me();return d.$$click=()=>a.addRelaysColumn([u]),c(d,u),d})()})),r})()},_e=a=>{const n=w(),o=J(),{saveColumn:e}=S(),p=O(),[i,r]=k(void 0),t=()=>{a.onClose(),p({command:"moveToLastColumn"}).catch(l=>console.error(l))},f=()=>{h([o()])(([l])=>{e(z({pubkey:l}))}),t()},g=()=>{h([o()])(([l])=>{e(B({pubkey:l}))}),t()},y=()=>{e(L()),t()},u=l=>{e(N({name:l.join(", "),relayUrls:l})),t()},d=(l,b)=>{e(q({author:l,identifier:b})),t()},_=[{name:()=>n.t("column.home"),icon:()=>s(W,{}),onSelect:f},{name:()=>n.t("column.notification"),icon:()=>s(K,{}),onSelect:g},{name:()=>n.t("column.relay"),icon:()=>s(se,{}),onSelect:()=>r("AddRelaysColumn")},{name:()=>n.t("column.followSet"),icon:()=>s(Q,{}),onSelect:()=>r("AddFollowSet")},{name:()=>n.t("column.japanese"),icon:()=>s(V,{}),onSelect:y},{name:()=>n.t("column.search"),icon:()=>s(X,{}),onSelect:()=>{e(P({query:""})),t()}},{name:()=>n.t("column.myPosts"),icon:()=>s(Y,{}),onSelect:()=>{h([o()])(([l])=>{e(D({pubkey:l}))}),t()}},{name:()=>n.t("column.myReactions"),icon:()=>s(Z,{}),onSelect:()=>{h([o()])(([l])=>{e(E({pubkey:l}))}),t()}}];return s(I,{get onClose(){return a.onClose},get children(){return s(U,{get fallback(){return(()=>{const l=pe();return c(l,s(v,{each:_,children:b=>(()=>{const C=fe(),F=C.firstChild;return H(C,"click",b.onSelect,!0),c(F,()=>b.icon()),c(C,()=>b.name(),null),C})()})),l})()},get children(){return[s($,{get when(){return i()==="AddRelaysColumn"},get children(){return s(ge,{addRelaysColumn:u})}}),s($,{get when(){return i()==="AddFollowSet"},get children(){return s(ue,{get pubkey(){return o()},onSelectFollowSet:d})}})]}})}})};x(["click"]);export{_e as default};
//# sourceMappingURL=AddColumn-Cq2jOL6_.js.map
