{"version":3,"file":"Permalink-54308845.js","sources":["../../src/pages/Permalink.tsx"],"sourcesContent":["import { createEffect, onMount } from 'solid-js';\n\nimport { useNavigate, useParams } from '@solidjs/router';\nimport { nip19 } from 'nostr-tools';\n\nimport GlobalModal from '@/components/modal/GlobalModal';\nimport SideBar from '@/components/SideBar';\nimport useModalState from '@/hooks/useModalState';\nimport usePersistStatus from '@/hooks/usePersistStatus';\n\nconst Permalink = () => {\n  const navigate = useNavigate();\n  const params = useParams();\n  const { modalState, showProfile } = useModalState();\n  const { persistStatus } = usePersistStatus();\n\n  const navigateTop = () => {\n    if (persistStatus().loggedIn) {\n      navigate('/');\n    } else {\n      navigate('/hello');\n    }\n  };\n\n  onMount(() => {\n    if (params.id != null) {\n      try {\n        const decoded = nip19.decode(params.id);\n        if (decoded.type === 'npub') {\n          showProfile(decoded.data);\n        }\n      } catch (err) {\n        window.alert('Invalid ID');\n        navigateTop();\n      }\n    } else {\n      navigateTop();\n    }\n  });\n\n  createEffect(() => {\n    if (modalState().type === 'Closed') {\n      navigateTop();\n    }\n  });\n\n  return (\n    <div class=\"absolute inset-0 flex w-screen touch-manipulation flex-row overflow-hidden\">\n      <SideBar />\n      <GlobalModal />\n    </div>\n  );\n};\n\nexport default Permalink;\n"],"names":["Permalink","navigate","useNavigate","params","useParams","modalState","showProfile","useModalState","persistStatus","usePersistStatus","navigateTop","loggedIn","onMount","id","decoded","nip19","decode","type","data","window","alert","createEffect","_el$","_tmpl$","_$insert","_$createComponent","SideBar","GlobalModal"],"mappings":"sSAUMA,EAAYA,IAAM,CACtB,MAAMC,EAAWC,IACXC,EAASC,IACT,CAAEC,WAAAA,EAAYC,YAAAA,CAAa,EAAGC,EAAa,EAC3C,CAAEC,cAAAA,CAAe,EAAGC,EAAgB,EAEpCC,EAAcA,IAAM,CACpBF,EAAe,EAACG,SAClBV,EAAS,GAAG,EAEZA,EAAS,QAAQ,GAIrBW,OAAAA,EAAQ,IAAM,CACZ,GAAIT,EAAOU,IAAM,KACf,GAAI,CACF,MAAMC,EAAUC,EAAMC,OAAOb,EAAOU,EAAE,EAClCC,EAAQG,OAAS,QACnBX,EAAYQ,EAAQI,IAAI,CAE3B,MAAa,CACZC,OAAOC,MAAM,YAAY,EACzBV,GACF,MAEAA,GAEJ,CAAC,EAEDW,EAAa,IAAM,CACbhB,EAAU,EAAGY,OAAS,UACxBP,GAEJ,CAAC,GAED,IAAA,CAAA,MAAAY,EAAAC,IAAAC,OAAAA,EAAAF,EAAAG,EAEKC,EAAO,CAAA,CAAA,EAAA,IAAA,EAAAF,EAAAF,EAAAG,EACPE,EAAW,CAAA,CAAA,EAAA,IAAA,EAAAL,CAAA,IAGlB"}