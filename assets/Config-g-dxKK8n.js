import{s as N,t as f,aI as e,aJ as ce,r as de,y as ue,aK as fe,d as Z,u as j,c as R,a as o,i as r,h as k,f as U,F as T,j as I,b as L,aL as ge,n as W,aj as me,aM as pe}from"./index-CKPHXJrE.js";import{A as he}from"./arrow-left-Vv7raIYf.js";import{U as ee,g as te,C as be,i as ve,F as $e,b as ye,f as _e,X as H,q as xe,m as we}from"./SideBar-DscDOpZJ.js";import{B as ne}from"./BasicModal-DX7sSIUb.js";import{S as A}from"./SafeLink-BR8T1A5s.js";import{s as ke}from"./url-DPIb-kBm.js";import{L as re}from"./LazyLoad-C_3XSMUF.js";import"./resolveAsset-Bs2Rf8qL.js";const Ce=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="m19.5 8.25-7.5 7.5-7.5-7.5">'),je=(t={})=>(()=>{const n=Ce();return N(n,t,!0),n})(),Se=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="m4.5 15.75 7.5-7.5 7.5 7.5">'),Ee=(t={})=>(()=>{const n=Se();return N(n,t,!0),n})(),Ie=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M3.98 8.223A10.477 10.477 0 0 0 1.934 12c1.292 4.338 5.31 7.5 10.066 7.5.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88">'),Re=(t={})=>(()=>{const n=Ie();return N(n,t,!0),n})(),Le=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128m0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42">'),Ue=(t={})=>(()=>{const n=Le();return N(n,t,!0),n})(),Oe=f('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008zm0-6h.008v.008h-.008zm-3 6h.008v.008h-.008zm0-6h.008v.008h-.008z">'),Te=(t={})=>(()=>{const n=Oe();return N(n,t,!0),n})(),Me=e.object({max_message_length:e.optional(e.number()),max_subscriptions:e.optional(e.number()),max_filters:e.optional(e.number()),max_limit:e.optional(e.number()),max_subid_length:e.optional(e.number()),max_event_tags:e.optional(e.number()),max_content_length:e.optional(e.number()),min_pow_difficulty:e.optional(e.number()),auth_required:e.optional(e.boolean()),payment_required:e.optional(e.boolean()),restricted_writes:e.optional(e.boolean()),created_at_lower_limit:e.optional(e.number()),created_at_upper_limit:e.optional(e.number())}),Fe=e.array(e.object({kinds:e.array(e.union([e.number(),e.array(e.number())])),time:e.nullable(e.number())})),K=e.object({amount:e.number(),unit:e.string(),period:e.optional(e.number()),kinds:e.optional(e.array(e.number()))}),Ne=e.object({admission:e.optional(e.array(K)),subscription:e.optional(e.array(K)),publication:e.optional(e.array(K))}),Pe=e.object({name:e.optional(e.string()),description:e.optional(e.string()),pubkey:e.optional(e.string().refine(ce)),contact:e.optional(e.string()),supported_nips:e.optional(e.array(e.number())),software:e.optional(e.string()),version:e.optional(e.string()),icon:e.optional(e.string().url()),limitation:e.optional(Me),retention:e.optional(Fe),relay_countries:e.optional(e.array(e.string())),language_tags:e.optional(e.array(e.string())),tags:e.optional(e.array(e.string())),posting_policy:e.optional(e.string().url()),payments_url:e.optional(e.string().url()),fees:e.optional(Ne)}),ze=t=>{const n=new URL(t);if(n.protocol==="wss:")n.protocol="https";else if(n.protocol==="ws:")n.protocol="http";else throw new Error("unexpected protocol");return n},qe=async t=>{const n=ze(t),s=await fetch(n,{headers:{Accept:"application/nostr+json"},mode:"cors"});if(s.status!==200)throw new Error("failed to fetch relay info: status was not 200");const p=await s.json();if(!fe(Pe)(p))throw new Error("failed to fetch relay info: unexpected form of data");return p},le=t=>{const n=de(t),s=ue(()=>({queryKey:["useRelayInfo",n()],queryFn:({queryKey:p})=>{const[,g]=p;if(g!=null)return qe(g.relayUrl)},enabled:n()!=null,staleTime:5*60*1e3,gcTime:3*24*60*60*1e3}));return{relayInfo:()=>s.data,query:s}},Be=f('<div class="scrollbar max-h-24 overflow-scroll whitespace-pre-wrap break-all px-4 py-2">'),De=f('<pre class="w-full overflow-scroll rounded-lg border border-border p-4">'),Ae=f('<div class="divide-y divide-border"><div class="flex max-w-full items-center gap-4 p-4"><div class="min-w-0 flex-1"><h3 class="truncate text-2xl font-bold"></h3><div class="truncate text-sm"></div></div></div><div class="flex divide-x divide-border"><div class="flex-1 shrink-0 px-4 py-2"><div class="text-sm text-fg-secondary"></div></div><div class="flex-1 shrink-0 px-4 py-2"><div class="text-sm text-fg-secondary"></div></div></div><div class="flex divide-x divide-border"><div class="flex-1 shrink-0 px-4 py-2"><div class="text-sm text-fg-secondary"></div></div><div class="flex-1 shrink-0 px-4 py-2"><div class="text-sm text-fg-secondary"></div></div></div><div class="flex flex-col gap-2 p-4"><button class="select-text rounded-lg border border-border bg-bg-tertiary/20 p-2 text-fg-secondary hover:bg-bg-tertiary">'),Ke=f('<div class="size-16 overflow-hidden rounded-lg shadow-md"><img alt="icon of relay"class="size-full object-cover">'),D=f("<div>"),Je=f('<div class="whitespace-pre-wrap break-all"><button class="inline select-text underline">'),J=f('<div class="whitespace-pre-wrap break-all">'),He=f('<div class="flex-1 shrink-0 border-t border-border px-4 py-2"><div class="text-sm text-fg-secondary"></div><div class="scrollbar flex w-full gap-1 overflow-x-scroll pt-1">'),Xe=f('<span class="inline-block w-12 rounded-xl border border-border py-2 text-center hover:border-fg-tertiary hover:text-fg-secondary">'),Ge=t=>`https://github.com/nostr-protocol/nips/blob/master/${t.toString(10).padStart(2,"0")}.md`,Ve=t=>{const n=j(),{relayInfo:s}=le(()=>({relayUrl:t.relayUrl})),[p,g]=R(!1),a=()=>g(i=>!i),{showProfile:l}=te();return o(ne,{get onClose(){return t.onClose},get children(){const i=Ae(),c=i.firstChild,u=c.firstChild,m=u.firstChild,h=m.nextSibling,d=c.nextSibling,b=d.firstChild,_=b.firstChild,y=b.nextSibling,w=y.firstChild,x=d.nextSibling,S=x.firstChild,P=S.firstChild,z=S.nextSibling,q=z.firstChild,M=x.nextSibling,F=M.firstChild;return r(c,o(k,{get when(){return s()?.icon},keyed:!0,children:v=>(()=>{const $=Ke(),E=$.firstChild;return U(E,"src",v),$})()}),u),r(m,()=>s()?.name??t.relayUrl),r(h,()=>t.relayUrl),r(i,o(k,{get when(){return s()?.description},keyed:!0,get children(){const v=Be();return r(v,()=>s()?.description),v}}),d),r(_,()=>n.t("relayInfo.administrator")),r(b,o(k,{get when(){return s()?.pubkey},get fallback(){return(()=>{const v=D();return r(v,()=>n.t("relayInfo.unknown")),v})()},keyed:!0,children:v=>(()=>{const $=Je(),E=$.firstChild;return E.$$click=()=>l(v),r(E,o(ee,{pubkey:v})),$})()}),null),r(w,()=>n.t("relayInfo.contact")),r(y,o(k,{get when(){return s()?.contact},get fallback(){return(()=>{const v=D();return r(v,()=>n.t("relayInfo.unknown")),v})()},keyed:!0,children:v=>(()=>{const $=J();return r($,o(A,{class:"underline",href:v,children:v})),$})()}),null),r(P,()=>n.t("relayInfo.software")),r(S,o(k,{get when(){return s()?.software},get fallback(){return(()=>{const v=D();return r(v,()=>n.t("relayInfo.unknown")),v})()},keyed:!0,children:v=>(()=>{const $=J();return r($,o(k,{get when(){return ke(v)},fallback:v,keyed:!0,children:E=>o(A,{class:"underline",href:E})})),$})()}),null),r(q,()=>n.t("relayInfo.version")),r(z,o(k,{get when(){return s()?.version},get fallback(){return(()=>{const v=D();return r(v,()=>n.t("relayInfo.unknown")),v})()},keyed:!0,children:v=>(()=>{const $=J();return r($,v),$})()}),null),r(i,o(k,{get when(){return s()?.supported_nips},keyed:!0,children:v=>(()=>{const $=He(),E=$.firstChild,B=E.nextSibling;return r(E,()=>n.t("relayInfo.supportedNips")),r(B,o(T,{each:v,children:G=>o(A,{get href(){return Ge(G)},get children(){const V=Xe();return r(V,G),V}})})),$})()}),M),F.$$click=a,r(F,()=>n.t("relayInfo.showJSON")),r(M,o(k,{get when(){return p()},get children(){const v=De();return r(v,()=>JSON.stringify(s(),null,2)),v}}),null),i}})};Z(["click"]);const Q=e.string().length(64).regex(/^[0-9a-f]{64}$/),X=e.string().regex(/^\w+$/),Qe=e.object({shortcode:X,url:e.string().url(),keywords:e.optional(e.array(X))}),Ye=e.object({manifest:e.literal("emojipack_v1"),name:e.string(),emojis:e.array(Qe),description:e.optional(e.string()),author:e.optional(Q),publisher:e.optional(Q)}).refine(t=>be(t.emojis,s=>s.shortcode).length===t.emojis.length,{message:"shortcodes should be unique"}),oe=e.record(X,e.string().url());Ye.or(oe);const Ze=t=>Object.entries(t).map(([n,s])=>({shortcode:n,url:s})),We=f('<div class="border-t border-border p-2">'),et=f('<div class="mb-2 rounded border border-border shadow hover:shadow-md"><h3 class="text-lg font-bold"><button type=button class="flex w-full items-center p-2 text-start"><span class="flex-1 hover:text-fg-secondary"></span><span class="inline-block size-4 shrink-0 text-fg">'),tt=f('<button class="flex h-[24px] w-[48px] items-center rounded-full border border-primary/80 px-1"><span class="m-[-3px] inline-block size-5 rounded-full border bg-primary-fg shadow">'),ie=f('<div class="flex gap-2 py-1"><button class="rounded border border-primary px-4 py-1 font-bold text-primary"></button><button class="rounded border border-primary px-4 py-1 font-bold text-primary">'),nt=f("<input type=file hidden name=config accept=application/json>"),rt=f("<p class=py-1>"),lt=f('<form class="flex gap-2"><input class="flex-1 rounded-md border border-border bg-bg ring-border placeholder:text-fg-secondary focus:border-border focus:ring-primary"type=text name=relayUrl placeholder=wss://...><button type=submit class="rounded bg-primary p-2 font-bold text-primary-fg">'),ot=f('<ul class="mt-2 divide-y divide-border rounded border border-border">'),it=f('<button type=button class="rounded bg-primary p-2 font-bold text-primary-fg">'),st=f('<li class=flex><button class="flex flex-1 items-center truncate rounded py-1 text-start hover:bg-bg-tertiary"><div class="shrink-0 px-2"><span class="inline-block size-2 rounded-full"aria-label=""></span></div><div class="min-w-0 flex-1"><div class=truncate></div><div class="truncate text-xs text-fg-secondary"></div></div></button><button class="align-center flex shrink-0 items-center justify-center pe-6 ps-4"><span class=size-3>'),at=f('<div class="scrollbar flex flex-col overflow-y-auto rounded-md border border-border">'),ct=f('<button type=button class="border-t border-border px-2 py-1 text-left first:border-none">'),dt=f('<div class="flex flex-col justify-evenly gap-2 sm:flex-row">'),ut=f('<div class="flex flex-1 flex-row items-center gap-1 sm:flex-col"><button type=button class="w-48 rounded border border-primary p-2 font-bold sm:w-full"></button><div class=text-xs>'),ft=f('<div class="flex flex-col justify-evenly gap-2"><div class="flex w-full"><div class=flex-1></div></div><div class="flex w-full"><div class=flex-1>'),gt=f('<form class="flex flex-col gap-2"><label class="flex flex-1 items-center gap-1"><div class=w-9></div><input class="flex-1 rounded-md border-border bg-bg placeholder:text-fg-secondary focus:border-border focus:ring-primary"type=text name=shortcode placeholder=smiley pattern=^\\w+$ required></label><label class="flex flex-1 items-center gap-1"><div class=w-9></div><input class="flex-1 rounded-md border-border bg-bg placeholder:text-fg-secondary focus:border-border focus:ring-primary"type=text name=url placeholder=https://example.com/smiley.png required></label><button type=submit class="w-24 self-end rounded bg-primary p-2 font-bold text-primary-fg">'),mt=f('<ul class="mt-4 flex max-h-[40vh] min-h-64 flex-wrap overflow-y-auto border-t border-border">'),pt=f('<div class="flex min-w-24 flex-col items-center rounded border border-border bg-bg shadow"><div class="flex items-center p-1"><img class="h-20 max-w-20 object-contain"></div><div class="p-1 text-center text-sm"></div><div class="w-full border-t border-border"><button type=button class="w-full px-2 py-1 text-danger">'),ht=f('<li class="min-w-0 basis-1/2 sm:basis-1/4"><button type=button class="flex w-full flex-col items-center gap-1 rounded p-2 hover:bg-bg-tertiary/20 hover:shadow"><div class="w-full truncate text-xs text-fg-secondary">'),bt=f("<div class=size-8>"),vt=f('<div class="flex h-8 max-w-8 items-center"><img class=object-contain>'),se=f("<p>"),$t=f('<form class="flex flex-col gap-2"><textarea class="flex-1 rounded-md border-border bg-bg placeholder:text-fg-secondary focus:border-border focus:ring-primary"name=json placeholder="{ &quot;smiley&quot;: &quot;https://example.com/smiley.png&quot; }"></textarea><button type=submit class="w-24 self-end rounded bg-primary p-2 font-bold text-primary-fg">'),yt=f('<ul class="flex max-h-[50vh] min-h-64 flex-col overflow-y-auto">'),_t=f('<form class="flex gap-2"><input class="flex-1 rounded-md border border-border bg-bg ring-border focus:border-border focus:ring-primary"type=text name=keyword><button type=submit class="rounded bg-primary p-2 font-bold text-primary-fg">'),xt=f('<ul class="mt-2 flex max-h-[50vh] min-h-64 flex-col overflow-y-auto border-t border-border">'),Y=f('<li class="flex items-center border-b border-border pr-4"><div class="flex-1 truncate"></div><button class="size-3 shrink-0">'),wt=f("<div class=h-4>"),kt=f('<div class="flex flex-col justify-evenly gap-2"><div class="flex w-full"><div class=flex-1>YouTube</div></div><div class="flex w-full"><div class=flex-1>X (Twitter)</div></div><div class="flex w-full"><div class=flex-1>OGP'),Ct=f('<div class="flex flex-col justify-evenly gap-2"><div class="flex w-full"><div class=flex-1></div></div><div class="flex w-full"><div class=flex-1></div></div><div class="flex w-full"><div class=flex-1>'),jt=f("<div class=p-4>"),St=f('<h2 class="flex-1 text-center text-lg font-bold">'),Et=f('<ul class="flex flex-col">'),It=f('<li class=w-full><button class="flex w-full gap-2 py-3 hover:text-primary"><span class="inline-block size-6">'),Rt=f('<div class="flex flex-col"><div><button class="pr-4 text-fg hover:text-fg-secondary"><span class="inline-block size-6"></span></button></div><div class="w-full flex-1 pt-4">'),ae=t=>`^(?:${t})://[-a-zA-Z0-9.]+(:\\d{1,5})?(?:/[-[\\]~!$&'()*+.,:;@&=%\\w]+|/)*(?:\\?[-[\\]~!$&'()*+.,/:;%@&=\\w?]+)?(?:#[-[\\]~!$&'()*+.,/:;%@\\w&=?#]+)?$`,Lt=ae("https?"),Ut=ae("wss?"),C=t=>{const[n,s]=R(t.initialOpened??!0),p=()=>s(g=>!g);return(()=>{const g=et(),a=g.firstChild,l=a.firstChild,i=l.firstChild,c=i.nextSibling;return l.$$click=()=>p(),r(i,()=>t.title),r(c,o(k,{get when(){return n()},get fallback(){return o(je,{})},get children(){return o(Ee,{})}})),r(g,o(k,{get when(){return n()},get children(){const u=We();return r(u,()=>t.children),u}}),null),g})()},O=t=>(()=>{const n=tt();return n.$$click=s=>t.onClick(s),L(s=>{const p=!t.value,g=!t.value,a=!!t.value,l=!!t.value,i=t.value;return p!==s._v$&&n.classList.toggle("bg-bg-tertiary",s._v$=p),g!==s._v$2&&n.classList.toggle("justify-start",s._v$2=g),a!==s._v$3&&n.classList.toggle("bg-primary",s._v$3=a),l!==s._v$4&&n.classList.toggle("justify-end",s._v$4=l),i!==s._v$5&&U(n,"area-label",s._v$5=i),s},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})(),Ot=()=>{const t=j(),n=ye(),{showProfile:s,showProfileEdit:p}=te();return o(C,{get title(){return t.t("config.account.profile")},get children(){const g=ie(),a=g.firstChild,l=a.nextSibling;return a.$$click=()=>_e([n()])(([i])=>{s(i)}),r(a,()=>t.t("config.account.openProfile")),l.$$click=()=>p(),r(l,()=>t.t("config.account.editProfile")),g}})},Tt=()=>{let t;const n=j(),s=I(),p=()=>{const i=JSON.stringify(s.config(),null,2),c=new Blob([i],{type:"application/json"}),u=URL.createObjectURL(c),m=new Date().toISOString(),h=document.createElement("a");h.href=u,h.download=`rabbit-${m}.json`,h.click()},g=()=>{t?.click()},a=async i=>{try{const c=await i.text(),u=pe.parse(JSON.parse(c));s.setConfig(u),window.alert(n.t("config.account.restored")),window.location.reload()}catch(c){c instanceof Error?window.alert(`${n.t("config.account.failedToRestore")}: ${c.message}`):window.alert(n.t("config.account.failedToRestore"))}},l=i=>{i.preventDefault();const c=[...i.currentTarget.files??[]];if(c.length!==1)return;const u=c[0];a(u).catch(m=>console.log(m))};return o(C,{get title(){return n.t("config.account.backupConfig")},get children(){return[(()=>{const i=ie(),c=i.firstChild,u=c.nextSibling;return c.$$click=p,r(c,()=>n.t("config.account.save")),u.$$click=g,r(u,()=>n.t("config.account.restore")),i})(),(()=>{const i=nt();i.addEventListener("change",l);const c=t;return typeof c=="function"?W(c,i):t=i,i.multiple=!1,i})()]}})},Mt=()=>{const t=j(),{config:n,addRelay:s,removeRelay:p}=I(),g=we(),[a,l]=R(""),[i,c]=R(null),u=()=>c(null),m=d=>{d.preventDefault(),a().length!==0&&(s(a()),l(""))},h=async()=>{if(window.nostr==null)return;const d=Object.entries(await window.nostr?.getRelays?.()??[]),b=d.map(([x])=>x).join(`
`);if(d.length===0){window.alert(t.t("config.relays.notConfigured"));return}if(!window.confirm(`${t.t("config.relays.askImport")}

${b}`))return;const _=n().relayUrls.length;me(()=>{d.forEach(([x])=>{s(x)})});const w=n().relayUrls.length-_;window.alert(t.t("config.relays.imported",{count:w}))};return[o(C,{get title(){return t.t("config.relays.relays")},get children(){return[(()=>{const d=rt();return r(d,()=>t.t("config.relays.numOfRelays",{count:n().relayUrls.length})),d})(),(()=>{const d=lt(),b=d.firstChild,_=b.nextSibling;return d.addEventListener("submit",m),b.addEventListener("change",y=>l(y.currentTarget.value)),U(b,"pattern",Ut),r(_,()=>t.t("config.relays.addRelay")),L(()=>b.value=a()),d})(),(()=>{const d=ot();return r(d,o(T,{get each(){return n().relayUrls},children:b=>{const{relayInfo:_}=le(()=>({relayUrl:b})),y=()=>g().getRelay(b)?.connected??!1;return(()=>{const w=st(),x=w.firstChild,S=x.firstChild,P=S.firstChild,z=S.nextSibling,q=z.firstChild,M=q.nextSibling,F=x.nextSibling,v=F.firstChild;return x.$$click=()=>c({type:"RelayInfo",relayUrl:b}),r(q,()=>_()?.name??b),r(M,b),F.$$click=()=>p(b),r(v,o(H,{})),L($=>{const E=!y(),B=!!y();return E!==$._v$6&&P.classList.toggle("bg-rose-500",$._v$6=E),B!==$._v$7&&P.classList.toggle("bg-green-500",$._v$7=B),$},{_v$6:void 0,_v$7:void 0}),w})()}})),d})()]}}),o(C,{get title(){return t.t("config.relays.importRelays")},get children(){const d=it();return d.$$click=()=>{h().catch(b=>{console.error("failed to import relays",b),window.alert(t.t("config.relays.failedToImport"))})},r(d,()=>t.t("config.relays.importFromExtension")),d}}),o(k,{get when(){return i()},keyed:!0,children:d=>o(k,{get when(){return d.type==="RelayInfo"},get children(){return o(Ve,{get relayUrl(){return d.relayUrl},onClose:()=>u()})}})})]},Ft=()=>{const t=j(),{config:n,setConfig:s}=I(),p=a=>{const l=n().colorTheme;return l.type==="specific"?l.id===a:!1},g=a=>{s(l=>({...l,colorTheme:{type:"specific",id:a}}))};return o(C,{get title(){return t.t("config.display.colorTheme")},get children(){const a=at();return r(a,o(T,{get each(){return Object.values(ge)},children:l=>(()=>{const i=ct();return i.$$click=()=>g(l.id),r(i,()=>l.name),L(c=>{const u=!!p(l.id),m=!!p(l.id),h=!p(l.id);return u!==c._v$8&&i.classList.toggle("bg-primary",c._v$8=u),m!==c._v$9&&i.classList.toggle("text-primary-fg",c._v$9=m),h!==c._v$10&&i.classList.toggle("text-fg",c._v$10=h),c},{_v$8:void 0,_v$9:void 0,_v$10:void 0}),i})()})),a}})},Nt=()=>{const t=j(),{config:n,setConfig:s}=I(),p=[{id:"relative",name:t.t("config.display.relativeTimeNotation"),example:t.t("config.display.relativeTimeNotationExample")},{id:"absolute-short",name:t.t("config.display.absoluteTimeNotationShort"),example:t.t("config.display.absoluteTimeNotationShortExample")},{id:"absolute-long",name:t.t("config.display.absoluteTimeNotationLong"),example:t.t("config.display.absoluteTimeNotationLongExample")}],g=a=>{s(l=>({...l,dateFormat:a}))};return o(C,{get title(){return t.t("config.display.timeNotation")},get children(){const a=dt();return r(a,o(T,{each:p,children:({id:l,name:i,example:c})=>(()=>{const u=ut(),m=u.firstChild,h=m.nextSibling;return m.$$click=()=>g(l),r(m,i),r(h,c),L(d=>{const b=n().dateFormat===l,_=n().dateFormat===l,y=n().dateFormat!==l,w=n().dateFormat!==l;return b!==d._v$11&&m.classList.toggle("bg-primary",d._v$11=b),_!==d._v$12&&m.classList.toggle("text-primary-fg",d._v$12=_),y!==d._v$13&&m.classList.toggle("bg-bg",d._v$13=y),w!==d._v$14&&m.classList.toggle("text-primary",d._v$14=w),d},{_v$11:void 0,_v$12:void 0,_v$13:void 0,_v$14:void 0}),u})()})),a}})},Pt=()=>{const t=j(),{config:n,setConfig:s}=I(),p=()=>{s(a=>({...a,useEmojiReaction:!(a.useEmojiReaction??!1)}))},g=()=>{s(a=>({...a,showEmojiReaction:!(a.showEmojiReaction??!1)}))};return o(C,{get title(){return t.t("config.display.reaction")},get children(){const a=ft(),l=a.firstChild,i=l.firstChild,c=l.nextSibling,u=c.firstChild;return r(i,()=>t.t("config.display.enableEmojiReaction")),r(l,o(O,{get value(){return n().useEmojiReaction},onClick:()=>p()}),null),r(u,()=>t.t("config.display.showEmojiReaction")),r(c,o(O,{get value(){return n().showEmojiReaction},onClick:()=>g()}),null),a}})},zt=()=>{const t=j(),{config:n,saveEmoji:s,removeEmoji:p}=I(),[g,a]=R(""),[l,i]=R(""),c=u=>{u.preventDefault(),!(g().length===0||l().length===0)&&(s({shortcode:g(),url:l()}),a(""),i(""))};return o(C,{get title(){return t.t("config.customEmoji.customEmoji")},get children(){return[(()=>{const u=gt(),m=u.firstChild,h=m.firstChild,d=h.nextSibling,b=m.nextSibling,_=b.firstChild,y=_.nextSibling,w=b.nextSibling;return u.addEventListener("submit",c),r(h,()=>t.t("config.customEmoji.shortcode")),d.addEventListener("change",x=>a(x.currentTarget.value)),r(_,()=>t.t("config.customEmoji.url")),y.addEventListener("change",x=>i(x.currentTarget.value)),U(y,"pattern",Lt),r(w,()=>t.t("config.customEmoji.addEmoji")),L(()=>d.value=g()),L(()=>y.value=l()),u})(),(()=>{const u=mt();return r(u,o(T,{get each(){return Object.values(n().customEmojis)},children:({shortcode:m,url:h})=>{const d=xe(()=>({popup:(()=>{const b=pt(),_=b.firstChild,y=_.firstChild,w=_.nextSibling,x=w.nextSibling,S=x.firstChild;return U(y,"src",h),U(y,"alt",m),r(w,m),S.$$click=()=>p(m),r(S,()=>t.t("config.customEmoji.removeEmoji")),b})()}));return(()=>{const b=ht(),_=b.firstChild,y=_.firstChild,w=d.targetRef;return typeof w=="function"?W(w,b):d.targetRef=b,_.$$click=()=>d.open(),r(_,o(re,{get fallback(){return bt()},children:()=>(()=>{const x=vt(),S=x.firstChild;return U(S,"src",h),U(S,"alt",m),x})()}),y),r(y,m),r(b,()=>d.popup(),null),b})()}})),u})()]}})},qt=()=>{const t=j(),{saveEmojis:n}=I(),[s,p]=R(""),g=a=>{if(a.preventDefault(),s().length!==0)try{const l=oe.parse(JSON.parse(s())),i=Ze(l);n(i),p("")}catch(l){const i=l instanceof Error?`:${l.message}`:"";window.alert(`JSONの読み込みに失敗しました${i}`)}};return o(C,{get title(){return t.t("config.customEmoji.emojiImport")},get children(){return[(()=>{const a=se();return r(a,()=>t.t("config.customEmoji.emojiImportDescription")),a})(),(()=>{const a=$t(),l=a.firstChild,i=l.nextSibling;return a.addEventListener("submit",g),l.addEventListener("change",c=>p(c.currentTarget.value)),r(i,()=>t.t("config.customEmoji.importEmoji")),L(()=>l.value=s()),a})()]}})},Bt=()=>{const t=j(),{config:n,removeMutedPubkey:s,addMutedKeyword:p,removeMutedKeyword:g}=I(),[a,l]=R(""),i=c=>{c.preventDefault(),a().length!==0&&(p(a()),l(""))};return[o(C,{get title(){return t.t("config.mute.mutedUsers")},initialOpened:!1,get children(){const c=yt();return r(c,o(T,{get each(){return n().mutedPubkeys},children:u=>(()=>{const m=Y(),h=m.firstChild,d=h.nextSibling;return r(h,o(re,{get fallback(){return wt()},children:()=>o(ee,{pubkey:u})})),d.$$click=()=>s(u),r(d,o(H,{})),m})()})),c}}),o(C,{get title(){return t.t("config.mute.mutedKeywords")},initialOpened:!1,get children(){return[(()=>{const c=_t(),u=c.firstChild,m=u.nextSibling;return c.addEventListener("submit",i),u.addEventListener("change",h=>l(h.currentTarget.value)),r(m,()=>t.t("config.mute.add")),L(()=>u.value=a()),c})(),(()=>{const c=xt();return r(c,o(T,{get each(){return n().mutedKeywords},children:u=>(()=>{const m=Y(),h=m.firstChild,d=h.nextSibling;return r(h,u),d.$$click=()=>g(u),r(d,o(H,{})),m})()})),c})()]}})]},Dt=()=>{const t=j(),{config:n,setConfig:s}=I(),p=g=>{s(a=>({...a,embedding:{...a.embedding,[g]:!a.embedding[g]}}))};return o(C,{get title(){return t.t("config.display.embedding")},get children(){return[(()=>{const g=se();return r(g,()=>t.t("config.display.embeddingDescription")),g})(),(()=>{const g=kt(),a=g.firstChild;a.firstChild;const l=a.nextSibling;l.firstChild;const i=l.nextSibling;return i.firstChild,r(a,o(O,{get value(){return n().embedding.youtube},onClick:()=>p("youtube")}),null),r(l,o(O,{get value(){return n().embedding.twitter},onClick:()=>p("twitter")}),null),r(i,o(O,{get value(){return n().embedding.ogp},onClick:()=>p("ogp")}),null),g})()]}})},At=()=>{const t=j(),{config:n,setConfig:s}=I(),p=()=>{s(l=>({...l,keepOpenPostForm:!(l.keepOpenPostForm??!1)}))},g=()=>{s(l=>({...l,showMedia:!(l.showMedia??!0)}))},a=()=>{s(l=>({...l,hideCount:!(l.hideCount??!1)}))};return o(C,{get title(){return t.t("config.display.others")},get children(){const l=Ct(),i=l.firstChild,c=i.firstChild,u=i.nextSibling,m=u.firstChild,h=u.nextSibling,d=h.firstChild;return r(c,()=>t.t("config.display.keepOpenPostForm")),r(i,o(O,{get value(){return n().keepOpenPostForm},onClick:()=>p()}),null),r(m,()=>t.t("config.display.showMediaByDefault")),r(u,o(O,{get value(){return n().showMedia},onClick:()=>g()}),null),r(d,()=>t.t("config.display.hideNumbers")),r(h,o(O,{get value(){return n().hideCount},onClick:()=>a()}),null),l}})},Zt=t=>{const n=j(),[s,p]=R(null),g=[{name:()=>n.t("config.account.profile"),icon:()=>o(ve,{}),render:()=>[o(Ot,{}),o(Tt,{})]},{name:()=>n.t("config.relays.relays"),icon:()=>o(Te,{}),render:()=>o(Mt,{})},{name:()=>n.t("config.display.display"),icon:()=>o(Ue,{}),render:()=>[o(Ft,{}),o(Nt,{}),o(Pt,{}),o(Dt,{}),o(At,{})]},{name:()=>n.t("config.customEmoji.customEmoji"),icon:()=>o($e,{}),render:()=>[o(zt,{}),o(qt,{})]},{name:()=>n.t("config.mute.mute"),icon:()=>o(Re,{}),render:()=>o(Bt,{})}],a=()=>{const l=s();return l==null?null:g[l]};return o(ne,{get onClose(){return t.onClose},get children(){const l=jt();return r(l,o(k,{get when(){return a()},get fallback(){return[(()=>{const i=St();return r(i,()=>n.t("config.config")),i})(),(()=>{const i=Et();return r(i,o(T,{each:g,children:(c,u)=>(()=>{const m=It(),h=m.firstChild,d=h.firstChild;return h.$$click=()=>p(u),r(d,()=>c.icon()),r(h,()=>c.name(),null),m})()})),i})()]},keyed:!0,children:i=>(()=>{const c=Rt(),u=c.firstChild,m=u.firstChild,h=m.firstChild,d=u.nextSibling;return m.$$click=()=>p(null),r(h,o(he,{})),r(d,()=>i.render()),c})()})),l}})};Z(["click"]);export{Zt as default};
//# sourceMappingURL=Config-g-dxKK8n.js.map
