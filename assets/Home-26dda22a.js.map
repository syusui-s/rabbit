{"version":3,"file":"Home-26dda22a.js","sources":["../../node_modules/heroicons/24/outline/bookmark.svg","../../node_modules/heroicons/24/outline/ellipsis-vertical.svg","../../src/components/column/BasicColumnHeader.tsx","../../src/components/timeline/TimelineContentDisplay.tsx","../../src/components/column/Column.tsx","../../node_modules/heroicons/24/outline/chevron-left.svg","../../node_modules/heroicons/24/outline/chevron-right.svg","../../node_modules/heroicons/24/outline/trash.svg","../../src/components/column/ColumnSettings.tsx","../../src/nostr/event/Tags.ts","../../src/nostr/useDecrypt.ts","../../src/components/timeline/Bookmark.tsx","../../src/nostr/useParameterizedReplaceableEvent.ts","../../src/components/column/BookmarkColumn.tsx","../../src/hooks/useScroll.ts","../../src/components/column/LoadMore.tsx","../../src/core/contentFilter.ts","../../src/components/column/FollwingColumn.tsx","../../src/components/event/Reaction.tsx","../../node_modules/heroicons/24/solid/bolt.svg","../../src/components/event/ZapReceipt.tsx","../../src/components/timeline/Notification.tsx","../../src/components/column/NotificationColumn.tsx","../../src/components/column/PostsColumn.tsx","../../src/components/column/ReactionsColumn.tsx","../../src/components/column/RelaysColumn.tsx","../../src/components/column/SearchColumn.tsx","../../src/components/column/Columns.tsx","../../src/hooks/useShortcutKeys.ts","../../src/pages/Home.tsx"],"sourcesContent":["export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5m0 6a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5m0 6a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5\"/></svg>","import { Component, JSX, Show, createSignal } from 'solid-js';\n\nimport EllipsisVertical from 'heroicons/24/outline/ellipsis-vertical.svg';\n\nexport type BasicColumnHeaderProps = {\n  name: string;\n  icon?: JSX.Element;\n  settings: () => JSX.Element;\n  onClose?: () => void;\n};\n\nconst BasicColumnHeader: Component<BasicColumnHeaderProps> = (props) => {\n  const [isSettingsOpened, setIsSettingOpened] = createSignal(false);\n\n  const toggleSettingsOpened = () => setIsSettingOpened((current) => !current);\n\n  return (\n    <div class=\"flex flex-col\">\n      <div class=\"flex h-8 items-center gap-1\">\n        <h2 class=\"flex min-w-0 flex-1 items-center gap-1 ps-2\">\n          <Show when={props.icon} keyed>\n            {(icon) => <span class=\"inline-block h-4 w-4 shrink-0 text-fg-secondary\">{icon}</span>}\n          </Show>\n          <span class=\"truncate\">{props.name}</span>\n        </h2>\n        <button class=\"flex h-full place-items-center px-2\" onClick={() => toggleSettingsOpened()}>\n          <span class=\"inline-block h-4 w-4\">\n            <EllipsisVertical />\n          </span>\n        </button>\n      </div>\n      <Show when={isSettingsOpened()}>{props.settings()}</Show>\n    </div>\n  );\n};\n\nexport default BasicColumnHeader;\n","import { Switch, Match, type Component } from 'solid-js';\n\nimport uniq from 'lodash/uniq';\nimport { type Filter } from 'nostr-tools/filter';\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport Timeline from '@/components/timeline/Timeline';\nimport { type TimelineContent } from '@/components/timeline/TimelineContext';\nimport useConfig from '@/core/useConfig';\nimport { textNote } from '@/nostr/event';\nimport TextNote from '@/nostr/event/TextNote';\nimport useSubscription from '@/nostr/useSubscription';\n\nconst relatedEvents = (event: TextNote) => {\n  const ids = [event.id];\n\n  const rootId = event.rootEvent()?.id;\n  if (rootId != null) ids.push(rootId);\n\n  const replyId = event.replyingToEvent()?.id;\n  if (replyId != null) ids.push(replyId);\n\n  return uniq(ids);\n};\n\nconst RepliesDisplay: Component<{ event: NostrEvent }> = (props) => {\n  const { config } = useConfig();\n\n  const event = () => textNote(props.event);\n\n  const { events } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [\n      { kinds: [1], ids: relatedEvents(event()), limit: 25 },\n      { kinds: [1], '#e': [props.event.id], limit: 25 } as Filter,\n    ],\n    limit: 200,\n  }));\n\n  return <Timeline events={[...events()].reverse()} />;\n};\n\nconst TimelineContentDisplay: Component<{ timelineContent: TimelineContent }> = (props) => (\n  <Switch>\n    <Match when={props.timelineContent.type === 'Replies' && props.timelineContent} keyed>\n      {(replies) => <RepliesDisplay event={replies.event} />}\n    </Match>\n  </Switch>\n);\n\nexport default TimelineContentDisplay;\n","import { Show, type JSX, type Component } from 'solid-js';\n\nimport ArrowLeft from 'heroicons/24/outline/arrow-left.svg';\n\nimport TimelineContentDisplay from '@/components/timeline/TimelineContentDisplay';\nimport { TimelineContext, useTimelineState } from '@/components/timeline/TimelineContext';\nimport { useHandleCommand } from '@/hooks/useCommandBus';\nimport { useTranslation } from '@/i18n/useTranslation';\n\nexport type ColumnProps = {\n  timelineRef?: (el: HTMLDivElement) => void;\n  columnIndex: number;\n  lastColumn: boolean;\n  width: 'widest' | 'wide' | 'medium' | 'narrow' | null | undefined;\n  header: JSX.Element;\n  children: JSX.Element;\n};\n\nconst Column: Component<ColumnProps> = (props) => {\n  let columnDivRef: HTMLDivElement | undefined;\n\n  const timelineState = useTimelineState();\n  const i18n = useTranslation();\n\n  const width = () => props.width ?? 'medium';\n\n  useHandleCommand(() => ({\n    commandType: 'moveToColumn',\n    handler: (command) => {\n      if (command.command === 'moveToColumn' && command.columnIndex === props.columnIndex) {\n        columnDivRef?.scrollIntoView({ behavior: 'smooth', inline: 'center' });\n      }\n    },\n  }));\n\n  useHandleCommand(() => ({\n    commandType: 'moveToLastColumn',\n    handler: () => {\n      if (props.lastColumn) {\n        columnDivRef?.scrollIntoView({ behavior: 'smooth' });\n      }\n    },\n  }));\n\n  return (\n    <TimelineContext.Provider value={timelineState}>\n      <div\n        ref={columnDivRef}\n        class=\"flex w-[80vw] shrink-0 snap-center snap-always flex-col border-r border-border sm:snap-align-none\"\n        classList={{\n          'sm:w-[500px]': width() === 'widest',\n          'sm:w-[360px]': width() === 'wide',\n          'sm:w-[320px]': width() === 'medium',\n          'sm:w-[280px]': width() === 'narrow',\n        }}\n      >\n        <Show\n          when={timelineState.timelineState.content}\n          keyed\n          fallback={\n            <>\n              <div class=\"shrink-0 border-b border-border\">{props.header}</div>\n              <div ref={props.timelineRef} class=\"scrollbar flex flex-col overflow-y-scroll pb-16\">\n                {props.children}\n              </div>\n            </>\n          }\n        >\n          {(timeline) => (\n            <>\n              <div class=\"flex shrink-0 items-center border-b border-border px-2\">\n                <button\n                  class=\"flex w-full items-center gap-1\"\n                  onClick={() => timelineState?.clearTimeline()}\n                >\n                  <div class=\"inline-block h-4 w-4\">\n                    <ArrowLeft />\n                  </div>\n                  <div>{i18n()('column.back')}</div>\n                </button>\n              </div>\n              <div class=\"scrollbar flex max-h-full flex-col overflow-y-scroll scroll-smooth pb-16\">\n                <TimelineContentDisplay timelineContent={timeline} />\n              </div>\n            </>\n          )}\n        </Show>\n      </div>\n    </TimelineContext.Provider>\n  );\n};\n\nexport default Column;\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.75 19.5 8.25 12l7.5-7.5\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m8.25 4.5 7.5 7.5-7.5 7.5\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"/></svg>","import { Component, JSX, For } from 'solid-js';\n\nimport ChevronLeft from 'heroicons/24/outline/chevron-left.svg';\nimport ChevronRight from 'heroicons/24/outline/chevron-right.svg';\nimport Trash from 'heroicons/24/outline/trash.svg';\n\nimport { ColumnType } from '@/core/column';\nimport useConfig from '@/core/useConfig';\nimport { useRequestCommand } from '@/hooks/useCommandBus';\nimport { useTranslation } from '@/i18n/useTranslation';\n\ntype ColumnSettingsProps = {\n  column: ColumnType;\n  columnIndex: number;\n};\n\ntype ColumnSettingsSectionProps = {\n  title: string;\n  children: JSX.Element;\n};\n\nconst ColumnSettingsSection: Component<ColumnSettingsSectionProps> = (props) => (\n  <div class=\"flex flex-col gap-2 border-b border-border p-2\">\n    <div>{props.title}</div>\n    <div>{props.children}</div>\n  </div>\n);\n\nconst ColumnSettings: Component<ColumnSettingsProps> = (props) => {\n  const i18n = useTranslation();\n  const { saveColumn, removeColumn, moveColumn } = useConfig();\n  const request = useRequestCommand();\n\n  const setColumnWidth = (width: ColumnType['width']) => {\n    saveColumn({ ...props.column, width });\n  };\n\n  const move = (index: number) => {\n    moveColumn(props.column.id, index);\n    request({ command: 'moveToColumn', columnIndex: index }).catch((err) => console.error(err));\n  };\n\n  return (\n    <div class=\"flex flex-col border-t border-border\">\n      <ColumnSettingsSection title={i18n()('column.config.columnWidth')}>\n        <div class=\"scrollbar flex h-9 gap-2 overflow-x-scroll\">\n          <For each={['widest', 'wide', 'medium', 'narrow'] as const}>\n            {(width) => (\n              <button\n                class=\"rounded-md border px-4 text-fg-secondary\"\n                classList={{\n                  'border-fg-secondary': props.column.width === width,\n                  'font-bold': props.column.width === width,\n                  'border-border': props.column.width !== width,\n                  'font-normal': props.column.width !== width,\n                }}\n                onClick={() => setColumnWidth(width)}\n              >\n                {i18n()(`column.config.${width}`)}\n              </button>\n            )}\n          </For>\n        </div>\n      </ColumnSettingsSection>\n      <div class=\"flex h-10 items-center gap-2\">\n        <button\n          class=\"py-4 pl-2\"\n          title={i18n()('column.config.moveLeft')}\n          onClick={() => move(props.columnIndex - 1)}\n        >\n          <span class=\"inline-block h-4 w-4\">\n            <ChevronLeft />\n          </span>\n        </button>\n        <button\n          class=\"py-4 pr-2\"\n          title={i18n()('column.config.moveRight')}\n          onClick={() => move(props.columnIndex + 1)}\n        >\n          <span class=\"inline-block h-4 w-4\">\n            <ChevronRight />\n          </span>\n        </button>\n        <div class=\"flex-1\" />\n        <button\n          class=\"px-2 py-4 text-danger hover:text-rose-600\"\n          title={i18n()('column.config.removeColumn')}\n          onClick={() => removeColumn(props.column.id)}\n        >\n          <span class=\"inline-block h-4 w-4\" aria-label={i18n()('column.config.removeColumn')}>\n            <Trash />\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ColumnSettings;\n","import TagsBase, { TagsSchema } from '@/nostr/event/TagsBase';\n\nexport default class Tags extends TagsBase {\n  constructor(readonly tags: string[][]) {\n    super();\n  }\n}\n\nexport const parseTags = (content: string): Tags => {\n  try {\n    const tags = TagsSchema.parse(JSON.parse(content));\n    return new Tags(tags);\n  } catch (err) {\n    throw new TypeError('failed to parse tags schema: ', { cause: err });\n  }\n};\n","import { createEffect, createRoot, createSignal } from 'solid-js';\n\nimport usePubkey from '@/nostr/usePubkey';\n\ntype UseDecryptProps = {\n  encrypted: string;\n};\n\n// eslint-disable-next-line solid/reactivity\nconst [memo, setMemo] = createRoot(() => createSignal<Record<string, string>>({}));\n// eslint-disable-next-line solid/reactivity\nconst [decrypting, setDecrypting] = createRoot(() => createSignal<Record<string, boolean>>({}));\n\nconst useDecrypt = (propsProvider: () => UseDecryptProps | null) => {\n  const pubkey = usePubkey();\n  const [decrypted, setDecrypted] = createSignal<string | null>(null);\n\n  createEffect(() => {\n    const props = propsProvider();\n    if (props == null) return;\n\n    const { encrypted } = props;\n    if (encrypted in memo()) {\n      setDecrypted(memo()[encrypted]);\n      return;\n    }\n\n    const p = pubkey();\n    if (p == null) return;\n\n    if (decrypting()[encrypted]) {\n      return;\n    }\n\n    setDecrypting((current) => ({ ...current, [encrypted]: true }));\n\n    window.nostr?.nip04\n      ?.decrypt?.(p, encrypted)\n      ?.then((result) => {\n        setMemo((current) => ({ ...current, [encrypted]: result }));\n        setDecrypted(result);\n      })\n      .catch((err) => {\n        console.error(`failed to decrypt \"${encrypted}\"`, err);\n      });\n  });\n\n  return decrypted;\n};\n\nexport default useDecrypt;\n","import { For, type Component, createMemo } from 'solid-js';\n\nimport * as Kind from 'nostr-tools/kinds';\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport ColumnItem from '@/components/ColumnItem';\nimport EventDisplayById from '@/components/event/EventDisplayById';\nimport { genericEvent } from '@/nostr/event';\nimport { parseTags } from '@/nostr/event/Tags';\nimport useDecrypt from '@/nostr/useDecrypt';\n\nexport type BookmarkProps = {\n  event: NostrEvent;\n};\n\nconst Bookmark: Component<BookmarkProps> = (props) => {\n  const bookmark = createMemo(() => genericEvent(props.event));\n\n  const decrypted = useDecrypt(() => {\n    const { content } = bookmark();\n    if (content == null || content.length === 0) return null;\n    return { id: bookmark().id, encrypted: content };\n  });\n\n  const bookmarkedEventIdsPrivate = () => {\n    const json = decrypted();\n    if (json == null) return [];\n    console.log(json);\n\n    try {\n      return parseTags(json).taggedEventIds();\n    } catch (err) {\n      console.warn(err);\n      return [];\n    }\n  };\n\n  const bookmarkedEventIds = () => bookmark().taggedEventIds();\n\n  return (\n    <For each={[...bookmarkedEventIds(), ...bookmarkedEventIdsPrivate()]}>\n      {(eventId) => (\n        <ColumnItem>\n          <EventDisplayById eventId={eventId} ensureKinds={[Kind.ShortTextNote]} />\n        </ColumnItem>\n      )}\n    </For>\n  );\n};\n\nexport default Bookmark;\n","import { createMemo } from 'solid-js';\n\nimport { createQuery, useQueryClient, type CreateQueryResult } from '@tanstack/solid-query';\nimport { Event as NostrEvent } from 'nostr-tools/pure';\n\nimport { pickLatestEvent } from '@/nostr/event/comparator';\nimport {\n  registerTask,\n  BatchedEventsTask,\n  ParameterizedReplaceableEventTask,\n} from '@/nostr/useBatchedEvents';\nimport timeout from '@/utils/timeout';\n\n// Parameterized Replaceable Event\nexport type UseParameterizedReplaceableEventProps = {\n  kind: number;\n  author: string;\n  identifier: string;\n};\n\nexport type UseParameterizedReplaceableEvent = {\n  event: () => NostrEvent | null;\n  query: CreateQueryResult<NostrEvent | null>;\n};\n\nconst useParameterizedReplaceableEvent = (\n  propsProvider: () => UseParameterizedReplaceableEventProps | null,\n): UseParameterizedReplaceableEvent => {\n  const queryClient = useQueryClient();\n  const props = createMemo(propsProvider);\n  const genQueryKey = () => ['useFollowings', props()] as const;\n\n  const query = createQuery(() => ({\n    queryKey: genQueryKey(),\n    queryFn: ({ queryKey, signal }) => {\n      console.debug('useFollowings');\n      const [, currentProps] = queryKey;\n      if (currentProps == null) return Promise.resolve(null);\n\n      const { kind, author, identifier } = currentProps;\n      const task = new BatchedEventsTask<ParameterizedReplaceableEventTask>({\n        type: 'ParameterizedReplaceableEvent',\n        kind,\n        author,\n        identifier,\n      });\n      const promise = task.firstEventPromise().catch(() => {\n        throw new Error(\n          `parameterized replaceable event not found: ${kind}:${author}:${identifier}`,\n        );\n      });\n      task.onUpdate((events) => {\n        const latest = pickLatestEvent(events);\n        queryClient.setQueryData(queryKey, latest);\n      });\n      registerTask({ task, signal });\n      return timeout(\n        15000,\n        `useParameterizedReplaceableEvent: ${kind}:${author}:${identifier}`,\n      )(promise);\n    },\n    staleTime: 5 * 60 * 1000, // 5 min\n    gcTime: 4 * 60 * 60 * 1000, // 4 hour\n  }));\n\n  const event = () => query.data ?? null;\n\n  return { event, query };\n};\n\nexport default useParameterizedReplaceableEvent;\n","import { Component, Show } from 'solid-js';\n\nimport BookmarkIcon from 'heroicons/24/outline/bookmark.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport Bookmark from '@/components/timeline/Bookmark';\nimport { BookmarkColumnType } from '@/core/column';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useParameterizedReplaceableEvent from '@/nostr/useParameterizedReplaceableEvent';\n\ntype BookmarkColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: BookmarkColumnType;\n};\n\nconst BookmarkColumn: Component<BookmarkColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { removeColumn } = useConfig();\n\n  const { event } = useParameterizedReplaceableEvent(() => ({\n    kind: 30001,\n    author: props.column.pubkey,\n    identifier: props.column.identifier,\n  }));\n\n  // TODO 暗号化されたデータがある場合は復号する\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n()('column.bookmark')}\n          icon={<BookmarkIcon />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n    >\n      <Show when={event()} keyed>\n        {(ev) => <Bookmark event={ev} />}\n      </Show>\n    </Column>\n  );\n};\n\nexport default BookmarkColumn;\n","import { createSignal } from 'solid-js';\n\nexport type UseScroll = {\n  targetRef: (el: HTMLElement) => void;\n  currentPosition: () => number;\n  scrollToTop: () => void;\n  scrollToBottom: () => void;\n};\n\nconst useScroll = (): UseScroll => {\n  const [elementRef, setElementRef] = createSignal<HTMLElement | undefined>();\n\n  const scrollToTop = () => {\n    const el = elementRef();\n    if (el == null) return;\n    el.scrollTo(0, 0);\n  };\n\n  const scrollToBottom = () => {\n    const el = elementRef();\n    if (el == null) return;\n    el.scrollTo(0, el.scrollHeight);\n  };\n\n  const currentPosition = () => elementRef()?.scrollTop ?? 0;\n\n  return {\n    targetRef: setElementRef,\n    currentPosition,\n    scrollToTop,\n    scrollToBottom,\n  };\n};\n\nexport default useScroll;\n","import {\n  createSignal,\n  createMemo,\n  batch,\n  Show,\n  type JSX,\n  type Accessor,\n  type Component,\n} from 'solid-js';\n\nimport { type Event as NostrEvent } from 'nostr-tools';\n\nimport ColumnItem from '@/components/ColumnItem';\nimport useScroll from '@/hooks/useScroll';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport { pickOldestEvent } from '@/nostr/event/comparator';\nimport epoch from '@/utils/epoch';\n\nexport type UseLoadMoreProps = {\n  duration: number | null;\n};\n\nexport type UseLoadMore = {\n  timelineRef: (el: HTMLElement) => void;\n  setEvents: (event: NostrEvent[]) => void;\n  since: Accessor<number | undefined>;\n  until: Accessor<number | undefined>;\n  continuous: Accessor<boolean>;\n  loadLatest: () => void;\n  loadOld: () => void;\n};\n\nexport type LoadMoreProps = {\n  loadMore: UseLoadMore;\n  children: JSX.Element;\n  eose: boolean;\n};\n\nexport const useLoadMore = (propsProvider: () => UseLoadMoreProps): UseLoadMore => {\n  const props = createMemo(propsProvider);\n  const calcSince = (base: number): number | undefined => {\n    const { duration } = props();\n    if (duration == null) return undefined;\n    return base - duration;\n  };\n\n  const [events, setEvents] = createSignal<NostrEvent[]>([]);\n  const [since, setSince] = createSignal<number | undefined>(calcSince(epoch()));\n  const [until, setUntil] = createSignal<number | undefined>();\n  const continuous = () => until() == null;\n\n  const scroll = useScroll();\n\n  const loadLatest = () => {\n    batch(() => {\n      setUntil(undefined);\n      setSince(calcSince(epoch()));\n    });\n    scroll.scrollToTop();\n  };\n\n  const loadOld = () => {\n    const oldest = pickOldestEvent(events());\n    if (oldest == null) return;\n    batch(() => {\n      setUntil(oldest.created_at);\n      setSince(calcSince(oldest.created_at));\n    });\n    scroll.scrollToTop();\n  };\n\n  return {\n    timelineRef: scroll.targetRef,\n    setEvents,\n    since,\n    until,\n    continuous,\n    loadLatest,\n    loadOld,\n  };\n};\n\nconst LoadMore: Component<LoadMoreProps> = (props) => {\n  const i18n = useTranslation();\n\n  return (\n    <>\n      <Show when={!props.loadMore.continuous()}>\n        <ColumnItem>\n          <button\n            class=\"flex h-12 w-full flex-col items-center justify-center hover:text-fg-secondary\"\n            onClick={() => props.loadMore.loadLatest()}\n          >\n            <span>{i18n()('column.loadLatest')}</span>\n          </button>\n        </ColumnItem>\n      </Show>\n      {props.children}\n      <ColumnItem>\n        <button\n          class=\"flex h-12 w-full flex-col items-center justify-center hover:text-fg-secondary disabled:text-fg-secondary/30\"\n          disabled={!props.eose}\n          onClick={() => props.loadMore.loadOld()}\n        >\n          <span>{i18n()('column.loadOld')}</span>\n        </button>\n      </ColumnItem>\n    </>\n  );\n};\n\nexport default LoadMore;\n","/**\n * Content filter is a text which expresses the filter.\n *\n * - And condition\n *     - The text \"AND\" (upper case) or white space means an \"and\" condition (&&).\n *     - Examples:\n *         hello AND world\n *         hello world\n * - Or condition\n *     - OR (upper case) means an \"or\" condition (&&).\n *     - Examples:\n *         hello OR world\n * - Grouping\n *     ()\n * - Normal text\n *     Case-insensitive\n *     helloworld,\n * - Double quotes\n *     Case-sensitive\n *     \"Hello World\"\n */\nexport type ContentFilterAnd = { filterType: 'AND'; children: ContentFilter[] };\nexport type ContentFilterOr = { filterType: 'OR'; children: ContentFilter[] };\nexport type ContentFilterNot = { filterType: 'NOT'; child: ContentFilter };\nexport type ContentFilterTextInclude = { filterType: 'Text'; text: string };\nexport type ContentFilterRegex = { filterType: 'Regex'; regex: string; flag: string };\n\nexport type ContentFilter =\n  | ContentFilterAnd\n  | ContentFilterOr\n  | ContentFilterNot\n  | ContentFilterTextInclude\n  | ContentFilterRegex;\n\nexport const applyContentFilter =\n  (filter: ContentFilter) =>\n  (content: string): boolean => {\n    switch (filter.filterType) {\n      case 'AND':\n        return filter.children.every((child) => applyContentFilter(child)(content));\n      case 'OR':\n        return filter.children.some((child) => applyContentFilter(child)(content));\n      case 'NOT':\n        return !applyContentFilter(filter.child)(content);\n      case 'Text':\n        return content.includes(filter.text);\n      case 'Regex':\n        return new RegExp(filter.regex, filter.flag).test(content);\n      default:\n        console.error('unsupported content filter type');\n        break;\n    }\n    return false;\n  };\n","import { Component, createEffect, onCleanup, onMount } from 'solid-js';\n\nimport Home from 'heroicons/24/outline/home.svg';\nimport { uniq } from 'lodash';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { FollowingColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useFollowings from '@/nostr/useFollowings';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype FollowingColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: FollowingColumnType;\n};\n\nconst FollowingColumn: Component<FollowingColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const { followingPubkeys } = useFollowings(() => ({ pubkey: props.column.pubkey }));\n\n  const loadMore = useLoadMore(() => ({\n    duration: 4 * 60 * 60,\n  }));\n\n  const { events, eose } = useSubscription(() => {\n    const authors = uniq([...followingPubkeys()]);\n    if (authors.length === 0) return null;\n    return {\n      debugId: 'following',\n      relayUrls: config().relayUrls,\n      filters: [\n        {\n          kinds: [1, 6],\n          authors,\n          limit: 20,\n          since: loadMore.since(),\n          until: loadMore.until(),\n        },\n      ],\n      eoseLimit: 20,\n      continuous: loadMore.continuous(),\n      onEOSE: () => {\n        console.log('home: eose');\n      },\n      clientEventFilter: (event) => {\n        if (props.column.contentFilter == null) return true;\n        return applyContentFilter(props.column.contentFilter)(event.content);\n      },\n    };\n  });\n\n  createEffect(() => {\n    console.log('home', events());\n    loadMore.setEvents(events());\n  });\n\n  onMount(() => console.log('home timeline mounted'));\n  onCleanup(() => console.log('home timeline unmounted'));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n()('column.home')}\n          icon={<Home />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      timelineRef={loadMore.timelineRef}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default FollowingColumn;\n","import { type Component, Show } from 'solid-js';\n\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport EmojiDisplay from '@/components/EmojiDisplay';\nimport TextNote from '@/components/event/TextNote';\nimport UserDisplayName from '@/components/UserDisplayName';\nimport useConfig from '@/core/useConfig';\nimport useFormatDate from '@/hooks/useFormatDate';\nimport useModalState from '@/hooks/useModalState';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport { reaction } from '@/nostr/event';\nimport useEvent from '@/nostr/useEvent';\nimport useProfile from '@/nostr/useProfile';\nimport ensureNonNull from '@/utils/ensureNonNull';\nimport { thumbnailUrl } from '@/utils/url';\n\ntype ReactionDisplayProps = {\n  event: NostrEvent;\n};\n\nconst ReactionDisplay: Component<ReactionDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const formatDate = useFormatDate();\n  const { shouldMuteEvent } = useConfig();\n  const { showProfile } = useModalState();\n  const event = () => reaction(props.event);\n  const eventId = () => event().lastTaggedEventId();\n\n  const { profile } = useProfile(() => ({\n    pubkey: props.event.pubkey,\n  }));\n\n  const { event: reactedEvent, query: reactedEventQuery } = useEvent(() =>\n    ensureNonNull([eventId()] as const)(([eventIdNonNull]) => ({\n      eventId: eventIdNonNull,\n    })),\n  );\n\n  const isRemoved = () => reactedEventQuery.isSuccess && reactedEvent() == null;\n\n  return (\n    // if the reacted event is not found, it should be a removed event\n    <Show when={!isRemoved() && !shouldMuteEvent(props.event)}>\n      <div class=\"flex items-center gap-1 pl-[2px] text-sm\">\n        <div class=\"notification-icon flex max-w-[64px] place-items-center\">\n          <EmojiDisplay reactionTypes={event().toReactionTypes()} />\n        </div>\n        <div class=\"notification-user flex flex-1 gap-1 overflow-hidden\">\n          <div class=\"author-icon h-5 w-5 shrink-0 overflow-hidden rounded\">\n            <Show when={profile()?.picture} keyed>\n              {(url) => (\n                <img\n                  src={thumbnailUrl(url)}\n                  alt=\"icon\"\n                  // TODO autofit\n                  class=\"h-full w-full object-cover\"\n                />\n              )}\n            </Show>\n          </div>\n          <div class=\"flex min-w-0 flex-1 overflow-hidden\">\n            <button\n              class=\"select-text truncate font-bold hover:text-link hover:underline\"\n              onClick={() => showProfile(props.event.pubkey)}\n            >\n              <UserDisplayName pubkey={props.event.pubkey} />\n            </button>\n            <span class=\"shrink-0\">{i18n()('notification.reacted')}</span>\n          </div>\n        </div>\n        <div class=\"text-xs\">{formatDate(event().createdAtAsDate())}</div>\n      </div>\n      <div class=\"notification-event py-1\">\n        <Show\n          when={reactedEvent()}\n          fallback={\n            <div class=\"truncate\">\n              {i18n()('general.loading')} {eventId()}\n            </div>\n          }\n          keyed\n        >\n          {(ev) => <TextNote event={ev} />}\n        </Show>\n      </div>\n    </Show>\n  );\n};\n\nexport default ReactionDisplay;\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path fill-rule=\"evenodd\" d=\"M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143\" clip-rule=\"evenodd\"/></svg>","import { Component, Show, createMemo } from 'solid-js';\n\nimport { createQuery } from '@tanstack/solid-query';\nimport Bolt from 'heroicons/24/solid/bolt.svg';\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport EventDisplayById from '@/components/event/EventDisplayById';\nimport UserDisplayName from '@/components/UserDisplayName';\nimport useConfig from '@/core/useConfig';\nimport useModalState from '@/hooks/useModalState';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport { zapReceipt } from '@/nostr/event';\nimport useProfile from '@/nostr/useProfile';\nimport { fetchLnurlPayRequestMetadata, getLnurlPayRequestUrl, verifyZapReceipt } from '@/nostr/zap';\nimport ensureNonNull from '@/utils/ensureNonNull';\nimport { formatSiPrefix } from '@/utils/siPrefix';\n\nexport type ZapReceiptProps = {\n  event: NostrEvent;\n};\n\nconst ZapReceipt: Component<ZapReceiptProps> = (props) => {\n  const i18n = useTranslation();\n  const { shouldMuteEvent } = useConfig();\n  const { showProfile } = useModalState();\n\n  const event = createMemo(() => zapReceipt(props.event));\n\n  const { profile: senderProfile } = useProfile(() => ({\n    pubkey: event().senderPubkey(),\n  }));\n\n  const { profile: recipientProfile, query: recipientProfileQuery } = useProfile(() =>\n    ensureNonNull([event().zappedPubkey()])(([pubkey]) => ({\n      pubkey,\n    })),\n  );\n\n  const lnurlQuery = createQuery(() => ({\n    queryKey: ['fetchLnurlPayRequestMetadata', recipientProfile()] as const,\n    queryFn: ({ queryKey }) => {\n      const [, params] = queryKey;\n      if (params == null) return undefined;\n      return fetchLnurlPayRequestMetadata(params);\n    },\n    staleTime: 5 * 60 * 1000, // 5 min\n    gcTime: 3 * 24 * 60 * 60 * 1000, // 3 days\n  }));\n\n  const verified = () => {\n    const profile = recipientProfile();\n    const rawProfile = recipientProfileQuery.data;\n    const lnurlMetadata = lnurlQuery.data;\n    if (profile == null || rawProfile == null || lnurlMetadata == null) return false;\n    if (!(!!lnurlMetadata.allowsNostr && lnurlMetadata.nostrPubkey != null)) return false;\n\n    const lnurlPayUrl = getLnurlPayRequestUrl(profile);\n    if (lnurlPayUrl == null) return null;\n\n    const lnurlProviderPubkey = lnurlMetadata.nostrPubkey;\n\n    const result = verifyZapReceipt({\n      zapReceipt: event().rawEvent,\n      lnurlPayUrl,\n      lnurlProviderPubkey,\n    });\n    console.log('result', result);\n\n    return result.success;\n  };\n\n  return (\n    <Show when={!shouldMuteEvent(props.event) && verified()}>\n      <div class=\"flex items-center gap-1 text-sm\">\n        <div class=\"flex w-6 flex-col items-center\">\n          <div class=\"h-4 w-4 shrink-0 text-amber-500\" aria-hidden=\"true\">\n            <Bolt />\n          </div>\n          <div class=\"mt-[-2px] shrink-0 text-xs\">{formatSiPrefix(event().amountSats())}</div>\n        </div>\n        <div class=\"notification-user flex gap-1 overflow-hidden\">\n          <div class=\"author-icon h-5 w-5 shrink-0 overflow-hidden rounded\">\n            <Show when={senderProfile()?.picture != null}>\n              <img\n                src={senderProfile()?.picture}\n                alt=\"icon\"\n                // TODO autofit\n                class=\"h-full w-full object-cover\"\n              />\n            </Show>\n          </div>\n          <div class=\"flex min-w-0 flex-1 overflow-hidden\">\n            <button\n              class=\"select-text truncate font-bold hover:text-link hover:underline\"\n              onClick={() => showProfile(event().senderPubkey())}\n            >\n              <UserDisplayName pubkey={event().senderPubkey()} />\n            </button>\n            <span class=\"shrink-0\">{i18n()('notification.zapped')}</span>\n          </div>\n        </div>\n      </div>\n      <Show when={event().description().content.length > 0}>\n        <div class=\"ml-7 whitespace-pre-wrap break-all rounded border border-border px-1 text-sm\">\n          {event().description().content}\n        </div>\n      </Show>\n      <Show when={event().zappedEventId() != null}>\n        <div class=\"notification-event py-1\">\n          <EventDisplayById eventId={event().zappedEventId()} />\n        </div>\n      </Show>\n    </Show>\n  );\n};\n\nexport default ZapReceipt;\n","import { For, Switch, Match, type Component, Show } from 'solid-js';\n\nimport * as Kind from 'nostr-tools/kinds';\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport ColumnItem from '@/components/ColumnItem';\nimport Reaction from '@/components/event/Reaction';\nimport Repost from '@/components/event/Repost';\nimport TextNote from '@/components/event/TextNote';\nimport ZapReceipt from '@/components/event/ZapReceipt';\nimport useConfig from '@/core/useConfig';\n\nexport type NotificationProps = {\n  events: NostrEvent[];\n};\n\nconst Notification: Component<NotificationProps> = (props) => {\n  const { shouldMuteEvent } = useConfig();\n\n  return (\n    <For each={props.events}>\n      {(event) => (\n        <Show when={!shouldMuteEvent(event)}>\n          <Switch fallback={<div>unknown event</div>}>\n            <Match when={event.kind === Kind.ShortTextNote}>\n              <ColumnItem>\n                <TextNote event={event} />\n              </ColumnItem>\n            </Match>\n            <Match when={event.kind === Kind.Reaction}>\n              <ColumnItem>\n                <Reaction event={event} />\n              </ColumnItem>\n            </Match>\n            {/* TODO ちゃんとnotification用のコンポーネント使う */}\n            <Match when={event.kind === Kind.Repost}>\n              <ColumnItem>\n                <Repost event={event} />\n              </ColumnItem>\n            </Match>\n            <Match when={event.kind === Kind.Zap}>\n              <ColumnItem>\n                <ZapReceipt event={event} />\n              </ColumnItem>\n            </Match>\n          </Switch>\n        </Show>\n      )}\n    </For>\n  );\n};\n\nexport default Notification;\n","import { createEffect, Component } from 'solid-js';\n\nimport Bell from 'heroicons/24/outline/bell.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Notification from '@/components/timeline/Notification';\nimport { NotificationColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype NotificationColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: NotificationColumnType;\n};\n\nconst NotificationColumn: Component<NotificationColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const loadMore = useLoadMore(() => ({ duration: null }));\n\n  const { events: notifications, eose } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [\n      {\n        kinds: [1, 6, 7, 9735],\n        '#p': [props.column.pubkey],\n        limit: 20,\n        since: loadMore.since(),\n        until: loadMore.until(),\n      },\n    ],\n    eoseLimit: 20,\n    clientEventFilter: (event) => {\n      if (props.column.contentFilter == null) return true;\n      return applyContentFilter(props.column.contentFilter)(event.content);\n    },\n  }));\n\n  createEffect(() => loadMore.setEvents(notifications()));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n()('column.notification')}\n          icon={<Bell />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      timelineRef={loadMore.timelineRef}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Notification events={notifications()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default NotificationColumn;\n","import { createEffect, Component } from 'solid-js';\n\nimport User from 'heroicons/24/outline/user.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { PostsColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype PostsColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: PostsColumnType;\n};\n\nconst PostsColumn: Component<PostsColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const loadMore = useLoadMore(() => ({ duration: null }));\n\n  const { events, eose } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [\n      {\n        kinds: [1, 6],\n        authors: [props.column.pubkey],\n        limit: 10,\n        since: loadMore.since(),\n        until: loadMore.until(),\n      },\n    ],\n    eoseLimit: 10,\n    clientEventFilter: (event) => {\n      if (props.column.contentFilter == null) return true;\n      return applyContentFilter(props.column.contentFilter)(event.content);\n    },\n  }));\n\n  createEffect(() => loadMore.setEvents(events()));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n()('column.posts')}\n          icon={<User />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      timelineRef={loadMore.timelineRef}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default PostsColumn;\n","import { createEffect, Component } from 'solid-js';\n\nimport Heart from 'heroicons/24/outline/heart.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Notification from '@/components/timeline/Notification';\nimport { ReactionsColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype ReactionsColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: ReactionsColumnType;\n};\n\nconst ReactionsColumn: Component<ReactionsColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const loadMore = useLoadMore(() => ({ duration: null }));\n\n  const { events: reactions, eose } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [\n      {\n        kinds: [7],\n        authors: [props.column.pubkey],\n        limit: 10,\n        since: loadMore.since(),\n        until: loadMore.until(),\n      },\n    ],\n    eoseLimit: 10,\n    clientEventFilter: (event) => {\n      if (props.column.contentFilter == null) return true;\n      return applyContentFilter(props.column.contentFilter)(event.content);\n    },\n  }));\n\n  createEffect(() => loadMore.setEvents(reactions()));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n()('column.reactions')}\n          icon={<Heart />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      timelineRef={loadMore.timelineRef}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Notification events={reactions()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default ReactionsColumn;\n","import { createEffect, Component } from 'solid-js';\n\nimport GlobeAlt from 'heroicons/24/outline/globe-alt.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { RelaysColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype RelaysColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: RelaysColumnType;\n};\n\nconst RelaysColumn: Component<RelaysColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { removeColumn } = useConfig();\n\n  const loadMore = useLoadMore(() => ({\n    duration: 4 * 60 * 60,\n  }));\n\n  const { events, eose } = useSubscription(() => ({\n    relayUrls: props.column.relayUrls,\n    filters: [\n      {\n        kinds: [1],\n        limit: 20,\n        since: loadMore.since(),\n        until: loadMore.until(),\n      },\n    ],\n    eoseLimit: 20,\n    clientEventFilter: (event) => {\n      if (props.column.contentFilter == null) return true;\n      return applyContentFilter(props.column.contentFilter)(event.content);\n    },\n  }));\n\n  createEffect(() => loadMore.setEvents(events()));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n()('column.relay')}\n          icon={<GlobeAlt />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      timelineRef={loadMore.timelineRef}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default RelaysColumn;\n","import { Component, createEffect, createSignal, Show, JSX, onMount } from 'solid-js';\n\nimport EllipsisVertical from 'heroicons/24/outline/ellipsis-vertical.svg';\nimport MagnifyingGlass from 'heroicons/24/outline/magnifying-glass.svg';\n\nimport Column from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { SearchColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport { relaysForSearching } from '@/core/relayUrls';\nimport useConfig from '@/core/useConfig';\nimport useSubscription from '@/nostr/useSubscription';\n\nexport type SearchColumnHeaderProps = {\n  column: SearchColumnType;\n  settings: () => JSX.Element;\n  onClose?: () => void;\n};\n\nconst SearchColumnHeader: Component<SearchColumnHeaderProps> = (props) => {\n  const [isSettingsOpened, setIsSettingOpened] = createSignal(false);\n  const [query, setQuery] = createSignal('');\n\n  const { saveColumn } = useConfig();\n\n  const toggleSettingsOpened = () => setIsSettingOpened((current) => !current);\n\n  const updateQuery = () => {\n    if (query() === props.column.query) return;\n    saveColumn({ ...props.column, query: query() });\n  };\n\n  const handleBlur: JSX.EventHandler<HTMLInputElement, Event> = () => {\n    updateQuery();\n  };\n\n  const handleChange: JSX.EventHandler<HTMLInputElement, Event> = (ev) => {\n    setQuery(ev.currentTarget.value);\n  };\n\n  const handleSubmit: JSX.EventHandler<HTMLFormElement, SubmitEvent> = (ev) => {\n    ev.preventDefault();\n    updateQuery();\n  };\n\n  onMount(() => {\n    setQuery(props.column.query);\n  });\n\n  return (\n    <div class=\"flex flex-col\">\n      <div class=\"flex h-8 items-center gap-1 px-2\">\n        <h2 class=\"flex items-center gap-1\">\n          <span class=\"inline-block h-4 w-4 text-fg-secondary\">\n            <MagnifyingGlass />\n          </span>\n        </h2>\n        <form class=\"flex-1\" onSubmit={handleSubmit}>\n          <input\n            class=\"w-full rounded border border-border bg-bg px-1 py-0 ring-border focus:border-border focus:ring-primary\"\n            type=\"text\"\n            name=\"query\"\n            value={query()}\n            onChange={handleChange}\n            onBlur={handleBlur}\n          />\n        </form>\n        <button class=\"h-4 w-4\" onClick={() => toggleSettingsOpened()}>\n          <EllipsisVertical />\n        </button>\n      </div>\n      <Show when={isSettingsOpened()}>{props.settings()}</Show>\n    </div>\n  );\n};\n\nexport type SearchColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: SearchColumnType;\n};\n\nconst SearchColumn: Component<SearchColumnDisplayProps> = (props) => {\n  const { removeColumn } = useConfig();\n\n  const loadMore = useLoadMore(() => ({\n    duration: null,\n  }));\n\n  const { events, eose } = useSubscription(() => {\n    const { query } = props.column;\n\n    if (query.length === 0) return null;\n\n    return {\n      relayUrls: relaysForSearching,\n      filters: [\n        {\n          kinds: [1],\n          search: query,\n          limit: 20,\n          since: loadMore.since(),\n          until: loadMore.until(),\n        },\n      ],\n      eoseLimit: 20,\n      clientEventFilter: (event) => {\n        if (event.tags.findIndex(([tagName]) => tagName === 'mostr' || tagName === 'proxy') >= 0)\n          return false;\n        if (props.column.contentFilter == null) return true;\n        return applyContentFilter(props.column.contentFilter)(event.content);\n      },\n    };\n  });\n\n  createEffect(() => {\n    loadMore.setEvents(events());\n  });\n\n  return (\n    <Column\n      header={\n        <SearchColumnHeader\n          column={props.column}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      timelineRef={loadMore.timelineRef}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default SearchColumn;\n","import { For, Switch, Match } from 'solid-js';\n\nimport BookmarkColumn from '@/components/column/BookmarkColumn';\nimport FollowingColumn from '@/components/column/FollwingColumn';\nimport NotificationColumn from '@/components/column/NotificationColumn';\nimport PostsColumn from '@/components/column/PostsColumn';\nimport ReactionsColumn from '@/components/column/ReactionsColumn';\nimport RelaysColumn from '@/components/column/RelaysColumn';\nimport SearchColumn from '@/components/column/SearchColumn';\nimport useConfig from '@/core/useConfig';\n\nconst Columns = () => {\n  const { config } = useConfig();\n\n  return (\n    <div class=\"scrollbar flex h-full snap-x snap-mandatory flex-row overflow-x-scroll scroll-smooth\">\n      <For each={config().columns}>\n        {(column, index) => {\n          const columnIndex = () => index() + 1;\n          const lastColumn = () => columnIndex() === config().columns.length;\n          return (\n            <Switch>\n              <Match when={column.columnType === 'Following' && column} keyed>\n                {(followingColumn) => (\n                  <FollowingColumn\n                    column={followingColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Notification' && column} keyed>\n                {(notificationColumn) => (\n                  <NotificationColumn\n                    column={notificationColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Posts' && column} keyed>\n                {(postsColumn) => (\n                  <PostsColumn\n                    column={postsColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Reactions' && column} keyed>\n                {(reactionsColumn) => (\n                  <ReactionsColumn\n                    column={reactionsColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Relays' && column} keyed>\n                {(reactionsColumn) => (\n                  <RelaysColumn\n                    column={reactionsColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Bookmark' && column} keyed>\n                {(bookmarkColumn) => (\n                  <BookmarkColumn\n                    column={bookmarkColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Search' && column} keyed>\n                {(reactionsColumn) => (\n                  <SearchColumn\n                    column={reactionsColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n            </Switch>\n          );\n        }}\n      </For>\n    </div>\n  );\n};\n\nexport default Columns;\n","import { onMount, onCleanup } from 'solid-js';\n\nimport throttle from 'lodash/throttle';\n\nimport { useRequestCommand, type Command } from '@/hooks/useCommandBus';\n\ntype Shortcut = { key: string; command: Command };\n\nconst defaultShortcut: Shortcut[] = [\n  { key: 'n', command: { command: 'openPostForm' } },\n  { key: 'h', command: { command: 'moveToPrevColumn' } },\n  { key: 'j', command: { command: 'moveToNextItem' } },\n  { key: 'k', command: { command: 'moveToPrevItem' } },\n  { key: 'l', command: { command: 'moveToNextColumn' } },\n  { key: '1', command: { command: 'moveToColumn', columnIndex: 1 } },\n  { key: '2', command: { command: 'moveToColumn', columnIndex: 2 } },\n  { key: '3', command: { command: 'moveToColumn', columnIndex: 3 } },\n  { key: '4', command: { command: 'moveToColumn', columnIndex: 4 } },\n  { key: '5', command: { command: 'moveToColumn', columnIndex: 5 } },\n  { key: '6', command: { command: 'moveToColumn', columnIndex: 6 } },\n  { key: '7', command: { command: 'moveToColumn', columnIndex: 7 } },\n  { key: '8', command: { command: 'moveToColumn', columnIndex: 8 } },\n  { key: '9', command: { command: 'moveToColumn', columnIndex: 9 } },\n  { key: '0', command: { command: 'moveToLastColumn' } },\n  { key: 'ArrowLeft', command: { command: 'moveToPrevColumn' } },\n  { key: 'ArrowDown', command: { command: 'moveToNextItem' } },\n  { key: 'ArrowUp', command: { command: 'moveToPrevItem' } },\n  { key: 'ArrowRight', command: { command: 'moveToNextColumn' } },\n  { key: 'f', command: { command: 'like' } },\n  { key: 't', command: { command: 'repost' } },\n  { key: 'r', command: { command: 'openReplyForm' } },\n  { key: '?', command: { command: 'openHelp' } },\n  { key: 'Enter', command: { command: 'openItemDetail' } },\n  { key: 'Backspace', command: { command: 'closeItemDetail' } },\n];\n\ntype UseShortcutKeysProps = {\n  shortcuts?: Shortcut[];\n  onShortcut: (shortcut: Shortcut) => void;\n};\n\nconst createShortcutsMap = (shortcuts: Shortcut[]) => {\n  const map = new Map<string, Shortcut>();\n  shortcuts.forEach((shortcut) => {\n    map.set(shortcut.key, shortcut);\n  });\n  return map;\n};\n\nconst useShortcutKeys = ({ shortcuts = defaultShortcut, onShortcut }: UseShortcutKeysProps) => {\n  const shortcutsMap = createShortcutsMap(shortcuts);\n\n  onMount(() => {\n    const handleKeydown = throttle((ev: KeyboardEvent) => {\n      if (ev.type !== 'keydown') return;\n      if (ev.ctrlKey || ev.altKey || ev.metaKey) return;\n      if (ev.target instanceof HTMLTextAreaElement || ev.target instanceof HTMLInputElement) return;\n\n      const shortcut = shortcutsMap.get(ev.key);\n\n      if (shortcut == null) return;\n\n      onShortcut(shortcut);\n    }, 50);\n\n    window.addEventListener('keydown', handleKeydown);\n\n    onCleanup(() => {\n      window.removeEventListener('keydown', handleKeydown);\n    });\n  });\n};\n\nexport const useMountShortcutKeys = () => {\n  const request = useRequestCommand();\n\n  useShortcutKeys({\n    onShortcut: (shortcut) => {\n      request(shortcut.command).then(\n        () => console.debug(`shortcut key '${shortcut.key}' was processed successfully`),\n        (err) => console.error(err),\n      );\n    },\n  });\n};\n\nexport default useShortcutKeys;\n","import { createEffect, onMount, type Component, onError } from 'solid-js';\n\nimport { useNavigate } from '@solidjs/router';\n\nimport Columns from '@/components/column/Columns';\nimport GlobalModal from '@/components/modal/GlobalModal';\nimport SideBar from '@/components/SideBar';\nimport useConfig from '@/core/useConfig';\nimport usePersistStatus from '@/hooks/usePersistStatus';\nimport { useMountShortcutKeys } from '@/hooks/useShortcutKeys';\nimport usePool from '@/nostr/usePool';\nimport usePubkey from '@/nostr/usePubkey';\n\nconst Home: Component = () => {\n  useMountShortcutKeys();\n\n  const navigate = useNavigate();\n  const { persistStatus } = usePersistStatus();\n\n  const pool = usePool();\n  const { config, initializeColumns } = useConfig();\n  const pubkey = usePubkey();\n\n  createEffect(() => {\n    config().relayUrls.map(async (relayUrl) => {\n      try {\n        const relay = await pool().ensureRelay(relayUrl);\n        relay.onnotice = (msg: string) => {\n          console.error(`NOTICE: ${relayUrl}: ${msg}`);\n        };\n        relay.onclose = () => {\n          console.warn(`CLOSE: ${relayUrl}`);\n        };\n      } catch (err) {\n        console.error('ensureRelay failed', err);\n      }\n    });\n  });\n\n  createEffect(() => {\n    // pubkeyが得られてはじめてカラムを初期化できる\n    const p = pubkey();\n    if (p != null) {\n      initializeColumns({ pubkey: p });\n    }\n  });\n\n  onMount(() => {\n    if (!persistStatus().loggedIn) {\n      navigate('/hello');\n    }\n  });\n\n  onError((err) => {\n    console.error('uncaught error: ', err);\n  });\n\n  return (\n    <div class=\"absolute inset-0 flex h-svh w-screen touch-manipulation flex-row overflow-hidden\">\n      <SideBar />\n      <Columns />\n      <GlobalModal />\n    </div>\n  );\n};\n\nexport default Home;\n"],"names":["BookmarkIcon","props","_el$","_tmpl$","_$spread","EllipsisVertical","BasicColumnHeader","isSettingsOpened","setIsSettingOpened","createSignal","toggleSettingsOpened","current","_el$2","firstChild","_el$3","_el$4","_el$5","nextSibling","_el$6","_$insert","_$createComponent","Show","when","icon","keyed","children","_el$7","_tmpl$2","name","$$click","settings","_$delegateEvents","relatedEvents","event","ids","id","rootId","rootEvent","push","replyId","replyingToEvent","uniq","RepliesDisplay","config","useConfig","textNote","events","useSubscription","relayUrls","filters","kinds","limit","Timeline","reverse","TimelineContentDisplay","Switch","Match","timelineContent","type","replies","Column","columnDivRef","timelineState","useTimelineState","i18n","useTranslation","width","useHandleCommand","commandType","handler","command","columnIndex","scrollIntoView","behavior","inline","lastColumn","TimelineContext","Provider","value","_ref$","_$use","content","fallback","header","_tmpl$3","_ref$2","timelineRef","timeline","_tmpl$4","clearTimeline","ArrowLeft","_el$8","_tmpl$5","_$effect","_$p","_$classList","ChevronLeft","ChevronRight","Trash","ColumnSettingsSection","title","ColumnSettings","saveColumn","removeColumn","moveColumn","request","useRequestCommand","setColumnWidth","column","move","index","catch","err","console","error","_el$9","_el$10","_el$11","_el$12","_el$13","For","each","_el$14","_p$","_v$5","_v$6","_v$7","_v$8","classList","toggle","undefined","_v$","_v$2","_v$3","_v$4","_$setAttribute","Tags","TagsBase","tags","parseTags","TagsSchema","memo","setMemo","createRoot","decrypting","setDecrypting","useDecrypt","propsProvider","pubkey","usePubkey","decrypted","setDecrypted","createEffect","encrypted","p","result","Bookmark","bookmark","createMemo","genericEvent","length","bookmarkedEventIdsPrivate","json","log","taggedEventIds","warn","bookmarkedEventIds","eventId","ColumnItem","EventDisplayById","ensureKinds","Kind","useParameterizedReplaceableEvent","queryClient","useQueryClient","genQueryKey","query","createQuery","queryKey","signal","currentProps","kind","author","identifier","task","BatchedEventsTask","promise","latest","pickLatestEvent","registerTask","timeout","BookmarkColumn","onClose","ev","useScroll","elementRef","setElementRef","el","useLoadMore","calcSince","base","duration","setEvents","since","setSince","epoch","until","setUntil","continuous","scroll","loadLatest","batch","scrollToTop","loadOld","oldest","pickOldestEvent","created_at","targetRef","LoadMore","loadMore","_$memo","disabled","eose","applyContentFilter","filter","child","FollowingColumn","followingPubkeys","useFollowings","authors","debugId","eoseLimit","onEOSE","clientEventFilter","contentFilter","onMount","onCleanup","Home","ReactionDisplay","formatDate","useFormatDate","shouldMuteEvent","showProfile","useModalState","reaction","lastTaggedEventId","profile","useProfile","reactedEvent","reactedEventQuery","useEvent","ensureNonNull","eventIdNonNull","isRemoved","isSuccess","EmojiDisplay","reactionTypes","toReactionTypes","picture","url","thumbnailUrl","UserDisplayName","createdAtAsDate","TextNote","Bolt","ZapReceipt","zapReceipt","senderProfile","senderPubkey","recipientProfile","recipientProfileQuery","zappedPubkey","lnurlQuery","queryFn","params","fetchLnurlPayRequestMetadata","staleTime","gcTime","verified","rawProfile","data","lnurlMetadata","allowsNostr","nostrPubkey","lnurlPayUrl","getLnurlPayRequestUrl","lnurlProviderPubkey","verifyZapReceipt","rawEvent","success","formatSiPrefix","amountSats","description","zappedEventId","Notification","Reaction","Repost","NotificationColumn","notifications","Bell","PostsColumn","User","ReactionsColumn","reactions","Heart","RelaysColumn","GlobeAlt","SearchColumnHeader","setQuery","updateQuery","handleBlur","handleChange","currentTarget","handleSubmit","preventDefault","MagnifyingGlass","addEventListener","SearchColumn","relaysForSearching","search","findIndex","tagName","Columns","columns","columnType","followingColumn","notificationColumn","postsColumn","reactionsColumn","bookmarkColumn","defaultShortcut","createShortcutsMap","shortcuts","map","shortcut","useShortcutKeys","onShortcut","shortcutsMap","handleKeydown","throttle","useMountShortcutKeys","navigate","useNavigate","persistStatus","usePersistStatus","pool","usePool","initializeColumns","relayUrl","relay","ensureRelay","onnotice","msg","onclose","loggedIn","onError","SideBar","GlobalModal"],"mappings":"gjCAAAA,GAAe,CAACC,EAAQ,CAAE,KAAA,IAAA,CAAA,MAAAC,EAAAC,KAAAC,OAAAA,EAAAF,EAA6JD,EAAK,GAAA,EAAA,EAAAC,CAAA,GAAoM,yUCAhYG,GAAe,CAACJ,EAAQ,CAAE,KAAA,IAAA,CAAA,MAAAC,EAAAC,KAAAC,OAAAA,EAAAF,EAA6JD,EAAK,GAAA,EAAA,EAAAC,CAAA,GAAkM,sUCWxXI,EAAwDL,GAAU,CACtE,KAAM,CAACM,EAAkBC,CAAkB,EAAIC,EAAa,EAAK,EAE3DC,EAAuBA,IAAMF,EAAoBG,GAAY,CAACA,CAAO,EAE3E,OAAA,IAAA,CAAA,MAAAT,EAAAC,GAAA,EAAAS,EAAAV,EAAAW,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAD,WAAAG,EAAAF,EAAAG,YAAAC,EAAAF,EAAAH,WAAAM,OAAAA,EAAAL,EAAAM,EAISC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAErB,EAAMsB,IAAI,EAAEC,MAAK,GAAAC,SACzBF,IAAI,IAAA,CAAA,MAAAG,EAAAC,KAAAR,OAAAA,EAAAO,EAAoEH,CAAI,EAAAG,CAAA,GAAA,CAAQ,CAAA,EAAAX,CAAA,EAAAI,EAAAJ,EAEhEd,IAAAA,EAAM2B,IAAI,EAAAZ,EAAAa,QAEyB,IAAMnB,IAAsBS,EAAAD,EAAAE,EAEpFf,GAAgB,CAAA,CAAA,CAAA,EAAAc,EAAAjB,EAAAkB,EAItBC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEf,EAAgB,CAAE,EAAA,IAAAkB,UAAA,CAAA,OAAGxB,EAAM6B,UAAU,CAAA,CAAA,EAAA,IAAA,EAAA5B,CAAA,IAGvD,EAEiC6B,EAAA,CAAA,OAAA,CAAA,ECvBjC,MAAMC,GAAiBC,GAAoB,CACzC,MAAMC,EAAM,CAACD,EAAME,EAAE,EAEfC,EAASH,EAAMI,UAAS,GAAIF,GAC9BC,GAAU,MAAMF,EAAII,KAAKF,CAAM,EAEnC,MAAMG,EAAUN,EAAMO,gBAAe,GAAIL,GACzC,OAAII,GAAW,MAAML,EAAII,KAAKC,CAAO,EAE9BE,GAAKP,CAAG,CACjB,EAEMQ,GAAoDzC,GAAU,CAClE,KAAM,CAAE0C,OAAAA,CAAQ,EAAGC,EAAS,EAEtBX,EAAQA,IAAMY,GAAS5C,EAAMgC,KAAK,EAElC,CAAEa,OAAAA,CAAQ,EAAGC,EAAgB,KAAO,CACxCC,UAAWL,EAAM,EAAGK,UACpBC,QAAS,CACP,CAAEC,MAAO,CAAC,CAAC,EAAGhB,IAAKF,GAAcC,GAAO,EAAGkB,MAAO,EAAG,EACrD,CAAED,MAAO,CAAC,CAAC,EAAG,KAAM,CAACjD,EAAMgC,MAAME,EAAE,EAAGgB,MAAO,EAAG,CAAC,EAEnDA,MAAO,GACR,EAAC,EAEF,OAAA/B,EAAQgC,EAAQ,CAAA,IAACN,QAAM,CAAA,MAAE,CAAC,GAAGA,GAAQ,EAAEO,QAAO,CAAE,CAAA,CAAA,CAClD,EAEMC,GAA2ErD,GAAKmB,EACnFmC,EAAM,CAAA,IAAA9B,UAAA,CAAA,OAAAL,EACJoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAErB,EAAMwD,gBAAgBC,OAAS,WAAazD,EAAMwD,eAAe,EAAEjC,MAAK,GAAAC,SACjFkC,GAAOvC,EAAMsB,GAAc,CAAA,IAACT,OAAK,CAAA,OAAE0B,EAAQ1B,KAAK,CAAA,CAAA,CAAI,CAAA,CAAA,CAAA,CAG3D,8fC9BK2B,EAAkC3D,GAAU,CAChD,IAAI4D,EAEJ,MAAMC,EAAgBC,KAChBC,EAAOC,IAEPC,EAAQA,IAAMjE,EAAMiE,OAAS,SAEnCC,OAAAA,GAAiB,KAAO,CACtBC,YAAa,eACbC,QAAUC,GAAY,CAChBA,EAAQA,UAAY,gBAAkBA,EAAQC,cAAgBtE,EAAMsE,aACtEV,GAAcW,eAAe,CAAEC,SAAU,SAAUC,OAAQ,QAAS,CAAC,CAEzE,CACD,EAAC,EAEFP,GAAiB,KAAO,CACtBC,YAAa,mBACbC,QAASA,IAAM,CACTpE,EAAM0E,YACRd,GAAcW,eAAe,CAAEC,SAAU,QAAS,CAAC,CAEvD,CACD,EAAC,EAEFrD,EACGwD,GAAgBC,SAAQ,CAACC,MAAOhB,EAAa,IAAArC,UAAA,CAAA,MAAAvB,EAAAC,KAAA4E,EAErClB,EAAY,cAAAkB,GAAAC,WAAAA,EAAAD,EAAA7E,CAAA,EAAZ2D,EAAY3D,EAAAiB,EAAAjB,EAAAkB,EAShBC,EAAI,CAAA,IACHC,MAAI,CAAA,OAAEwC,EAAcA,cAAcmB,OAAO,EACzCzD,MAAK,GAAA,IACL0D,UAAQ,CAAA,MAAA,EAAA,IAAA,CAAA,MAAAtE,EAAAe,KAAAR,OAAAA,EAAAP,EAE0CX,IAAAA,EAAMkF,MAAM,EAAAvE,CAAA,GAAA,GAAA,IAAA,CAAA,MAAAE,EAAAsE,KAAAC,EAChDpF,EAAMqF,YAAW,cAAAD,GAAA,WAAAL,EAAAK,EAAAvE,CAAA,EAAjBb,EAAMqF,YAAWxE,EAAAK,EAAAL,EACxBb,IAAAA,EAAMwB,QAAQ,EAAAX,CAAA,GAAA,CAAA,CAAA,EAAAW,SAKnB8D,GAAQ,EAAA,IAAA,CAAA,MAAAxE,EAAAyE,GAAA,EAAAxE,EAAAD,EAAAF,WAAAK,EAAAF,EAAAH,WAAAa,EAAAR,EAAAD,YAAAD,OAAAA,EAAAa,QAKO,IAAMiC,GAAe2B,cAAa,EAAEtE,EAAAD,EAAAE,EAG1CsE,GAAS,CAAA,CAAA,CAAA,EAAAvE,EAAAO,EAENsC,IAAAA,EAAI,EAAG,aAAa,CAAC,EAAAjD,CAAA,GAAA,GAAA,IAAA,CAAA,MAAA4E,EAAAC,KAAAzE,OAAAA,EAAAwE,EAAAvE,EAI5BkC,GAAsB,CAACG,gBAAiB8B,CAAQ,CAAA,CAAA,EAAAI,CAAA,IAAA,CAGtD,CAAA,CAAA,EAAAE,EAAAC,GAAAC,GAAA7F,EApCQ,CACT,eAAgBgE,EAAK,IAAO,SAC5B,eAAgBA,EAAK,IAAO,OAC5B,eAAgBA,EAAK,IAAO,SAC5B,eAAgBA,EAAK,IAAO,QAC9B,EAAC4B,CAAA,CAAA,EAAA5F,CAAA,CAAA,CAAA,CAoCT,EAEsB6B,EAAA,CAAA,OAAA,CAAA,2OC5FtBiE,GAAe,CAAC/F,EAAQ,CAAE,KAAA,IAAA,CAAA,MAAAC,EAAAC,KAAAC,OAAAA,EAAAF,EAA6JD,EAAK,GAAA,EAAA,EAAAC,CAAA,GAA8F,mOCA1R+F,GAAe,CAAChG,EAAQ,CAAE,KAAA,IAAA,CAAA,MAAAC,EAAAC,KAAAC,OAAAA,EAAAF,EAA6JD,EAAK,GAAA,EAAA,EAAAC,CAAA,GAA4F,umBCAxRgG,GAAe,CAACjG,EAAQ,CAAE,KAAA,IAAA,CAAA,MAAAC,EAAAC,KAAAC,OAAAA,EAAAF,EAA6JD,EAAK,GAAA,EAAA,EAAAC,CAAA,GAAge,8kBCqBtpBiG,GAAgElG,IAAK,IAAA,CAAA,MAAAC,EAAAC,GAAA,EAAAS,EAAAV,EAAAW,WAAAC,EAAAF,EAAAK,YAAAE,OAAAA,EAAAP,EAEjEX,IAAAA,EAAMmG,KAAK,EAAAjF,EAAAL,EACXb,IAAAA,EAAMwB,QAAQ,EAAAvB,CAAA,KAIlBmG,EAAkDpG,GAAU,CAChE,MAAM+D,EAAOC,IACP,CAAEqC,WAAAA,EAAYC,aAAAA,EAAcC,WAAAA,CAAY,EAAG5D,EAAS,EACpD6D,EAAUC,KAEVC,EAAkBzC,GAA+B,CACrDoC,EAAW,CAAE,GAAGrG,EAAM2G,OAAQ1C,MAAAA,CAAM,CAAC,GAGjC2C,EAAQC,GAAkB,CAC9BN,EAAWvG,EAAM2G,OAAOzE,GAAI2E,CAAK,EACjCL,EAAQ,CAAEnC,QAAS,eAAgBC,YAAauC,CAAM,CAAC,EAAEC,MAAOC,GAAQC,QAAQC,MAAMF,CAAG,CAAC,GAG5F,OAAA,IAAA,CAAA,MAAAjG,EAAAqE,GAAA,EAAAlE,EAAAH,EAAAF,WAAAa,EAAAR,EAAAL,WAAA8E,EAAAjE,EAAAb,WAAAsG,EAAAzF,EAAAT,YAAAmG,EAAAD,EAAAtG,WAAAwG,EAAAF,EAAAlG,YAAAqG,EAAAD,EAAApG,YAAAsG,EAAAD,EAAAzG,WAAAM,OAAAA,EAAAJ,EAAAK,EAEK+E,GAAqB,CAAA,IAACC,OAAK,CAAA,OAAEpC,EAAI,EAAG,2BAA2B,CAAC,EAAA,IAAAvC,UAAA,CAAA,MAAAT,EAAAW,KAAAR,OAAAA,EAAAH,EAAAI,EAE5DoG,EAAG,CAACC,KAAM,CAAC,SAAU,OAAQ,SAAU,QAAQ,EAAChG,SAC7CyC,IAAK,IAAA,CAAA,MAAAwD,EAAAlC,KAAAkC,OAAAA,EAAA7F,QASM,IAAM8E,EAAezC,CAAK,EAAC/C,EAAAuG,EAAA,IAEnC1D,EAAM,EAAE,iBAAgBE,CAAM,EAAC,CAAC,EAAA2B,EAAA8B,GAAA,CAAA,MAAAC,EAPR3H,EAAM2G,OAAO1C,QAAUA,EAAK2D,EACtC5H,EAAM2G,OAAO1C,QAAUA,EAAK4D,EACxB7H,EAAM2G,OAAO1C,QAAUA,EAAK6D,EAC9B9H,EAAM2G,OAAO1C,QAAUA,EAAK0D,OAAAA,IAAAD,EAAAC,MAAAF,EAAAM,UAAAC,OAAAN,sBAAAA,EAAAC,KAAAA,CAAA,EAAAC,IAAAF,EAAAE,MAAAH,EAAAM,UAAAC,OAAAN,YAAAA,EAAAE,KAAAA,CAAA,EAAAC,IAAAH,EAAAG,MAAAJ,EAAAM,UAAAC,OAAAN,gBAAAA,EAAAG,KAAAA,CAAA,EAAAC,IAAAJ,EAAAI,MAAAL,EAAAM,UAAAC,OAAAN,cAAAA,EAAAI,KAAAA,CAAA,EAAAJ,CAAA,EAAA,CAAAC,KAAAM,OAAAL,KAAAK,OAAAJ,KAAAI,OAAAH,KAAAG,MAAA,CAAA,EAAAR,CAAA,GAAA,CAMhD,CAAA,CAAA,EAAA1G,CAAA,CAAA,CAAA,EAAAE,CAAA,EAAAQ,EAAAG,QAQM,IAAMgF,EAAK5G,EAAMsE,YAAc,CAAC,EAACpD,EAAAwE,EAAAvE,EAGvC4E,GAAW,CAAA,CAAA,CAAA,EAAAmB,EAAAtF,QAML,IAAMgF,EAAK5G,EAAMsE,YAAc,CAAC,EAACpD,EAAAiG,EAAAhG,EAGvC6E,GAAY,CAAA,CAAA,CAAA,EAAAqB,EAAAzF,QAON,IAAM0E,EAAatG,EAAM2G,OAAOzE,EAAE,EAAChB,EAAAoG,EAAAnG,EAGzC8E,GAAK,CAAA,CAAA,CAAA,EAAAL,EAAA8B,GAAA,CAAA,MAAAQ,EAvBDnE,EAAM,EAAC,wBAAwB,EAACoE,EAShCpE,EAAM,EAAC,yBAAyB,EAACqE,EAUjCrE,EAAM,EAAC,4BAA4B,EAACsE,EAGItE,IAAO,4BAA4B,EAACmE,OAAAA,IAAAR,EAAAQ,KAAAI,EAAA7G,EAAAiG,QAAAA,EAAAQ,IAAAA,CAAA,EAAAC,IAAAT,EAAAS,MAAAG,EAAApB,EAAAQ,QAAAA,EAAAS,KAAAA,CAAA,EAAAC,IAAAV,EAAAU,MAAAE,EAAAjB,EAAAK,QAAAA,EAAAU,KAAAA,CAAA,EAAAC,IAAAX,EAAAW,MAAAC,EAAAhB,EAAAI,aAAAA,EAAAW,KAAAA,CAAA,EAAAX,CAAA,EAAA,CAAAQ,IAAAD,OAAAE,KAAAF,OAAAG,KAAAH,OAAAI,KAAAJ,MAAA,CAAA,EAAAnH,CAAA,IAO7F,EAE8BgB,EAAA,CAAA,OAAA,CAAA,EChG9B,MAAqByG,WAAaC,EAAS,CACzC,YAAqBC,EAAkB,CAC/B,QADa,KAAA,KAAAA,CAErB,CACF,CAEa,MAAAC,GAAa1D,GAA0B,CAC9C,GAAA,CACF,MAAMyD,EAAOE,GAAW,MAAM,KAAK,MAAM3D,CAAO,CAAC,EAC1C,OAAA,IAAIuD,GAAKE,CAAI,QACb1B,EAAK,CACZ,MAAM,IAAI,UAAU,gCAAiC,CAAE,MAAOA,CAAK,CAAA,CACrE,CACF,ECNM,CAAC6B,GAAMC,EAAO,EAAIC,GAAW,IAAMtI,EAAqC,CAAE,CAAA,CAAC,EAE3E,CAACuI,GAAYC,EAAa,EAAIF,GAAW,IAAMtI,EAAsC,CAAE,CAAA,CAAC,EAExFyI,GAAcC,GAAgD,CAClE,MAAMC,EAASC,KACT,CAACC,EAAWC,CAAY,EAAI9I,EAA4B,IAAI,EAElE,OAAA+I,EAAa,IAAM,CACjB,MAAMvJ,EAAQkJ,IACd,GAAIlJ,GAAS,KAAM,OAEb,KAAA,CAAE,UAAAwJ,CAAc,EAAAxJ,EAClB,GAAAwJ,KAAaZ,KAAQ,CACVU,EAAAV,GAAA,EAAOY,CAAS,CAAC,EAC9B,MACF,CAEA,MAAMC,EAAIN,IACNM,GAAK,OAELV,GAAA,EAAaS,CAAS,IAIZR,GAACtI,IAAa,CAAE,GAAGA,EAAS,CAAC8I,CAAS,EAAG,EAAO,EAAA,EAEvD,OAAA,OAAO,OACV,UAAUC,EAAGD,CAAS,GACtB,KAAME,GAAW,CACTb,GAACnI,IAAa,CAAE,GAAGA,EAAS,CAAC8I,CAAS,EAAGE,CAAS,EAAA,EAC1DJ,EAAaI,CAAM,CAAA,CACpB,EACA,MAAO3C,GAAQ,CACd,QAAQ,MAAM,sBAAsByC,CAAS,IAAKzC,CAAG,CAAA,CACtD,GAAA,CACJ,EAEMsC,CACT,ECjCMM,GAAsC3J,GAAU,CACpD,MAAM4J,EAAWC,EAAW,IAAMC,GAAa9J,EAAMgC,KAAK,CAAC,EAErDqH,EAAYJ,GAAW,IAAM,CACjC,KAAM,CAAEjE,QAAAA,CAAS,EAAG4E,EAAQ,EAC5B,OAAI5E,GAAW,MAAQA,EAAQ+E,SAAW,EAAU,KAC7C,CAAE7H,GAAI0H,EAAQ,EAAG1H,GAAIsH,UAAWxE,EACzC,CAAC,EAEKgF,EAA4BA,IAAM,CACtC,MAAMC,EAAOZ,IACb,GAAIY,GAAQ,KAAM,MAAO,GACzBjD,QAAQkD,IAAID,CAAI,EAEhB,GAAI,CACF,OAAOvB,GAAUuB,CAAI,EAAEE,gBACxB,OAAQpD,EAAK,CACZC,eAAQoD,KAAKrD,CAAG,EACT,EACT,GAGIsD,EAAqBA,IAAMT,EAAU,EAACO,eAAc,EAE1D,OAAAhJ,EACGoG,EAAG,CAAA,IAACC,MAAI,CAAA,MAAE,CAAC,GAAG6C,EAAkB,EAAI,GAAGL,EAA2B,CAAA,CAAC,EAAAxI,SAChE8I,GAAOnJ,EACNoJ,EAAU,CAAA,IAAA/I,UAAA,CAAA,OAAAL,EACRqJ,GAAgB,CAACF,QAASA,EAAO,IAAEG,aAAW,CAAA,MAAE,CAACC,EAAkB,CAAC,CAAA,CAAA,CAAA,CAAA,CAAA,CAExE,CAAA,CAGP,ECvBMC,GACJzB,GACqC,CACrC,MAAM0B,EAAcC,KACd7K,EAAQ6J,EAAWX,CAAa,EAChC4B,EAAc,IAAM,CAAC,gBAAiB9K,EAAO,CAAA,EAE7C+K,EAAQC,GAAY,KAAO,CAC/B,SAAUF,EAAY,EACtB,QAAS,CAAC,CAAE,SAAAG,EAAU,OAAAC,KAAa,CACjC,QAAQ,MAAM,eAAe,EACvB,KAAA,CAAG,CAAAC,CAAY,EAAIF,EACzB,GAAIE,GAAgB,KAAa,OAAA,QAAQ,QAAQ,IAAI,EAErD,KAAM,CAAE,KAAAC,EAAM,OAAAC,EAAQ,WAAAC,CAAA,EAAeH,EAC/BI,EAAO,IAAIC,GAAqD,CACpE,KAAM,gCACN,KAAAJ,EACA,OAAAC,EACA,WAAAC,CAAA,CACD,EACKG,EAAUF,EAAK,kBAAkB,EAAE,MAAM,IAAM,CACnD,MAAM,IAAI,MACR,8CAA8CH,CAAI,IAAIC,CAAM,IAAIC,CAAU,EAAA,CAC5E,CACD,EACI,OAAAC,EAAA,SAAU1I,GAAW,CAClB,MAAA6I,EAASC,GAAgB9I,CAAM,EACzB+H,EAAA,aAAaK,EAAUS,CAAM,CAAA,CAC1C,EACYE,GAAA,CAAE,KAAAL,EAAM,OAAAL,CAAA,CAAQ,EACtBW,GACL,KACA,qCAAqCT,CAAI,IAAIC,CAAM,IAAIC,CAAU,IACjEG,CAAO,CACX,EACA,UAAW,EAAI,GAAK,IACpB,OAAQ,EAAI,GAAK,GAAK,GACtB,EAAA,EAIK,MAAA,CAAE,MAFK,IAAMV,EAAM,MAAQ,KAElB,MAAAA,EAClB,ECjDMe,GAAyD9L,GAAU,CACvE,MAAM+D,EAAOC,IACP,CAAEsC,aAAAA,CAAc,EAAG3D,EAAS,EAE5B,CAAEX,MAAAA,CAAO,EAAG2I,GAAiC,KAAO,CACxDS,KAAM,MACNC,OAAQrL,EAAM2G,OAAOwC,OACrBmC,WAAYtL,EAAM2G,OAAO2E,UAC1B,EAAC,EAIF,OAAAnK,EACGwC,EAAM,CAAA,IACLuB,QAAM,CAAA,OAAA/D,EACHd,EAAiB,CAAA,IAChBsB,MAAI,CAAA,OAAE3B,EAAM2G,OAAOhF,MAAQoC,EAAM,EAAC,iBAAiB,CAAC,EAAA,IACpDzC,MAAI,CAAA,OAAAH,EAAGpB,GAAY,CAAA,CAAA,CAAA,EACnB8B,SAAUA,IAAAV,EAAOiF,EAAc,CAAA,IAACO,QAAM,CAAA,OAAE3G,EAAM2G,MAAM,EAAA,IAAErC,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAI,EACxFyH,QAASA,IAAMzF,EAAatG,EAAM2G,OAAOzE,EAAE,CAAC,CAAA,CAAA,EAAA,IAGhD+B,OAAK,CAAA,OAAEjE,EAAM2G,OAAO1C,KAAK,EAAA,IACzBK,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAA,IAC9BI,YAAU,CAAA,OAAE1E,EAAM0E,UAAU,EAAA,IAAAlD,UAAA,CAAA,OAAAL,EAE3BC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEW,EAAK,CAAE,EAAET,MAAK,GAAAC,SACtBwK,GAAE7K,EAAMwI,GAAQ,CAAC3H,MAAOgK,CAAE,CAAA,CAAI,CAAA,CAAA,CAAA,CAAA,CAIxC,ECzCMC,GAAY,IAAiB,CACjC,KAAM,CAACC,EAAYC,CAAa,EAAI3L,EAAsC,EAgBnE,MAAA,CACL,UAAW2L,EACX,gBAJsB,IAAMD,KAAc,WAAa,EAKvD,YAjBkB,IAAM,CACxB,MAAME,EAAKF,IAERE,GAAA,SAAS,EAAG,CAAC,CAAA,EAehB,eAZqB,IAAM,CAC3B,MAAMA,EAAKF,IAERE,GAAA,SAAS,EAAGA,EAAG,YAAY,CAAA,CAS9B,CAEJ,0PCMaC,EAAenD,GAAuD,CACjF,MAAMlJ,EAAQ6J,EAAWX,CAAa,EAChCoD,EAAaC,GAAqC,CACtD,KAAM,CAAEC,SAAAA,CAAU,EAAGxM,EAAK,EAC1B,GAAIwM,GAAY,KAChB,OAAOD,EAAOC,GAGV,CAAC3J,EAAQ4J,CAAS,EAAIjM,EAA2B,CAAE,CAAA,EACnD,CAACkM,EAAOC,CAAQ,EAAInM,EAAiC8L,EAAUM,GAAO,CAAA,CAAC,EACvE,CAACC,EAAOC,CAAQ,EAAItM,EAAY,EAChCuM,EAAaA,IAAMF,EAAO,GAAI,KAE9BG,EAASf,KAETgB,EAAaA,IAAM,CACvBC,EAAM,IAAM,CACVJ,EAAS7E,MAAS,EAClB0E,EAASL,EAAUM,GAAO,CAAA,CAAC,CAC7B,CAAC,EACDI,EAAOG,YAAW,GAGdC,EAAUA,IAAM,CACpB,MAAMC,EAASC,GAAgBzK,EAAM,CAAE,EACnCwK,GAAU,OACdH,EAAM,IAAM,CACVJ,EAASO,EAAOE,UAAU,EAC1BZ,EAASL,EAAUe,EAAOE,UAAU,CAAC,CACvC,CAAC,EACDP,EAAOG,YAAW,IAGpB,MAAO,CACL9H,YAAa2H,EAAOQ,UACpBf,UAAAA,EACAC,MAAAA,EACAG,MAAAA,EACAE,WAAAA,EACAE,WAAAA,EACAG,QAAAA,EAEJ,EAEMK,EAAsCzN,GAAU,CACpD,MAAM+D,EAAOC,IAEb,MAAA7C,CAAAA,EAEKC,EAAI,CAAA,IAACC,MAAI,CAAA,MAAE,CAACrB,EAAM0N,SAASX,YAAY,EAAA,IAAAvL,UAAA,CAAA,OAAAL,EACrCoJ,EAAU,CAAA,IAAA/I,UAAA,CAAA,MAAAvB,EAAAC,GAAA,EAAAS,EAAAV,EAAAW,WAAAX,OAAAA,EAAA2B,QAGE,IAAM5B,EAAM0N,SAAST,WAAU,EAAE/L,EAAAP,EAEnCoD,IAAAA,EAAI,EAAG,mBAAmB,CAAC,EAAA9D,CAAA,CAAA,CAAA,CAAA,EAAA0N,EAAAA,MAIvC3N,EAAMwB,QAAQ,EAAAL,EACdoJ,EAAU,CAAA,IAAA/I,UAAA,CAAA,MAAAX,EAAAa,GAAA,EAAAZ,EAAAD,EAAAD,WAAAC,OAAAA,EAAAe,QAIE,IAAM5B,EAAM0N,SAASN,QAAO,EAAElM,EAAAJ,EAEhCiD,IAAAA,EAAI,EAAG,gBAAgB,CAAC,EAAA6B,EAAA,IAAA/E,EAAA+M,SAHrB,CAAC5N,EAAM6N,IAAI,EAAAhN,CAAA,CAAA,CAAA,CAAA,CAQ/B,EAEwBiB,EAAA,CAAA,OAAA,CAAA,EC7EjB,MAAMgM,EACVC,GACA/I,GAA6B,CAC5B,OAAQ+I,EAAO,WAAY,CACzB,IAAK,MACI,OAAAA,EAAO,SAAS,MAAOC,GAAUF,EAAmBE,CAAK,EAAEhJ,CAAO,CAAC,EAC5E,IAAK,KACI,OAAA+I,EAAO,SAAS,KAAMC,GAAUF,EAAmBE,CAAK,EAAEhJ,CAAO,CAAC,EAC3E,IAAK,MACH,MAAO,CAAC8I,EAAmBC,EAAO,KAAK,EAAE/I,CAAO,EAClD,IAAK,OACI,OAAAA,EAAQ,SAAS+I,EAAO,IAAI,EACrC,IAAK,QACI,OAAA,IAAI,OAAOA,EAAO,MAAOA,EAAO,IAAI,EAAE,KAAK/I,CAAO,EAC3D,QACE,QAAQ,MAAM,iCAAiC,EAC/C,KACJ,CACO,MAAA,EACT,EC9BIiJ,GAA2DjO,GAAU,CACzE,MAAM+D,EAAOC,IACP,CAAEtB,OAAAA,EAAQ4D,aAAAA,CAAc,EAAG3D,EAAS,EAEpC,CAAEuL,iBAAAA,CAAkB,EAAGC,GAAc,KAAO,CAAEhF,OAAQnJ,EAAM2G,OAAOwC,MAAQ,EAAC,EAE5EuE,EAAWrB,EAAY,KAAO,CAClCG,SAAU,EAAI,GAAK,EACpB,EAAC,EAEI,CAAE3J,OAAAA,EAAQgL,KAAAA,CAAM,EAAG/K,EAAgB,IAAM,CAC7C,MAAMsL,EAAU5L,GAAI,KAAC,CAAC,GAAG0L,EAAgB,CAAE,CAAC,EAC5C,OAAIE,EAAQrE,SAAW,EAAU,KAC1B,CACLsE,QAAS,YACTtL,UAAWL,EAAM,EAAGK,UACpBC,QAAS,CACP,CACEC,MAAO,CAAC,EAAG,CAAC,EACZmL,QAAAA,EACAlL,MAAO,GACPwJ,MAAOgB,EAAShB,MAAO,EACvBG,MAAOa,EAASb,MAAM,CACxB,CAAC,EAEHyB,UAAW,GACXvB,WAAYW,EAASX,WAAY,EACjCwB,OAAQA,IAAM,CACZvH,QAAQkD,IAAI,YAAY,CACzB,EACDsE,kBAAoBxM,GACdhC,EAAM2G,OAAO8H,eAAiB,KAAa,GACxCX,EAAmB9N,EAAM2G,OAAO8H,aAAa,EAAEzM,EAAMgD,OAAO,EAGzE,CAAC,EAEDuE,OAAAA,EAAa,IAAM,CACjBvC,QAAQkD,IAAI,OAAQrH,EAAQ,CAAA,EAC5B6K,EAASjB,UAAU5J,EAAM,CAAE,CAC7B,CAAC,EAED6L,EAAQ,IAAM1H,QAAQkD,IAAI,uBAAuB,CAAC,EAClDyE,GAAU,IAAM3H,QAAQkD,IAAI,yBAAyB,CAAC,EAEtD/I,EACGwC,EAAM,CAAA,IACLuB,QAAM,CAAA,OAAA/D,EACHd,EAAiB,CAAA,IAChBsB,MAAI,CAAA,OAAE3B,EAAM2G,OAAOhF,MAAQoC,EAAM,EAAC,aAAa,CAAC,EAAA,IAChDzC,MAAI,CAAA,OAAAH,EAAGyN,GAAI,CAAA,CAAA,CAAA,EACX/M,SAAUA,IAAAV,EAAOiF,EAAc,CAAA,IAACO,QAAM,CAAA,OAAE3G,EAAM2G,MAAM,EAAA,IAAErC,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAI,EACxFyH,QAASA,IAAMzF,EAAatG,EAAM2G,OAAOzE,EAAE,CAAC,CAAA,CAAA,EAAA,IAGhD+B,OAAK,CAAA,OAAEjE,EAAM2G,OAAO1C,KAAK,EAAA,IACzBK,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAA,IAC9BI,YAAU,CAAA,OAAE1E,EAAM0E,UAAU,EAAA,IAC5BW,aAAW,CAAA,OAAEqI,EAASrI,WAAW,EAAA,IAAA7D,UAAA,CAAA,OAAAL,EAEhCsM,EAAQ,CAACC,SAAUA,EAAQ,IAAEG,MAAI,CAAA,OAAEA,EAAI,CAAE,EAAA,IAAArM,UAAA,CAAA,OAAAL,EACvCgC,EAAQ,CAAA,IAACN,QAAM,CAAA,OAAEA,EAAM,CAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAIlC,8lBCnEMgM,GAAoD7O,GAAU,CAClE,MAAM+D,EAAOC,IACP8K,EAAaC,KACb,CAAEC,gBAAAA,CAAiB,EAAGrM,EAAS,EAC/B,CAAEsM,YAAAA,CAAa,EAAGC,GAAa,EAC/BlN,EAAQA,IAAMmN,GAASnP,EAAMgC,KAAK,EAClCsI,EAAUA,IAAMtI,EAAO,EAACoN,kBAAiB,EAEzC,CAAEC,QAAAA,CAAS,EAAGC,EAAW,KAAO,CACpCnG,OAAQnJ,EAAMgC,MAAMmH,MACrB,EAAC,EAEI,CAAEnH,MAAOuN,EAAcxE,MAAOyE,CAAkB,EAAIC,GAAS,IACjEC,GAAc,CAACpF,EAAS,CAAA,CAAU,EAAE,CAAC,CAACqF,CAAc,KAAO,CACzDrF,QAASqF,CACV,EAAC,CACJ,EAEMC,EAAYA,IAAMJ,EAAkBK,WAAaN,EAAY,GAAM,KAEzE,OACEpO,EACCC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEsM,EAAA,IAAA,CAACiC,EAAS,CAAE,EAAA,GAAI,CAACZ,EAAgBhP,EAAMgC,KAAK,CAAC,EAAA,IAAAR,UAAA,CAAA,MAAA,EAAA,IAAA,CAAA,MAAAvB,EAAAC,GAAA,EAAAS,EAAAV,EAAAW,WAAAC,EAAAF,EAAAK,YAAAF,EAAAD,EAAAD,WAAAG,EAAAD,EAAAE,YAAAC,EAAAF,EAAAH,WAAAa,EAAAR,EAAAD,YAAA0E,EAAA7E,EAAAG,YAAAE,OAAAA,EAAAP,EAAAQ,EAGlD2O,GAAY,CAAA,IAACC,eAAa,CAAA,OAAE/N,EAAK,EAAGgO,iBAAiB,CAAA,CAAA,CAAA,EAAA9O,EAAAJ,EAAAK,EAInDC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEgO,EAAS,GAAEY,OAAO,EAAE1O,MAAK,GAAAC,SACjC0O,IAAG,IAAA,CAAA,MAAA/I,EAAAhC,KAAAS,OAAAA,EAAA,IAAA0C,EAAAnB,QAEIgJ,GAAaD,CAAG,CAAC,CAAA,EAAA/I,CAAA,GAAA,CAKzB,CAAA,CAAA,EAAAlG,EAAAW,QAMQ,IAAMqN,EAAYjP,EAAMgC,MAAMmH,MAAM,EAACjI,EAAAD,EAAAE,EAE7CiP,GAAe,CAAA,IAACjH,QAAM,CAAA,OAAEnJ,EAAMgC,MAAMmH,MAAM,CAAA,CAAA,CAAA,EAAAjI,EAAAO,EAErBsC,IAAAA,EAAI,EAAG,sBAAsB,CAAC,EAAA7C,EAAAwE,EAGpCoJ,IAAAA,EAAW9M,EAAK,EAAGqO,gBAAiB,CAAA,CAAC,EAAApQ,CAAA,GAAA,GAAA,IAAA,CAAA,MAAAiH,EAAAxF,KAAAR,OAAAA,EAAAgG,EAAA/F,EAG1DC,EAAI,CAAA,IACHC,MAAI,CAAA,OAAEkO,EAAY,CAAE,EAAA,IACpBtK,UAAQ,CAAA,OAAA,IAAA,CAAA,MAAAmC,EAAA7B,GAAA,EAAA8B,EAAAD,EAAAxG,WAAAM,OAAAA,EAAAkG,EAAA,IAEHrD,EAAM,EAAC,iBAAiB,EAACsD,CAAA,EAAAnG,EAAAkG,EAAGkD,EAAO,IAAA,EAAAlD,CAAA,IAAA,EAGxC7F,MAAK,GAAAC,SAEHwK,GAAE7K,EAAMmP,GAAQ,CAACtO,MAAOgK,CAAE,CAAA,CAAI,CAAA,CAAA,EAAA9E,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA,CAK1C,EAE+BpF,EAAA,CAAA,OAAA,CAAA,sWC1F/ByO,GAAe,CAACvQ,EAAQ,CAAE,KAAA,IAAA,CAAA,MAAAC,EAAAC,KAAAC,OAAAA,EAAAF,EAA4HD,EAAK,GAAA,EAAA,EAAAC,CAAA,GAAuP,ssBCqB5YuQ,GAA0CxQ,GAAU,CACxD,MAAM+D,EAAOC,IACP,CAAEgL,gBAAAA,CAAiB,EAAGrM,EAAS,EAC/B,CAAEsM,YAAAA,CAAa,EAAGC,GAAa,EAE/BlN,EAAQ6H,EAAW,IAAM4G,GAAWzQ,EAAMgC,KAAK,CAAC,EAEhD,CAAEqN,QAASqB,CAAe,EAAGpB,EAAW,KAAO,CACnDnG,OAAQnH,EAAO,EAAC2O,aAAa,CAC9B,EAAC,EAEI,CAAEtB,QAASuB,EAAkB7F,MAAO8F,GAA0BvB,EAAW,IAC7EI,GAAc,CAAC1N,EAAK,EAAG8O,aAAY,CAAE,CAAC,EAAE,CAAC,CAAC3H,CAAM,KAAO,CACrDA,OAAAA,CACD,EAAC,CACJ,EAEM4H,EAAa/F,GAAY,KAAO,CACpCC,SAAU,CAAC,+BAAgC2F,GAAkB,EAC7DI,QAASA,CAAC,CAAE/F,SAAAA,CAAS,IAAM,CACzB,KAAM,CAAGgG,CAAAA,CAAM,EAAIhG,EACnB,GAAIgG,GAAU,KACd,OAAOC,GAA6BD,CAAM,CAC3C,EACDE,UAAW,EAAI,GAAK,IACpBC,OAAQ,EAAI,GAAK,GAAK,GAAK,GAC5B,EAAC,EAEIC,EAAWA,IAAM,CACrB,MAAMhC,EAAUuB,IACVU,EAAaT,EAAsBU,KACnCC,EAAgBT,EAAWQ,KAEjC,GADIlC,GAAW,MAAQiC,GAAc,MAAQE,GAAiB,MAC1D,EAAIA,EAAcC,aAAeD,EAAcE,aAAe,MAAO,MAAO,GAEhF,MAAMC,EAAcC,GAAsBvC,CAAO,EACjD,GAAIsC,GAAe,KAAM,OAAO,KAEhC,MAAME,EAAsBL,EAAcE,YAEpChI,EAASoI,GAAiB,CAC9BrB,WAAYzO,EAAK,EAAG+P,SACpBJ,YAAAA,EACAE,oBAAAA,CACF,CAAC,EACD7K,eAAQkD,IAAI,SAAUR,CAAM,EAErBA,EAAOsI,SAGhB,OAAA7Q,EACGC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEsM,EAACqB,IAAAA,CAAAA,EAAgBhP,EAAMgC,KAAK,CAAC,KAAIqP,GAAU,EAAA,IAAA7P,UAAA,CAAA,MAAA,EAAA,IAAA,CAAA,MAAAvB,EAAAyB,GAAA,EAAAf,EAAAV,EAAAW,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAG,YAAAD,EAAAJ,EAAAK,YAAAC,EAAAF,EAAAH,WAAA8E,EAAAzE,EAAAD,YAAAkG,EAAAxB,EAAA9E,WAAAuG,EAAAD,EAAAlG,YAAAE,OAAAA,EAAAL,EAAAM,EAI9CoP,GAAI,CAAA,CAAA,CAAA,EAAArP,EAAAJ,EAEkCmR,IAAAA,GAAejQ,EAAK,EAAGkQ,WAAY,CAAA,CAAC,EAAAhR,EAAAD,EAAAE,EAI1EC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEqP,EAAa,GAAIT,SAAW,IAAI,EAAA,IAAAzO,UAAA,CAAA,MAAAC,EAAAvB,KAAA0F,OAAAA,EAAA,IAAA0C,EAAA7G,QAEnCiP,EAAe,GAAET,OAAO,CAAA,EAAAxO,CAAA,CAAA,CAAA,CAAA,EAAAyF,EAAAtF,QAUtB,IAAMqN,EAAYjN,EAAO,EAAC2O,aAAY,CAAE,EAACzP,EAAAgG,EAAA/F,EAEjDiP,GAAe,CAAA,IAACjH,QAAM,CAAA,OAAEnH,EAAK,EAAG2O,cAAc,CAAA,CAAA,CAAA,EAAAzP,EAAAiG,EAEzBpD,IAAAA,EAAI,EAAG,qBAAqB,CAAC,EAAA9D,IAAAkB,EAAAA,EAI1DC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEW,EAAO,EAACmQ,YAAW,EAAGnN,QAAQ+E,OAAS,CAAC,EAAA,IAAAvI,UAAA,CAAA,MAAA4F,EAAAjC,KAAAjE,OAAAA,EAAAkG,EAAA,IAE/CpF,EAAO,EAACmQ,YAAW,EAAGnN,OAAO,EAAAoC,CAAA,EAAAjG,EAAAA,EAGjCC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEW,EAAO,EAACoQ,cAAe,GAAI,IAAI,EAAA,IAAA5Q,UAAA,CAAA,MAAA6F,EAAA9B,KAAArE,OAAAA,EAAAmG,EAAAlG,EAEtCqJ,GAAgB,CAAA,IAACF,SAAO,CAAA,OAAEtI,EAAK,EAAGoQ,eAAe,CAAA,CAAA,CAAA,EAAA/K,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAK5D,EAE0BvF,EAAA,CAAA,OAAA,CAAA,mCCpGpBuQ,GAA8CrS,GAAU,CAC5D,KAAM,CAAEgP,gBAAAA,CAAiB,EAAGrM,EAAS,EAErC,OAAAxB,EACGoG,EAAG,CAAA,IAACC,MAAI,CAAA,OAAExH,EAAM6C,MAAM,EAAArB,SACnBQ,GAAKb,EACJC,EAAI,CAAA,IAACC,MAAI,CAAA,MAAE,CAAC2N,EAAgBhN,CAAK,CAAC,EAAA,IAAAR,UAAA,CAAA,OAAAL,EAChCmC,EAAM,CAAA,IAAC2B,UAAQ,CAAA,OAAA/E,GAAA,CAAA,EAAA,IAAAsB,UAAA,CAAA,MAAAL,CAAAA,EACboC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEW,EAAMoJ,OAASV,EAAkB,EAAA,IAAAlJ,UAAA,CAAA,OAAAL,EAC3CoJ,EAAU,CAAA,IAAA/I,UAAA,CAAA,OAAAL,EACRmP,GAAQ,CAACtO,MAAOA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,EAAAb,EAAAA,EAGzBoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEW,EAAMoJ,OAASV,EAAa,EAAA,IAAAlJ,UAAA,CAAA,OAAAL,EACtCoJ,EAAU,CAAA,IAAA/I,UAAA,CAAA,OAAAL,EACRmR,GAAQ,CAACtQ,MAAOA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,EAAAb,EAAAA,EAIzBoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEW,EAAMoJ,OAASV,EAAW,EAAA,IAAAlJ,UAAA,CAAA,OAAAL,EACpCoJ,EAAU,CAAA,IAAA/I,UAAA,CAAA,OAAAL,EACRoR,GAAM,CAACvQ,MAAOA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,EAAAb,EAAAA,EAGvBoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEW,EAAMoJ,OAASV,EAAQ,EAAA,IAAAlJ,UAAA,CAAA,OAAAL,EACjCoJ,EAAU,CAAA,IAAA/I,UAAA,CAAA,OAAAL,EACRqP,GAAU,CAACxO,MAAOA,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAKjC,CAAA,CAGP,EC7BMwQ,GAAiExS,GAAU,CAC/E,MAAM+D,EAAOC,IACP,CAAEtB,OAAAA,EAAQ4D,aAAAA,CAAc,EAAG3D,EAAS,EAEpC+K,EAAWrB,EAAY,KAAO,CAAEG,SAAU,IAAM,EAAC,EAEjD,CAAE3J,OAAQ4P,EAAe5E,KAAAA,CAAM,EAAG/K,EAAgB,KAAO,CAC7DC,UAAWL,EAAM,EAAGK,UACpBC,QAAS,CACP,CACEC,MAAO,CAAC,EAAG,EAAG,EAAG,IAAI,EACrB,KAAM,CAACjD,EAAM2G,OAAOwC,MAAM,EAC1BjG,MAAO,GACPwJ,MAAOgB,EAAShB,MAAO,EACvBG,MAAOa,EAASb,MAAM,CACxB,CAAC,EAEHyB,UAAW,GACXE,kBAAoBxM,GACdhC,EAAM2G,OAAO8H,eAAiB,KAAa,GACxCX,EAAmB9N,EAAM2G,OAAO8H,aAAa,EAAEzM,EAAMgD,OAAO,CAEtE,EAAC,EAEFuE,OAAAA,EAAa,IAAMmE,EAASjB,UAAUgG,EAAa,CAAE,CAAC,EAEtDtR,EACGwC,EAAM,CAAA,IACLuB,QAAM,CAAA,OAAA/D,EACHd,EAAiB,CAAA,IAChBsB,MAAI,CAAA,OAAE3B,EAAM2G,OAAOhF,MAAQoC,EAAM,EAAC,qBAAqB,CAAC,EAAA,IACxDzC,MAAI,CAAA,OAAAH,EAAGuR,GAAI,CAAA,CAAA,CAAA,EACX7Q,SAAUA,IAAAV,EAAOiF,EAAc,CAAA,IAACO,QAAM,CAAA,OAAE3G,EAAM2G,MAAM,EAAA,IAAErC,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAI,EACxFyH,QAASA,IAAMzF,EAAatG,EAAM2G,OAAOzE,EAAE,CAAC,CAAA,CAAA,EAAA,IAGhD+B,OAAK,CAAA,OAAEjE,EAAM2G,OAAO1C,KAAK,EAAA,IACzBK,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAA,IAC9BI,YAAU,CAAA,OAAE1E,EAAM0E,UAAU,EAAA,IAC5BW,aAAW,CAAA,OAAEqI,EAASrI,WAAW,EAAA,IAAA7D,UAAA,CAAA,OAAAL,EAEhCsM,EAAQ,CAACC,SAAUA,EAAQ,IAAEG,MAAI,CAAA,OAAEA,EAAI,CAAE,EAAA,IAAArM,UAAA,CAAA,OAAAL,EACvCkR,GAAY,CAAA,IAACxP,QAAM,CAAA,OAAE4P,EAAa,CAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAI7C,EC9CME,GAAmD3S,GAAU,CACjE,MAAM+D,EAAOC,IACP,CAAEtB,OAAAA,EAAQ4D,aAAAA,CAAc,EAAG3D,EAAS,EAEpC+K,EAAWrB,EAAY,KAAO,CAAEG,SAAU,IAAM,EAAC,EAEjD,CAAE3J,OAAAA,EAAQgL,KAAAA,CAAM,EAAG/K,EAAgB,KAAO,CAC9CC,UAAWL,EAAM,EAAGK,UACpBC,QAAS,CACP,CACEC,MAAO,CAAC,EAAG,CAAC,EACZmL,QAAS,CAACpO,EAAM2G,OAAOwC,MAAM,EAC7BjG,MAAO,GACPwJ,MAAOgB,EAAShB,MAAO,EACvBG,MAAOa,EAASb,MAAM,CACxB,CAAC,EAEHyB,UAAW,GACXE,kBAAoBxM,GACdhC,EAAM2G,OAAO8H,eAAiB,KAAa,GACxCX,EAAmB9N,EAAM2G,OAAO8H,aAAa,EAAEzM,EAAMgD,OAAO,CAEtE,EAAC,EAEFuE,OAAAA,EAAa,IAAMmE,EAASjB,UAAU5J,EAAM,CAAE,CAAC,EAE/C1B,EACGwC,EAAM,CAAA,IACLuB,QAAM,CAAA,OAAA/D,EACHd,EAAiB,CAAA,IAChBsB,MAAI,CAAA,OAAE3B,EAAM2G,OAAOhF,MAAQoC,EAAM,EAAC,cAAc,CAAC,EAAA,IACjDzC,MAAI,CAAA,OAAAH,EAAGyR,GAAI,CAAA,CAAA,CAAA,EACX/Q,SAAUA,IAAAV,EAAOiF,EAAc,CAAA,IAACO,QAAM,CAAA,OAAE3G,EAAM2G,MAAM,EAAA,IAAErC,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAI,EACxFyH,QAASA,IAAMzF,EAAatG,EAAM2G,OAAOzE,EAAE,CAAC,CAAA,CAAA,EAAA,IAGhD+B,OAAK,CAAA,OAAEjE,EAAM2G,OAAO1C,KAAK,EAAA,IACzBK,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAA,IAC9BI,YAAU,CAAA,OAAE1E,EAAM0E,UAAU,EAAA,IAC5BW,aAAW,CAAA,OAAEqI,EAASrI,WAAW,EAAA,IAAA7D,UAAA,CAAA,OAAAL,EAEhCsM,EAAQ,CAACC,SAAUA,EAAQ,IAAEG,MAAI,CAAA,OAAEA,EAAI,CAAE,EAAA,IAAArM,UAAA,CAAA,OAAAL,EACvCgC,EAAQ,CAAA,IAACN,QAAM,CAAA,OAAEA,EAAM,CAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAIlC,EC9CMgQ,GAA2D7S,GAAU,CACzE,MAAM+D,EAAOC,IACP,CAAEtB,OAAAA,EAAQ4D,aAAAA,CAAc,EAAG3D,EAAS,EAEpC+K,EAAWrB,EAAY,KAAO,CAAEG,SAAU,IAAM,EAAC,EAEjD,CAAE3J,OAAQiQ,EAAWjF,KAAAA,CAAM,EAAG/K,EAAgB,KAAO,CACzDC,UAAWL,EAAM,EAAGK,UACpBC,QAAS,CACP,CACEC,MAAO,CAAC,CAAC,EACTmL,QAAS,CAACpO,EAAM2G,OAAOwC,MAAM,EAC7BjG,MAAO,GACPwJ,MAAOgB,EAAShB,MAAO,EACvBG,MAAOa,EAASb,MAAM,CACxB,CAAC,EAEHyB,UAAW,GACXE,kBAAoBxM,GACdhC,EAAM2G,OAAO8H,eAAiB,KAAa,GACxCX,EAAmB9N,EAAM2G,OAAO8H,aAAa,EAAEzM,EAAMgD,OAAO,CAEtE,EAAC,EAEFuE,OAAAA,EAAa,IAAMmE,EAASjB,UAAUqG,EAAS,CAAE,CAAC,EAElD3R,EACGwC,EAAM,CAAA,IACLuB,QAAM,CAAA,OAAA/D,EACHd,EAAiB,CAAA,IAChBsB,MAAI,CAAA,OAAE3B,EAAM2G,OAAOhF,MAAQoC,EAAM,EAAC,kBAAkB,CAAC,EAAA,IACrDzC,MAAI,CAAA,OAAAH,EAAG4R,GAAK,CAAA,CAAA,CAAA,EACZlR,SAAUA,IAAAV,EAAOiF,EAAc,CAAA,IAACO,QAAM,CAAA,OAAE3G,EAAM2G,MAAM,EAAA,IAAErC,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAI,EACxFyH,QAASA,IAAMzF,EAAatG,EAAM2G,OAAOzE,EAAE,CAAC,CAAA,CAAA,EAAA,IAGhD+B,OAAK,CAAA,OAAEjE,EAAM2G,OAAO1C,KAAK,EAAA,IACzBK,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAA,IAC9BI,YAAU,CAAA,OAAE1E,EAAM0E,UAAU,EAAA,IAC5BW,aAAW,CAAA,OAAEqI,EAASrI,WAAW,EAAA,IAAA7D,UAAA,CAAA,OAAAL,EAEhCsM,EAAQ,CAACC,SAAUA,EAAQ,IAAEG,MAAI,CAAA,OAAEA,EAAI,CAAE,EAAA,IAAArM,UAAA,CAAA,OAAAL,EACvCkR,GAAY,CAAA,IAACxP,QAAM,CAAA,OAAEiQ,EAAS,CAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAIzC,EC9CME,GAAqDhT,GAAU,CACnE,MAAM+D,EAAOC,IACP,CAAEsC,aAAAA,CAAc,EAAG3D,EAAS,EAE5B+K,EAAWrB,EAAY,KAAO,CAClCG,SAAU,EAAI,GAAK,EACpB,EAAC,EAEI,CAAE3J,OAAAA,EAAQgL,KAAAA,CAAM,EAAG/K,EAAgB,KAAO,CAC9CC,UAAW/C,EAAM2G,OAAO5D,UACxBC,QAAS,CACP,CACEC,MAAO,CAAC,CAAC,EACTC,MAAO,GACPwJ,MAAOgB,EAAShB,MAAO,EACvBG,MAAOa,EAASb,MAAM,CACxB,CAAC,EAEHyB,UAAW,GACXE,kBAAoBxM,GACdhC,EAAM2G,OAAO8H,eAAiB,KAAa,GACxCX,EAAmB9N,EAAM2G,OAAO8H,aAAa,EAAEzM,EAAMgD,OAAO,CAEtE,EAAC,EAEFuE,OAAAA,EAAa,IAAMmE,EAASjB,UAAU5J,EAAM,CAAE,CAAC,EAE/C1B,EACGwC,EAAM,CAAA,IACLuB,QAAM,CAAA,OAAA/D,EACHd,EAAiB,CAAA,IAChBsB,MAAI,CAAA,OAAE3B,EAAM2G,OAAOhF,MAAQoC,EAAM,EAAC,cAAc,CAAC,EAAA,IACjDzC,MAAI,CAAA,OAAAH,EAAG8R,GAAQ,CAAA,CAAA,CAAA,EACfpR,SAAUA,IAAAV,EAAOiF,EAAc,CAAA,IAACO,QAAM,CAAA,OAAE3G,EAAM2G,MAAM,EAAA,IAAErC,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAI,EACxFyH,QAASA,IAAMzF,EAAatG,EAAM2G,OAAOzE,EAAE,CAAC,CAAA,CAAA,EAAA,IAGhD+B,OAAK,CAAA,OAAEjE,EAAM2G,OAAO1C,KAAK,EAAA,IACzBK,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAA,IAC9BI,YAAU,CAAA,OAAE1E,EAAM0E,UAAU,EAAA,IAC5BW,aAAW,CAAA,OAAEqI,EAASrI,WAAW,EAAA,IAAA7D,UAAA,CAAA,OAAAL,EAEhCsM,EAAQ,CAACC,SAAUA,EAAQ,IAAEG,MAAI,CAAA,OAAEA,EAAI,CAAE,EAAA,IAAArM,UAAA,CAAA,OAAAL,EACvCgC,EAAQ,CAAA,IAACN,QAAM,CAAA,OAAEA,EAAM,CAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAIlC,qXC/CMqQ,GAA0DlT,GAAU,CACxE,KAAM,CAACM,EAAkBC,CAAkB,EAAIC,EAAa,EAAK,EAC3D,CAACuK,EAAOoI,CAAQ,EAAI3S,EAAa,EAAE,EAEnC,CAAE6F,WAAAA,CAAY,EAAG1D,EAAS,EAE1BlC,EAAuBA,IAAMF,EAAoBG,GAAY,CAACA,CAAO,EAErE0S,EAAcA,IAAM,CACpBrI,EAAK,IAAO/K,EAAM2G,OAAOoE,OAC7B1E,EAAW,CAAE,GAAGrG,EAAM2G,OAAQoE,MAAOA,EAAM,CAAE,CAAC,GAG1CsI,EAAwDA,IAAM,CAClED,KAGIE,EAA2DtH,GAAO,CACtEmH,EAASnH,EAAGuH,cAAc1O,KAAK,GAG3B2O,EAAgExH,GAAO,CAC3EA,EAAGyH,eAAc,EACjBL,KAGF1E,OAAAA,EAAQ,IAAM,CACZyE,EAASnT,EAAM2G,OAAOoE,KAAK,CAC7B,CAAC,GAED,IAAA,CAAA,MAAA9K,EAAAC,GAAA,EAAAS,EAAAV,EAAAW,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAD,WAAAG,EAAAF,EAAAG,YAAAC,EAAAF,EAAAH,WAAAa,EAAAV,EAAAC,YAAAE,OAAAA,EAAAJ,EAAAK,EAKWuS,GAAe,CAAA,CAAA,CAAA,EAAA3S,EAAA4S,iBAAA,SAGWH,CAAY,EAAAvS,EAAA0S,iBAAA,OAO/BN,CAAU,EAAApS,EAAA0S,iBAAA,SADRL,CAAY,EAAA7R,EAAAG,QAIO,IAAMnB,IAAsBS,EAAAO,EAAAN,EAC1Df,GAAgB,CAAA,CAAA,CAAA,EAAAc,EAAAjB,EAAAkB,EAGpBC,EAAI,CAAA,IAACC,MAAI,CAAA,OAAEf,EAAgB,CAAE,EAAA,IAAAkB,UAAA,CAAA,OAAGxB,EAAM6B,UAAU,CAAA,CAAA,EAAA,IAAA,EAAA+D,MAAA3E,EAAA4D,MATpCkG,EAAO,CAAA,EAAA9K,CAAA,IAY1B,EAQM2T,GAAqD5T,GAAU,CACnE,KAAM,CAAEsG,aAAAA,CAAc,EAAG3D,EAAS,EAE5B+K,EAAWrB,EAAY,KAAO,CAClCG,SAAU,IACX,EAAC,EAEI,CAAE3J,OAAAA,EAAQgL,KAAAA,CAAM,EAAG/K,EAAgB,IAAM,CAC7C,KAAM,CAAEiI,MAAAA,GAAU/K,EAAM2G,OAExB,OAAIoE,EAAMhB,SAAW,EAAU,KAExB,CACLhH,UAAW8Q,GACX7Q,QAAS,CACP,CACEC,MAAO,CAAC,CAAC,EACT6Q,OAAQ/I,EACR7H,MAAO,GACPwJ,MAAOgB,EAAShB,MAAO,EACvBG,MAAOa,EAASb,MAAM,CACxB,CAAC,EAEHyB,UAAW,GACXE,kBAAoBxM,GACdA,EAAMyG,KAAKsL,UAAU,CAAC,CAACC,CAAO,IAAMA,IAAY,SAAWA,IAAY,OAAO,GAAK,EAC9E,GACLhU,EAAM2G,OAAO8H,eAAiB,KAAa,GACxCX,EAAmB9N,EAAM2G,OAAO8H,aAAa,EAAEzM,EAAMgD,OAAO,EAGzE,CAAC,EAEDuE,OAAAA,EAAa,IAAM,CACjBmE,EAASjB,UAAU5J,EAAM,CAAE,CAC7B,CAAC,EAED1B,EACGwC,EAAM,CAAA,IACLuB,QAAM,CAAA,OAAA/D,EACH+R,GAAkB,CAAA,IACjBvM,QAAM,CAAA,OAAE3G,EAAM2G,MAAM,EACpB9E,SAAUA,IAAAV,EAAOiF,EAAc,CAAA,IAACO,QAAM,CAAA,OAAE3G,EAAM2G,MAAM,EAAA,IAAErC,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAI,EACxFyH,QAASA,IAAMzF,EAAatG,EAAM2G,OAAOzE,EAAE,CAAC,CAAA,CAAA,EAAA,IAGhD+B,OAAK,CAAA,OAAEjE,EAAM2G,OAAO1C,KAAK,EAAA,IACzBK,aAAW,CAAA,OAAEtE,EAAMsE,WAAW,EAAA,IAC9BI,YAAU,CAAA,OAAE1E,EAAM0E,UAAU,EAAA,IAC5BW,aAAW,CAAA,OAAEqI,EAASrI,WAAW,EAAA,IAAA7D,UAAA,CAAA,OAAAL,EAEhCsM,EAAQ,CAACC,SAAUA,EAAQ,IAAEG,MAAI,CAAA,OAAEA,EAAI,CAAE,EAAA,IAAArM,UAAA,CAAA,OAAAL,EACvCgC,EAAQ,CAAA,IAACN,QAAM,CAAA,OAAEA,EAAM,CAAE,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAIlC,EAE4Bf,EAAA,CAAA,OAAA,CAAA,mHCnItBmS,GAAUA,IAAM,CACpB,KAAM,CAAEvR,OAAAA,CAAQ,EAAGC,EAAS,EAE5B,OAAA,IAAA,CAAA,MAAA1C,EAAAC,KAAAgB,OAAAA,EAAAjB,EAAAkB,EAEKoG,EAAG,CAAA,IAACC,MAAI,CAAA,OAAE9E,EAAQ,EAACwR,OAAO,EAAA1S,SACxBA,CAACmF,EAAQE,IAAU,CAClB,MAAMvC,EAAcA,IAAMuC,EAAO,EAAG,EAC9BnC,EAAaA,IAAMJ,EAAW,IAAO5B,EAAQ,EAACwR,QAAQnK,OAC5D,OAAA5I,EACGmC,EAAM,CAAA,IAAA9B,UAAA,CAAA,MAAAL,CAAAA,EACJoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEsF,EAAOwN,aAAe,aAAexN,CAAM,EAAEpF,MAAK,GAAAC,SAC3D4S,GAAejT,EACd8M,GAAe,CACdtH,OAAQyN,EAAe,IACvB9P,aAAW,CAAA,OAAEA,EAAW,CAAE,EAAA,IAC1BI,YAAU,CAAA,OAAEA,EAAU,CAAE,CAAA,CAAA,EAE3BvD,EAAAA,EAEFoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEsF,EAAOwN,aAAe,gBAAkBxN,CAAM,EAAEpF,MAAK,GAAAC,SAC9D6S,GAAkBlT,EACjBqR,GAAkB,CACjB7L,OAAQ0N,EAAkB,IAC1B/P,aAAW,CAAA,OAAEA,EAAW,CAAE,EAAA,IAC1BI,YAAU,CAAA,OAAEA,EAAU,CAAE,CAAA,CAAA,EAE3BvD,EAAAA,EAEFoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEsF,EAAOwN,aAAe,SAAWxN,CAAM,EAAEpF,MAAK,GAAAC,SACvD8S,GAAWnT,EACVwR,GAAW,CACVhM,OAAQ2N,EAAW,IACnBhQ,aAAW,CAAA,OAAEA,EAAW,CAAE,EAAA,IAC1BI,YAAU,CAAA,OAAEA,EAAU,CAAE,CAAA,CAAA,EAE3BvD,EAAAA,EAEFoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEsF,EAAOwN,aAAe,aAAexN,CAAM,EAAEpF,MAAK,GAAAC,SAC3D+S,GAAepT,EACd0R,GAAe,CACdlM,OAAQ4N,EAAe,IACvBjQ,aAAW,CAAA,OAAEA,EAAW,CAAE,EAAA,IAC1BI,YAAU,CAAA,OAAEA,EAAU,CAAE,CAAA,CAAA,EAE3BvD,EAAAA,EAEFoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEsF,EAAOwN,aAAe,UAAYxN,CAAM,EAAEpF,MAAK,GAAAC,SACxD+S,GAAepT,EACd6R,GAAY,CACXrM,OAAQ4N,EAAe,IACvBjQ,aAAW,CAAA,OAAEA,EAAW,CAAE,EAAA,IAC1BI,YAAU,CAAA,OAAEA,EAAU,CAAE,CAAA,CAAA,EAE3BvD,EAAAA,EAEFoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEsF,EAAOwN,aAAe,YAAcxN,CAAM,EAAEpF,MAAK,GAAAC,SAC1DgT,GAAcrT,EACb2K,GAAc,CACbnF,OAAQ6N,EAAc,IACtBlQ,aAAW,CAAA,OAAEA,EAAW,CAAE,EAAA,IAC1BI,YAAU,CAAA,OAAEA,EAAU,CAAE,CAAA,CAAA,EAE3BvD,EAAAA,EAEFoC,EAAK,CAAA,IAAClC,MAAI,CAAA,OAAEsF,EAAOwN,aAAe,UAAYxN,CAAM,EAAEpF,MAAK,GAAAC,SACxD+S,GAAepT,EACdyS,GAAY,CACXjN,OAAQ4N,EAAe,IACvBjQ,aAAW,CAAA,OAAEA,EAAW,CAAE,EAAA,IAC1BI,YAAU,CAAA,OAAEA,EAAU,CAAE,CAAA,CAAA,CAE3B,CAAA,CAAA,CAAA,CAAA,CAAA,CAIT,CAAC,CAAA,CAAA,EAAAzE,CAAA,IAIT,ECnFMwU,GAA8B,CAClC,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAiB,EACjD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,mBAAqB,EACrD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,iBAAmB,EACnD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,iBAAmB,EACnD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,mBAAqB,EACrD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAI,EACjE,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,mBAAqB,EACrD,CAAE,IAAK,YAAa,QAAS,CAAE,QAAS,mBAAqB,EAC7D,CAAE,IAAK,YAAa,QAAS,CAAE,QAAS,iBAAmB,EAC3D,CAAE,IAAK,UAAW,QAAS,CAAE,QAAS,iBAAmB,EACzD,CAAE,IAAK,aAAc,QAAS,CAAE,QAAS,mBAAqB,EAC9D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,OAAS,EACzC,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,SAAW,EAC3C,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,gBAAkB,EAClD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,WAAa,EAC7C,CAAE,IAAK,QAAS,QAAS,CAAE,QAAS,iBAAmB,EACvD,CAAE,IAAK,YAAa,QAAS,CAAE,QAAS,kBAAoB,CAC9D,EAOMC,GAAsBC,GAA0B,CAC9C,MAAAC,MAAU,IACN,OAAAD,EAAA,QAASE,GAAa,CAC1BD,EAAA,IAAIC,EAAS,IAAKA,CAAQ,CAAA,CAC/B,EACMD,CACT,EAEME,GAAkB,CAAC,CAAE,UAAAH,EAAYF,GAAiB,WAAAM,KAAuC,CACvF,MAAAC,EAAeN,GAAmBC,CAAS,EAEjDjG,EAAQ,IAAM,CACN,MAAAuG,EAAgBC,GAAUlJ,GAAsB,CAGpD,GAFIA,EAAG,OAAS,WACZA,EAAG,SAAWA,EAAG,QAAUA,EAAG,SAC9BA,EAAG,kBAAkB,qBAAuBA,EAAG,kBAAkB,iBAAkB,OAEvF,MAAM6I,EAAWG,EAAa,IAAIhJ,EAAG,GAAG,EAEpC6I,GAAY,MAEhBE,EAAWF,CAAQ,GAClB,EAAE,EAEE,OAAA,iBAAiB,UAAWI,CAAa,EAEhDtG,GAAU,IAAM,CACP,OAAA,oBAAoB,UAAWsG,CAAa,CAAA,CACpD,CAAA,CACF,CACH,EAEaE,GAAuB,IAAM,CACxC,MAAM3O,EAAUC,KAEAqO,GAAA,CACd,WAAaD,GAAa,CAChBrO,EAAAqO,EAAS,OAAO,EAAE,KACxB,IAAM,QAAQ,MAAM,iBAAiBA,EAAS,GAAG,8BAA8B,EAC9E9N,GAAQ,QAAQ,MAAMA,CAAG,CAAA,CAE9B,CAAA,CACD,CACH,yGCvEM6H,GAAkBA,IAAM,CAC5BuG,KAEA,MAAMC,EAAWC,KACX,CAAEC,cAAAA,CAAe,EAAGC,GAAgB,EAEpCC,EAAOC,KACP,CAAE/S,OAAAA,EAAQgT,kBAAAA,CAAmB,EAAG/S,EAAS,EACzCwG,EAASC,KAEfG,OAAAA,EAAa,IAAM,CACjB7G,IAASK,UAAU6R,IAAI,MAAOe,GAAa,CACzC,GAAI,CACF,MAAMC,EAAQ,MAAMJ,EAAM,EAACK,YAAYF,CAAQ,EAC/CC,EAAME,SAAYC,GAAgB,CAChC/O,QAAQC,MAAO,WAAU0O,CAAS,KAAII,CAAI,EAAC,GAE7CH,EAAMI,QAAU,IAAM,CACpBhP,QAAQoD,KAAM,UAASuL,CAAS,EAAC,EAEpC,OAAQ5O,EAAK,CACZC,QAAQC,MAAM,qBAAsBF,CAAG,CACzC,CACF,CAAC,CACH,CAAC,EAEDwC,EAAa,IAAM,CAEjB,MAAME,EAAIN,IACNM,GAAK,MACPiM,EAAkB,CAAEvM,OAAQM,CAAE,CAAC,CAEnC,CAAC,EAEDiF,EAAQ,IAAM,CACP4G,EAAe,EAACW,UACnBb,EAAS,QAAQ,CAErB,CAAC,EAEDc,GAASnP,GAAQ,CACfC,QAAQC,MAAM,mBAAoBF,CAAG,CACvC,CAAC,GAED,IAAA,CAAA,MAAA9G,EAAAC,KAAAgB,OAAAA,EAAAjB,EAAAkB,EAEKgV,GAAO,CAAA,CAAA,EAAA,IAAA,EAAAjV,EAAAjB,EAAAkB,EACP8S,GAAO,CAAA,CAAA,EAAA,IAAA,EAAA/S,EAAAjB,EAAAkB,EACPiV,GAAW,CAAA,CAAA,EAAA,IAAA,EAAAnW,CAAA,IAGlB","x_google_ignoreList":[0,1,5,6,7,19]}