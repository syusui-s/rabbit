const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ZapReceipt-Bf_noanx.js","assets/index-CHnfD_tN.js","assets/index-D22hNhW-.css","assets/useFollowings-_9Nd1xtA.js","assets/SideBar-CQU8S_bp.js","assets/resolveAsset-Clihk0Uh.js","assets/LazyLoad--2lNJhfc.js","assets/SafeLink-DILlQR1r.js","assets/url-DPIb-kBm.js","assets/lud16ToLnurlPayUrl-CAP06tkv.js","assets/_baseClone-jeufF6n5.js","assets/arrow-left-BXfFPyJ3.js"])))=>i.map(i=>d[i]);
import{s as H,t as v,d as z,c as P,i as u,a as n,h as T,M as C,S as Q,j as w,k as G,l as ae,u as S,b as D,m as me,n as ee,F as O,f as F,p as ne,q as p,r as V,v as de,w as te,x as ge,y as he,z as B,o as Z,A as oe,B as ve,C as fe,_ as ye,R as $e,D as xe,Z as ke,N as le,E as we,G as be}from"./index-CHnfD_tN.js";import{u as X,a as re,b as ce,p as Ce,c as _e,r as Ie,t as Te,B as Se,d as pe,H as Ee,e as Re,f as Le,U as Me,g as Fe,h as Pe,i as De,j as ze,G as Be,M as Ne,k as Ue,S as je,l as qe,m as Ae}from"./SideBar-CQU8S_bp.js";import{A as He}from"./arrow-left-BXfFPyJ3.js";import{u as R,T as K,a as Oe,b as Ke,C as Qe,c as A,E as Ge,d as Ve,e as N,L as U,f as Ze,g as We,h as Je,i as Xe,j as Ye,k as en,R as nn,A as tn,H as on}from"./useFollowings-_9Nd1xtA.js";import{t as ln}from"./url-DPIb-kBm.js";const rn=v('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5m0 6a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5m0 6a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5">'),se=(e={})=>(()=>{const t=rn();return H(t,e,!0),t})(),cn=v('<div class="flex flex-col"><div class="flex h-8 items-center gap-1"><h2 class="flex min-w-0 flex-1 items-center gap-1 ps-2"><span class=truncate></span></h2><button class="flex h-full place-items-center px-2"><span class="inline-block size-4">'),sn=v('<span class="inline-block size-4 shrink-0 text-fg-secondary">'),j=e=>{const[t,l]=P(!1),s=()=>l(o=>!o);return(()=>{const o=cn(),r=o.firstChild,c=r.firstChild,i=c.firstChild,a=c.nextSibling,g=a.firstChild;return u(c,n(T,{get when(){return e.icon},keyed:!0,children:h=>(()=>{const d=sn();return u(d,h),d})()}),i),u(i,()=>e.name),a.$$click=()=>s(),u(g,n(se,{})),u(o,n(T,{get when(){return t()},get children(){return e.settings()}}),null),o})()};z(["click"]);const un=e=>{const t=[e.id],l=e.rootEvent()?.id;l!=null&&t.push(l);const s=e.replyingToEvent()?.id;return s!=null&&t.push(s),G(t)},an=e=>{const{config:t}=w(),l=()=>ae(e.event),{events:s}=R(()=>({relayUrls:t().relayUrls,filters:[{kinds:[1],ids:un(l()),limit:25},{kinds:[1],"#e":[e.event.id],limit:25}],limit:200}));return n(K,{get events(){return[...s()].reverse()}})},mn=e=>n(Q,{get children(){return n(C,{get when(){return e.timelineContent.type==="Replies"&&e.timelineContent},keyed:!0,children:t=>n(an,{get event(){return t.event}})})}}),dn=v('<div class="flex w-[80vw] shrink-0 snap-center snap-always flex-col border-r border-border sm:snap-align-none">'),gn=v('<div class="shrink-0 border-b border-border">'),hn=v('<div class="scrollbar flex flex-col overflow-y-scroll pb-16">'),vn=v('<div class="flex shrink-0 items-center border-b border-border px-2"><button class="flex w-full items-center gap-1"><div class="inline-block size-4"></div><div>'),fn=v('<div class="scrollbar flex max-h-full flex-col overflow-y-scroll scroll-smooth pb-16">'),L=e=>{let t;const l=Oe(),s=S(),o=()=>e.width??"medium";return X(()=>({commandType:"moveToColumn",handler:r=>{r.command==="moveToColumn"&&r.columnIndex===e.columnIndex&&t?.scrollIntoView({behavior:"smooth",inline:"center"})}})),X(()=>({commandType:"moveToLastColumn",handler:()=>{e.lastColumn&&t?.scrollIntoView({behavior:"smooth"})}})),n(Ke.Provider,{value:l,get children(){const r=dn(),c=t;return typeof c=="function"?ee(c,r):t=r,u(r,n(T,{get when(){return l.timelineState.content},keyed:!0,get fallback(){return[(()=>{const i=gn();return u(i,()=>e.header),i})(),(()=>{const i=hn();return u(i,()=>e.children),i})()]},children:i=>[(()=>{const a=vn(),g=a.firstChild,h=g.firstChild,d=h.nextSibling;return g.$$click=()=>l?.clearTimeline(),u(h,n(He,{})),u(d,()=>s.t("column.back")),a})(),(()=>{const a=fn();return u(a,n(mn,{timelineContent:i})),a})()]})),D(i=>me(r,{"sm:w-[500px]":o()==="widest","sm:w-[360px]":o()==="wide","sm:w-[320px]":o()==="medium","sm:w-[280px]":o()==="narrow"},i)),r}})};z(["click"]);const yn=v('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M15.75 19.5 8.25 12l7.5-7.5">'),$n=(e={})=>(()=>{const t=yn();return H(t,e,!0),t})(),xn=v('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0">'),kn=(e={})=>(()=>{const t=xn();return H(t,e,!0),t})(),wn=v('<div class="flex flex-col gap-2 border-b border-border p-2"><div></div><div>'),bn=v('<div class="scrollbar flex h-9 gap-2 overflow-x-auto">'),Cn=v('<div class="flex flex-col border-t border-border"><div class="flex h-10 items-center gap-2"><button class="py-4 pl-2"><span class="inline-block size-4"></span></button><button class="py-4 pr-2"><span class="inline-block size-4"></span></button><div class=flex-1></div><button class="px-2 py-4 text-danger hover:text-rose-600"><span class="inline-block size-4">'),_n=v('<button class="rounded-md border px-4 text-fg-secondary">'),ie=e=>(()=>{const t=wn(),l=t.firstChild,s=l.nextSibling;return u(l,()=>e.title),u(s,()=>e.children),t})(),M=e=>{const t=S(),{saveColumn:l,removeColumn:s,moveColumn:o}=w(),r=re(),c=a=>{l({...e.column,width:a})},i=a=>{o(e.column.id,a),r({command:"moveToColumn",columnIndex:a}).catch(g=>console.error(g))};return(()=>{const a=Cn(),g=a.firstChild,h=g.firstChild,d=h.firstChild,y=h.nextSibling,m=y.firstChild,k=y.nextSibling,$=k.nextSibling,_=$.firstChild;return u(a,n(ie,{get title(){return t.t("column.config.columnWidth")},get children(){const f=bn();return u(f,n(O,{each:["widest","wide","medium","narrow"],children:I=>(()=>{const b=_n();return b.$$click=()=>c(I),u(b,()=>t.t(`column.config.${I}`)),D(x=>{const E=e.column.width===I,q=e.column.width===I,W=e.column.width!==I,J=e.column.width!==I;return E!==x._v$5&&b.classList.toggle("border-fg-secondary",x._v$5=E),q!==x._v$6&&b.classList.toggle("font-bold",x._v$6=q),W!==x._v$7&&b.classList.toggle("border-border",x._v$7=W),J!==x._v$8&&b.classList.toggle("font-normal",x._v$8=J),x},{_v$5:void 0,_v$6:void 0,_v$7:void 0,_v$8:void 0}),b})()})),f}}),g),u(a,n(T,{get when(){return e.renderOtherSettings},keyed:!0,children:f=>f({column:e.column,saveColumn:l})}),g),h.$$click=()=>i(e.columnIndex-1),u(d,n($n,{})),y.$$click=()=>i(e.columnIndex+1),u(m,n(Qe,{})),$.$$click=()=>s(e.column.id),u(_,n(kn,{})),D(f=>{const I=t.t("column.config.moveLeft"),b=t.t("column.config.moveRight"),x=t.t("column.config.removeColumn"),E=t.t("column.config.removeColumn");return I!==f._v$&&F(h,"title",f._v$=I),b!==f._v$2&&F(y,"title",f._v$2=b),x!==f._v$3&&F($,"title",f._v$3=x),E!==f._v$4&&F(_,"aria-label",f._v$4=E),f},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),a})()};z(["click"]);const[Y,In]=ne(()=>P({})),[Tn,Sn]=ne(()=>P({})),pn=e=>{const t=ce(),[l,s]=P(null);return p(()=>{const o=e();if(o==null)return;const{encrypted:r}=o;if(r in Y()){s(Y()[r]);return}const c=t();c!=null&&(Tn()[r]||(Sn(i=>({...i,[r]:!0})),window.nostr?.nip04?.decrypt?.(c,r)?.then(i=>{In(a=>({...a,[r]:i})),s(i)}).catch(i=>{console.error(`failed to decrypt "${r}"`,i)})))}),l},En=e=>{const t=V(()=>de(e.event)),l=pn(()=>{const{content:r}=t();return r==null||r.length===0?null:{id:t().id,encrypted:r}}),s=()=>{const r=l();if(r==null)return[];console.log(r);try{return Ce(r).taggedEventIds()}catch(c){return console.warn(c),[]}},o=()=>t().taggedEventIds();return n(O,{get each(){return[...o(),...s()]},children:r=>n(A,{get children(){return n(Ge,{eventId:r,get ensureKinds(){return[te]}})}})})},Rn=e=>{const t=ge(),l=V(e),s=()=>["useFollowings",l()],o=he(()=>({queryKey:s(),queryFn:({queryKey:c,signal:i})=>{console.debug("useFollowings");const[,a]=c;if(a==null)return Promise.resolve(null);const{kind:g,author:h,identifier:d}=a,y=new Se({type:"ParameterizedReplaceableEvent",kind:g,author:h,identifier:d}),m=y.firstEventPromise().catch(()=>{throw new Error(`parameterized replaceable event not found: ${g}:${h}:${d}`)});return y.onUpdate(k=>{const $=_e(k);t.setQueryData(c,$)}),Ie({task:y,signal:i}),Te(15e3,`useParameterizedReplaceableEvent: ${g}:${h}:${d}`)(m)},staleTime:5*60*1e3,gcTime:4*60*60*1e3}));return{event:()=>o.data??null,query:o}},Ln=e=>{const t=S(),{removeColumn:l}=w(),{event:s}=Rn(()=>({kind:30001,author:e.column.pubkey,identifier:e.column.identifier}));return n(L,{get header(){return n(j,{get name(){return e.column.name??t.t("column.bookmark")},get icon(){return n(pe,{})},settings:()=>n(M,{get column(){return e.column},get columnIndex(){return e.columnIndex}}),onClose:()=>l(e.column.id)})},get width(){return e.column.width},get columnIndex(){return e.columnIndex},get lastColumn(){return e.lastColumn},get children(){return n(T,{get when(){return s()},keyed:!0,children:o=>n(En,{event:o})})}})},Mn=e=>{const t=S(),{config:l,removeColumn:s}=w(),{followingPubkeys:o}=Ve(()=>({pubkey:e.column.pubkey})),r=N(()=>({duration:4*60*60})),{events:c,eose:i}=R(()=>{const a=G([...o()]);return a.length===0?null:{debugId:"following",relayUrls:l().relayUrls,filters:[{kinds:[1,6],authors:a,limit:20,since:r.since(),until:r.until()}],eoseLimit:20,continuous:r.continuous(),onEOSE:()=>{console.log("home: eose")},clientEventFilter:g=>e.column.contentFilter==null?!0:B(e.column.contentFilter)(g.content)}});return p(()=>{console.log("home",c()),r.setEvents(c())}),Z(()=>console.log("home timeline mounted")),oe(()=>console.log("home timeline unmounted")),n(L,{get header(){return n(j,{get name(){return e.column.name??t.t("column.home")},get icon(){return n(Ee,{})},settings:()=>n(M,{get column(){return e.column},get columnIndex(){return e.columnIndex}}),onClose:()=>s(e.column.id)})},get width(){return e.column.width},get columnIndex(){return e.columnIndex},get lastColumn(){return e.lastColumn},get children(){return n(U,{loadMore:r,get eose(){return i()},get children(){return n(K,{get events(){return c()}})}})}})},Fn=v('<svg xmlns=http://www.w3.org/2000/svg fill=none stroke=currentColor stroke-width=1.5 aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round d="M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25">'),Pn=(e={})=>(()=>{const t=Fn();return H(t,e,!0),t})(),Dn=v('<svg xmlns=http://www.w3.org/2000/svg fill=currentColor aria-hidden=true data-slot=icon viewBox="0 0 24 24"><path fill-rule=evenodd d="M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143"clip-rule=evenodd>'),zn=(e={})=>(()=>{const t=Dn();return H(t,e,!0),t})(),Bn=v('<div class="flex items-center gap-1 pl-[2px] text-sm"><span class="webkit-touch-callout-none notification-icon flex h-4 min-w-4 max-w-[64px] shrink-0 select-none place-items-center overflow-hidden"></span><div class="notification-user flex flex-1 gap-1 overflow-hidden"><div class="author-icon size-5 shrink-0 overflow-hidden rounded"></div><div class="flex min-w-0 flex-1 overflow-hidden"><button class="select-text truncate font-bold hover:text-link hover:underline"></button><span class="shrink-0 whitespace-pre"></span></div></div><div class=text-xs>'),Nn=v('<div class="notification-event py-1">'),Un=v('<img alt=icon class="size-full object-cover">'),jn=v("<div class=truncate> "),qn=e=>{const t=S(),l=Ze(),{shouldMuteEvent:s}=w(),{showProfile:o}=Fe(),r=()=>ve(e.event),c=()=>r().lastTaggedEventId(),{profile:i}=Re(()=>({pubkey:e.event.pubkey})),{event:a,query:g}=We(()=>Le([c()])(([y])=>({eventId:y}))),h=()=>g.isSuccess&&a()==null,d=Je(()=>({reactionTypes:r().toReactionTypes()}));return n(T,{get when(){return V(()=>!h())()&&!s(e.event)},get children(){return[(()=>{const y=Bn(),m=y.firstChild,k=m.nextSibling,$=k.firstChild,_=$.nextSibling,f=_.firstChild,I=f.nextSibling,b=k.nextSibling,x=d.emojiRef;return typeof x=="function"?ee(x,m):d.emojiRef=m,u(m,n(Xe,{get reactionTypes(){return r().toReactionTypes()}})),u(y,()=>d.popup(),k),u($,n(T,{get when(){return i()?.picture},keyed:!0,children:E=>(()=>{const q=Un();return D(()=>F(q,"src",ln(E,"icon"))),q})()})),f.$$click=()=>o(e.event.pubkey),u(f,n(Me,{get pubkey(){return e.event.pubkey}})),u(I,()=>t.t("notification.reacted")),u(b,()=>l(r().createdAtAsDate())),y})(),(()=>{const y=Nn();return u(y,n(T,{get when(){return a()},get fallback(){return(()=>{const m=jn(),k=m.firstChild;return u(m,()=>t.t("general.loading"),k),u(m,c,null),m})()},keyed:!0,children:m=>n(Ye,{event:m})})),y})()]}})};z(["click"]);const An=v("<div>unknown event"),Hn=fe(()=>ye(()=>import("./ZapReceipt-Bf_noanx.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]))),ue=e=>{const{shouldMuteEvent:t}=w();return n(O,{get each(){return e.events},children:l=>n(T,{get when(){return!t(l)},get children(){return n(Q,{get fallback(){return An()},get children(){return[n(C,{get when(){return l.kind===te},get children(){return n(A,{get children(){return n(en,{event:l})}})}}),n(C,{get when(){return l.kind===$e},get children(){return n(A,{get children(){return n(qn,{event:l})}})}}),n(C,{get when(){return l.kind===xe},get children(){return n(A,{get children(){return n(nn,{event:l})}})}}),n(C,{get when(){return l.kind===ke},get children(){return n(A,{get children(){return n(Hn,{event:l})}})}})]}})}})})},On=v('<div class="flex gap-1">'),Kn=v('<button type=button class="flex flex-1 flex-col items-center rounded-md border py-1 text-fg-secondary"><span class="inline-block size-4"></span><span class=text-xs>'),Qn={Replies:[1],Repost:[6],Reaction:[7],Zap:[9735]},Gn=e=>{const t=S(),l=[{notificationType:"Replies",title:t.t("column.notificationSettings.types.replies"),icon:n(Pn,{})},{notificationType:"Repost",title:t.t("column.notificationSettings.types.reposts"),icon:n(tn,{})},{notificationType:"Reaction",title:t.t("column.notificationSettings.types.reactions"),icon:n(on,{})},{notificationType:"Zap",title:t.t("column.notificationSettings.types.zap"),icon:n(zn,{})}],s=()=>e.column.notificationTypes??[...le],o=c=>s().includes(c),r=c=>{const i=[...s()];o(c)?i.splice(i.indexOf(c),1):i.push(c),e.saveColumn({...e.column,notificationTypes:i})};return n(ie,{get title(){return t.t("column.notificationSettings.notificationTypes")},get children(){const c=On();return u(c,n(O,{each:l,children:({notificationType:i,title:a,icon:g})=>(()=>{const h=Kn(),d=h.firstChild,y=d.nextSibling;return h.$$click=()=>r(i),F(h,"title",a),u(d,g),u(y,a),D(m=>{const k=!!o(i),$=!!o(i),_=!o(i),f=!o(i);return k!==m._v$&&h.classList.toggle("border-fg-secondary",m._v$=k),$!==m._v$2&&h.classList.toggle("font-bold",m._v$2=$),_!==m._v$3&&h.classList.toggle("border-border",m._v$3=_),f!==m._v$4&&h.classList.toggle("font-normal",m._v$4=f),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),h})()})),c}})},Vn=e=>{const t=S(),{config:l,removeColumn:s}=w(),o=N(()=>({duration:null})),r=()=>e.column.notificationTypes??[...le],c=()=>G(r().flatMap(g=>Qn[g])),{events:i,eose:a}=R(()=>c().length>0?{relayUrls:l().relayUrls,filters:[{kinds:c(),"#p":[e.column.pubkey],limit:20,since:o.since(),until:o.until()}],eoseLimit:20,clientEventFilter:g=>e.column.contentFilter==null?!0:B(e.column.contentFilter)(g.content)}:null);return p(()=>o.setEvents(i())),n(L,{get header(){return n(j,{get name(){return e.column.name??t.t("column.notification")},get icon(){return n(Pe,{})},settings:()=>n(M,{get column(){return e.column},get columnIndex(){return e.columnIndex},renderOtherSettings:Gn}),onClose:()=>s(e.column.id)})},get width(){return e.column.width},get columnIndex(){return e.columnIndex},get lastColumn(){return e.lastColumn},get children(){return n(U,{loadMore:o,get eose(){return a()},get children(){return n(ue,{get events(){return i()}})}})}})};z(["click"]);const Zn=e=>{const t=S(),{config:l,removeColumn:s}=w(),o=N(()=>({duration:null})),{events:r,eose:c}=R(()=>({relayUrls:l().relayUrls,filters:[{kinds:[1,6],authors:[e.column.pubkey],limit:10,since:o.since(),until:o.until()}],eoseLimit:10,clientEventFilter:i=>e.column.contentFilter==null?!0:B(e.column.contentFilter)(i.content)}));return p(()=>o.setEvents(r())),n(L,{get header(){return n(j,{get name(){return e.column.name??t.t("column.posts")},get icon(){return n(De,{})},settings:()=>n(M,{get column(){return e.column},get columnIndex(){return e.columnIndex}}),onClose:()=>s(e.column.id)})},get width(){return e.column.width},get columnIndex(){return e.columnIndex},get lastColumn(){return e.lastColumn},get children(){return n(U,{loadMore:o,get eose(){return c()},get children(){return n(K,{get events(){return r()}})}})}})},Wn=e=>{const t=S(),{config:l,removeColumn:s}=w(),o=N(()=>({duration:null})),{events:r,eose:c}=R(()=>({relayUrls:l().relayUrls,filters:[{kinds:[7],authors:[e.column.pubkey],limit:10,since:o.since(),until:o.until()}],eoseLimit:10,clientEventFilter:i=>e.column.contentFilter==null?!0:B(e.column.contentFilter)(i.content)}));return p(()=>o.setEvents(r())),n(L,{get header(){return n(j,{get name(){return e.column.name??t.t("column.reactions")},get icon(){return n(ze,{})},settings:()=>n(M,{get column(){return e.column},get columnIndex(){return e.columnIndex}}),onClose:()=>s(e.column.id)})},get width(){return e.column.width},get columnIndex(){return e.columnIndex},get lastColumn(){return e.lastColumn},get children(){return n(U,{loadMore:o,get eose(){return c()},get children(){return n(ue,{get events(){return r()}})}})}})},Jn=e=>{const t=S(),{removeColumn:l}=w(),s=N(()=>({duration:4*60*60})),{events:o,eose:r}=R(()=>({relayUrls:e.column.relayUrls,filters:[{kinds:[1],limit:20,since:s.since(),until:s.until()}],eoseLimit:20,clientEventFilter:c=>e.column.contentFilter==null?!0:B(e.column.contentFilter)(c.content)}));return p(()=>s.setEvents(o())),n(L,{get header(){return n(j,{get name(){return e.column.name??t.t("column.relay")},get icon(){return n(Be,{})},settings:()=>n(M,{get column(){return e.column},get columnIndex(){return e.columnIndex}}),onClose:()=>l(e.column.id)})},get width(){return e.column.width},get columnIndex(){return e.columnIndex},get lastColumn(){return e.lastColumn},get children(){return n(U,{loadMore:s,get eose(){return r()},get children(){return n(K,{get events(){return o()}})}})}})},Xn=v('<div class="flex flex-col"><div class="flex h-8 items-center gap-1 px-2"><h2 class="flex items-center gap-1"><span class="inline-block size-4 text-fg-secondary"></span></h2><form class=flex-1><input class="w-full rounded border border-border bg-bg px-1 py-0 ring-border focus:border-border focus:ring-primary"type=text name=query></form><button class=size-4>'),Yn=e=>{const[t,l]=P(!1),[s,o]=P(""),{saveColumn:r}=w(),c=()=>l(d=>!d),i=()=>{s()!==e.column.query&&r({...e.column,query:s()})},a=()=>{i()},g=d=>{o(d.currentTarget.value)},h=d=>{d.preventDefault(),i()};return Z(()=>{o(e.column.query)}),(()=>{const d=Xn(),y=d.firstChild,m=y.firstChild,k=m.firstChild,$=m.nextSibling,_=$.firstChild,f=$.nextSibling;return u(k,n(Ne,{})),$.addEventListener("submit",h),_.addEventListener("blur",a),_.addEventListener("change",g),f.$$click=()=>c(),u(f,n(se,{})),u(d,n(T,{get when(){return t()},get children(){return e.settings()}}),null),D(()=>_.value=s()),d})()},et=e=>{const{removeColumn:t}=w(),l=N(()=>({duration:null})),{events:s,eose:o}=R(()=>{const{query:r}=e.column;return r.length===0?null:{relayUrls:we,filters:[{kinds:[1],search:r,limit:20,since:l.since(),until:l.until()}],eoseLimit:20,clientEventFilter:c=>c.tags.findIndex(([i])=>i==="mostr"||i==="proxy")>=0?!1:e.column.contentFilter==null?!0:B(e.column.contentFilter)(c.content)}});return p(()=>{l.setEvents(s())}),n(L,{get header(){return n(Yn,{get column(){return e.column},settings:()=>n(M,{get column(){return e.column},get columnIndex(){return e.columnIndex}}),onClose:()=>t(e.column.id)})},get width(){return e.column.width},get columnIndex(){return e.columnIndex},get lastColumn(){return e.lastColumn},get children(){return n(U,{loadMore:l,get eose(){return o()},get children(){return n(K,{get events(){return s()}})}})}})};z(["click"]);const nt=v('<div class="scrollbar flex h-full snap-x snap-mandatory flex-row overflow-x-scroll scroll-smooth">'),tt=()=>{const{config:e}=w();return(()=>{const t=nt();return u(t,n(O,{get each(){return e().columns},children:(l,s)=>{const o=()=>s()+1,r=()=>o()===e().columns.length;return n(Q,{get children(){return[n(C,{get when(){return l.columnType==="Following"&&l},keyed:!0,children:c=>n(Mn,{column:c,get columnIndex(){return o()},get lastColumn(){return r()}})}),n(C,{get when(){return l.columnType==="Notification"&&l},keyed:!0,children:c=>n(Vn,{column:c,get columnIndex(){return o()},get lastColumn(){return r()}})}),n(C,{get when(){return l.columnType==="Posts"&&l},keyed:!0,children:c=>n(Zn,{column:c,get columnIndex(){return o()},get lastColumn(){return r()}})}),n(C,{get when(){return l.columnType==="Reactions"&&l},keyed:!0,children:c=>n(Wn,{column:c,get columnIndex(){return o()},get lastColumn(){return r()}})}),n(C,{get when(){return l.columnType==="Relays"&&l},keyed:!0,children:c=>n(Jn,{column:c,get columnIndex(){return o()},get lastColumn(){return r()}})}),n(C,{get when(){return l.columnType==="Bookmark"&&l},keyed:!0,children:c=>n(Ln,{column:c,get columnIndex(){return o()},get lastColumn(){return r()}})}),n(C,{get when(){return l.columnType==="Search"&&l},keyed:!0,children:c=>n(et,{column:c,get columnIndex(){return o()},get lastColumn(){return r()}})})]}})}})),t})()},ot=[{key:"n",command:{command:"openPostForm"}},{key:"h",command:{command:"moveToPrevColumn"}},{key:"j",command:{command:"moveToNextItem"}},{key:"k",command:{command:"moveToPrevItem"}},{key:"l",command:{command:"moveToNextColumn"}},{key:"1",command:{command:"moveToColumn",columnIndex:1}},{key:"2",command:{command:"moveToColumn",columnIndex:2}},{key:"3",command:{command:"moveToColumn",columnIndex:3}},{key:"4",command:{command:"moveToColumn",columnIndex:4}},{key:"5",command:{command:"moveToColumn",columnIndex:5}},{key:"6",command:{command:"moveToColumn",columnIndex:6}},{key:"7",command:{command:"moveToColumn",columnIndex:7}},{key:"8",command:{command:"moveToColumn",columnIndex:8}},{key:"9",command:{command:"moveToColumn",columnIndex:9}},{key:"0",command:{command:"moveToLastColumn"}},{key:"ArrowLeft",command:{command:"moveToPrevColumn"}},{key:"ArrowDown",command:{command:"moveToNextItem"}},{key:"ArrowUp",command:{command:"moveToPrevItem"}},{key:"ArrowRight",command:{command:"moveToNextColumn"}},{key:"f",command:{command:"like"}},{key:"t",command:{command:"repost"}},{key:"r",command:{command:"openReplyForm"}},{key:"?",command:{command:"openHelp"}},{key:"Enter",command:{command:"openItemDetail"}},{key:"Backspace",command:{command:"closeItemDetail"}}],lt=e=>{const t=new Map;return e.forEach(l=>{t.set(l.key,l)}),t},rt=({shortcuts:e=ot,onShortcut:t})=>{const l=lt(e);Z(()=>{const s=Ue(o=>{if(o.type!=="keydown"||o.ctrlKey||o.altKey||o.metaKey||o.target instanceof HTMLTextAreaElement||o.target instanceof HTMLInputElement)return;const r=l.get(o.key);r!=null&&t(r)},50);window.addEventListener("keydown",s),oe(()=>{window.removeEventListener("keydown",s)})})},ct=()=>{const e=re();rt({onShortcut:t=>{e(t.command).then(()=>console.debug(`shortcut key '${t.key}' was processed successfully`),l=>console.error(l))}})},st=v('<div class="absolute inset-0 flex h-svh w-screen touch-manipulation flex-row overflow-hidden">'),it=()=>{ct();const e=Ae(),{config:t,initializeColumns:l}=w(),s=ce();return p(()=>{Promise.allSettled(t().relayUrls.map(async o=>{try{const r=await e().ensureRelay(o);r.onnotice=c=>{console.error(`NOTICE: ${o}: ${c}`)},r.onclose=()=>{console.warn(`CLOSE: ${o}`)}}catch(r){console.error("ensureRelay failed",r)}})).catch(()=>{})}),p(()=>{const o=s();o!=null&&l({pubkey:o})}),be(o=>{console.error("uncaught error: ",o)}),(()=>{const o=st();return u(o,n(je,{}),null),u(o,n(tt,{}),null),u(o,n(qe,{}),null),o})()},ht=Object.freeze(Object.defineProperty({__proto__:null,default:it},Symbol.toStringTag,{value:"Module"}));export{zn as B,ht as H};
//# sourceMappingURL=Home-To3XepUW.js.map
