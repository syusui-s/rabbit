{"version":3,"file":"Permalink-C-hBy4y9.js","sources":["../../src/pages/Permalink.tsx"],"sourcesContent":["import { createEffect, onMount } from 'solid-js';\n\nimport { useNavigate, useParams } from '@solidjs/router';\nimport { decode } from 'nostr-tools/nip19';\n\nimport GlobalModal from '@/components/modal/GlobalModal';\nimport SideBar from '@/components/SideBar';\nimport useModalState from '@/hooks/useModalState';\n\nconst isProfile = (s: string): boolean => /^(npub|nprofile)1[ac-hj-np-z02-9]+$/.test(s);\n\nconst Permalink = () => {\n  const navigate = useNavigate();\n  const params = useParams();\n  const { modalState, showProfile } = useModalState();\n\n  const navigateTop = () => navigate('/');\n\n  onMount(() => {\n    if (params.id != null) {\n      if (isProfile(params.id)) {\n        try {\n          const decoded = decode(params.id);\n          if (decoded.type === 'npub') {\n            showProfile(decoded.data);\n          } else if (decoded.type === 'nprofile') {\n            // TODO support relay URLs\n            showProfile(decoded.data.pubkey);\n          }\n        } catch (err) {\n          window.alert('Invalid ID');\n          navigateTop();\n        }\n      }\n    } else {\n      navigateTop();\n    }\n  });\n\n  createEffect(() => {\n    if (modalState().type === 'Closed') {\n      navigateTop();\n    }\n  });\n\n  return (\n    <div class=\"absolute inset-0 flex w-screen touch-manipulation flex-row overflow-hidden\">\n      <SideBar />\n      <GlobalModal />\n    </div>\n  );\n};\n\nexport default Permalink;\n"],"names":["isProfile","s","test","Permalink","navigate","useNavigate","params","useParams","modalState","showProfile","useModalState","navigateTop","onMount","id","decoded","decode","type","data","pubkey","window","alert","createEffect","_el$","_tmpl$","_$insert","_$createComponent","SideBar","GlobalModal"],"mappings":"0RASMA,EAAaC,GAAuB,sCAAsCC,KAAKD,CAAC,EAEhFE,EAAYA,IAAM,CACtB,MAAMC,EAAWC,IACXC,EAASC,IACT,CAAEC,WAAAA,EAAYC,YAAAA,GAAgBC,EAAc,EAE5CC,EAAcA,IAAMP,EAAS,GAAG,EAEtCQ,OAAAA,EAAQ,IAAM,CACRN,GAAAA,EAAOO,IAAM,MACXb,GAAAA,EAAUM,EAAOO,EAAE,EACjB,GAAA,CACIC,MAAAA,EAAUC,EAAOT,EAAOO,EAAE,EAC5BC,EAAQE,OAAS,OACnBP,EAAYK,EAAQG,IAAI,EACfH,EAAQE,OAAS,YAEdF,EAAAA,EAAQG,KAAKC,MAAM,OAErB,CACZC,OAAOC,MAAM,YAAY,EACbT,GACd,OAGUA,GACd,CACD,EAEDU,EAAa,IAAM,CACbb,EAAAA,EAAaQ,OAAS,UACZL,GACd,CACD,GAED,IAAA,CAAA,MAAAW,EAAAC,IAAAC,OAAAA,EAAAF,EAAAG,EAEKC,EAAO,CAAA,CAAA,EAAA,IAAA,EAAAF,EAAAF,EAAAG,EACPE,EAAW,CAAA,CAAA,EAAA,IAAA,EAAAL,CAAAA,IAGlB"}