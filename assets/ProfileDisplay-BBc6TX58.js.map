{"version":3,"file":"ProfileDisplay-BBc6TX58.js","sources":["../../node_modules/heroicons/24/outline/arrow-path.svg","../../node_modules/heroicons/24/solid/check-circle.svg","../../node_modules/heroicons/24/solid/exclamation-circle.svg","../../src/nostr/builder/createFollowings.ts","../../src/nostr/mutation/useFollowingsMutation.ts","../../node_modules/nostr-tools/lib/esm/nip05.js","../../src/nostr/parseNip05Address.ts","../../src/nostr/useFollowers.ts","../../src/nostr/useVerification.ts","../../src/components/modal/ProfileDisplay.tsx"],"sourcesContent":["export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path fill-rule=\"evenodd\" d=\"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12m13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094z\" clip-rule=\"evenodd\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path fill-rule=\"evenodd\" d=\"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12M12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75m0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5\" clip-rule=\"evenodd\"/></svg>","import * as Kind from 'nostr-tools/kinds';\nimport { type UnsignedEvent } from 'nostr-tools/pure';\n\nimport Tags from '@/nostr/event/Tags';\nimport epoch from '@/utils/epoch';\n\nexport const emptyFollowings = (pubkey: string): UnsignedEvent => ({\n  kind: Kind.Contacts,\n  pubkey,\n  created_at: epoch(),\n  content: '',\n  tags: [],\n});\n\nconst createFollowings = ({\n  pubkey,\n  updatedTags,\n  content,\n}: {\n  pubkey: string;\n  updatedTags: string[][];\n  content: string;\n}): UnsignedEvent => ({\n  kind: Kind.Contacts,\n  pubkey,\n  created_at: epoch(),\n  tags: updatedTags,\n  content,\n});\n\nexport const updateTags = (baseEvent: UnsignedEvent, updater: (tags: string[][]) => string[][]) =>\n  createFollowings({\n    pubkey: baseEvent.pubkey,\n    content: baseEvent.content,\n    updatedTags: updater(baseEvent.tags),\n  });\n\nexport const addPubkey = (baseEvent: UnsignedEvent, pubkey: string) => {\n  if (new Tags(baseEvent.tags).taggedPubkeys().includes(pubkey)) {\n    return baseEvent;\n  }\n  const add = (baseTags: string[][]) => [...baseTags, ['p', pubkey]];\n  return updateTags(baseEvent, add);\n};\n\nexport const removePubkey = (baseEvent: UnsignedEvent, pubkey: string) => {\n  const remove = (baseTags: string[][]) =>\n    baseTags.filter(([name, value]) => !(name === 'p' && value === pubkey));\n  return updateTags(baseEvent, remove);\n};\n\nexport default createFollowings;\n","import { createMemo } from 'solid-js';\n\nimport { useQueryClient } from '@tanstack/solid-query';\n\nimport { addPubkey, removePubkey } from '@/nostr/builder/createFollowings';\nimport usePublishEventMutation, {\n  type PublishEventResult,\n} from '@/nostr/mutation/usePublishEventMutation';\nimport { queryKeyUseFollowings } from '@/nostr/useFollowings';\n\nexport type UseFollowingsMutationProps = {\n  pubkey?: string;\n  onSuccess?: (result: PublishEventResult) => void;\n  onError?: (err: Error) => void;\n};\n\nconst useFollowingsMutation = (propsProvider: () => UseFollowingsMutationProps) => {\n  const queryClient = useQueryClient();\n\n  const props = createMemo(propsProvider);\n\n  const { mutation, wrapMutate } = usePublishEventMutation(() => ({\n    mutationKey: ['useFollowingsMutation', props().pubkey],\n    onSuccess: (results) => {\n      const { pubkey } = props();\n      if (pubkey != null) {\n        const queryKey = queryKeyUseFollowings({ pubkey });\n        queryClient\n          .invalidateQueries({ queryKey })\n          .catch((err) => console.error('failed to invalidate followings', err));\n      }\n      props().onSuccess?.(results);\n    },\n    onError: (err) => {\n      props().onError?.(err);\n    },\n  }));\n\n  const follow = wrapMutate(addPubkey);\n  const unfollow = wrapMutate(removePubkey);\n\n  return { mutation, follow, unfollow };\n};\n\nexport default useFollowingsMutation;\n","// nip05.ts\nvar NIP05_REGEX = /^(?:([\\w.+-]+)@)?([\\w_-]+(\\.[\\w_-]+)+)$/;\nvar isNip05 = (value) => NIP05_REGEX.test(value || \"\");\nvar _fetch;\ntry {\n  _fetch = fetch;\n} catch (_) {\n  null;\n}\nfunction useFetchImplementation(fetchImplementation) {\n  _fetch = fetchImplementation;\n}\nasync function searchDomain(domain, query = \"\") {\n  try {\n    const url = `https://${domain}/.well-known/nostr.json?name=${query}`;\n    const res = await _fetch(url, { redirect: \"manual\" });\n    if (res.status !== 200) {\n      throw Error(\"Wrong response code\");\n    }\n    const json = await res.json();\n    return json.names;\n  } catch (_) {\n    return {};\n  }\n}\nasync function queryProfile(fullname) {\n  const match = fullname.match(NIP05_REGEX);\n  if (!match)\n    return null;\n  const [, name = \"_\", domain] = match;\n  try {\n    const url = `https://${domain}/.well-known/nostr.json?name=${name}`;\n    const res = await _fetch(url, { redirect: \"manual\" });\n    if (res.status !== 200) {\n      throw Error(\"Wrong response code\");\n    }\n    const json = await res.json();\n    const pubkey = json.names[name];\n    return pubkey ? { pubkey, relays: json.relays?.[pubkey] } : null;\n  } catch (_e) {\n    return null;\n  }\n}\nasync function isValid(pubkey, nip05) {\n  const res = await queryProfile(nip05);\n  return res ? res.pubkey === pubkey : false;\n}\nexport {\n  NIP05_REGEX,\n  isNip05,\n  isValid,\n  queryProfile,\n  searchDomain,\n  useFetchImplementation\n};\n","import { NIP05_REGEX } from 'nostr-tools/nip05';\n\nexport type ParsedNip05Address = {\n  user?: string;\n  domain: string;\n  ident: string;\n};\n\nconst parseNip05Address = (ident: string | undefined): ParsedNip05Address | null => {\n  if (ident == null || ident.length === 0) return null;\n\n  const match = ident.match(NIP05_REGEX);\n  if (match == null) return null;\n\n  const [, user, domain] = match;\n\n  // (This is not standardized in NIP-05)\n  // local-part can be optional here. nip05 can contain only the domain name.\n  // This follows nostr-tools implementation.\n  if (user == null || user === '_') {\n    return { user: '_', domain, ident: domain };\n  }\n\n  return { user, domain, ident };\n};\n\nexport default parseNip05Address;\n","import { createMemo } from 'solid-js';\n\nimport uniq from 'lodash/uniq';\nimport * as Kind from 'nostr-tools/kinds';\n\nimport useConfig from '@/core/useConfig';\nimport useSubscription from '@/nostr/useSubscription';\n\nexport type UseFollowersProps = {\n  pubkey: string;\n};\n\nexport default function useFollowers(propsProvider: () => UseFollowersProps) {\n  const { config } = useConfig();\n  const props = createMemo(propsProvider);\n\n  const { events } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [{ kinds: [Kind.Contacts], '#p': [props().pubkey] }],\n    limit: 1000000,\n    eoseLimit: 1000000,\n    continuous: false,\n  }));\n\n  const followersPubkeys = () => uniq(events()?.map((ev) => ev.pubkey));\n\n  const count = () => followersPubkeys().length;\n\n  return { followersPubkeys, count };\n}\n","import { createMemo, type Accessor } from 'solid-js';\n\nimport { createQuery, type CreateQueryResult } from '@tanstack/solid-query';\nimport { queryProfile } from 'nostr-tools/nip05';\nimport { type ProfilePointer } from 'nostr-tools/nip19';\n\nexport type UseVerificationProps = {\n  nip05: string;\n};\n\nexport type UseVerification = {\n  verification: Accessor<ProfilePointer | null>;\n  query: CreateQueryResult<ProfilePointer | null>;\n};\n\nconst useVerification = (propsProvider: () => UseVerificationProps | null): UseVerification => {\n  const props = createMemo(propsProvider);\n  const genQueryKey = () => ['useVerification', props()] as const;\n\n  const query = createQuery(() => ({\n    queryKey: genQueryKey(),\n    queryFn: ({ queryKey }) => {\n      const [, currentProps] = queryKey;\n      if (currentProps == null) return Promise.resolve(null);\n      const { nip05: nip05string } = currentProps;\n      return queryProfile(nip05string);\n    },\n    staleTime: 30 * 60 * 1000, // 30 min\n    gcTime: 24 * 60 * 60 * 1000, // 24 hour\n  }));\n\n  const verification = () => query?.data ?? null;\n\n  return { verification, query };\n};\n\nexport default useVerification;\n","import { Component, createSignal, createMemo, Show, Switch, Match, createEffect } from 'solid-js';\n\nimport ArrowPath from 'heroicons/24/outline/arrow-path.svg';\nimport Bolt from 'heroicons/24/outline/bolt.svg';\nimport EllipsisHorizontal from 'heroicons/24/outline/ellipsis-horizontal.svg';\nimport GlobeAlt from 'heroicons/24/outline/globe-alt.svg';\nimport CheckCircle from 'heroicons/24/solid/check-circle.svg';\nimport ExclamationCircle from 'heroicons/24/solid/exclamation-circle.svg';\nimport { type UnsignedEvent } from 'nostr-tools/pure';\n\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport TextNoteContentDisplay from '@/components/event/textNote/TextNoteContentDisplay';\nimport BasicModal from '@/components/modal/BasicModal';\nimport EventDebugModal from '@/components/modal/EventDebugModal';\nimport UserList from '@/components/modal/UserList';\nimport ZapRequestModal from '@/components/modal/ZapRequestModal';\nimport Timeline from '@/components/timeline/Timeline';\nimport SafeLink from '@/components/utils/SafeLink';\nimport useContextMenu from '@/components/utils/useContextMenu';\nimport { createFollowingColumn, createPostsColumn } from '@/core/column';\nimport useConfig from '@/core/useConfig';\nimport { useRequestCommand } from '@/hooks/useCommandBus';\nimport useModalState from '@/hooks/useModalState';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport { emptyFollowings } from '@/nostr/builder/createFollowings';\nimport { genericEvent } from '@/nostr/event';\nimport useFollowingsMutation from '@/nostr/mutation/useFollowingsMutation';\nimport { PublishEventResult } from '@/nostr/mutation/usePublishEventMutation';\nimport parseNip05Address from '@/nostr/parseNip05Address';\nimport parseTextNote, { toResolved } from '@/nostr/parseTextNote';\nimport useFollowers from '@/nostr/useFollowers';\nimport useFollowings, { fetchLatestFollowings } from '@/nostr/useFollowings';\nimport useProfile from '@/nostr/useProfile';\nimport usePubkey from '@/nostr/usePubkey';\nimport useSubscription from '@/nostr/useSubscription';\nimport useVerification from '@/nostr/useVerification';\nimport ensureNonNull from '@/utils/ensureNonNull';\nimport npubEncodeFallback from '@/utils/npubEncodeFallback';\n\nexport type ProfileDisplayProps = {\n  pubkey: string;\n  onClose?: () => void;\n};\n\nconst FollowersCount: Component<{ pubkey: string }> = (props) => {\n  const { count } = useFollowers(() => ({\n    pubkey: props.pubkey,\n  }));\n\n  return <>{count()}</>;\n};\n\nconst ProfileDisplay: Component<ProfileDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, addMutedPubkey, removeMutedPubkey, isPubkeyMuted, saveColumn } = useConfig();\n  const request = useRequestCommand();\n  const myPubkey = usePubkey();\n  const { showProfileEdit } = useModalState();\n\n  const npub = createMemo(() => npubEncodeFallback(props.pubkey));\n\n  const [hoverFollowButton, setHoverFollowButton] = createSignal(false);\n  const [showFollowers, setShowFollowers] = createSignal(false);\n  const [modal, setModal] = createSignal<'Following' | 'EventDebugModal' | 'ZapRequest' | null>(\n    null,\n  );\n  const closeModal = () => setModal(null);\n\n  const {\n    profile,\n    event: profileEvent,\n    query: profileQuery,\n  } = useProfile(() => ({\n    pubkey: props.pubkey,\n  }));\n  const { verification, query: verificationQuery } = useVerification(() =>\n    ensureNonNull([profile()?.nip05] as const)(([nip05]) => ({ nip05 })),\n  );\n  const nip05Identifier = () => parseNip05Address(profile()?.nip05);\n  const isVerified = () => verification()?.pubkey === props.pubkey;\n  const isMuted = () => isPubkeyMuted(props.pubkey);\n\n  const aboutParsed = createMemo(() => {\n    const ev = profileEvent();\n    const about = profile()?.about;\n    if (ev == null || about == null) return undefined;\n\n    const parsed = parseTextNote(about);\n    const resolved = toResolved(parsed, genericEvent(ev));\n    return resolved;\n  });\n\n  const { followingPubkeys: myFollowingPubkeys, query: myFollowingQuery } = useFollowings(() =>\n    ensureNonNull([myPubkey()] as const)(([pubkeyNonNull]) => ({\n      pubkey: pubkeyNonNull,\n    })),\n  );\n  const following = () => myFollowingPubkeys().includes(props.pubkey);\n\n  const { followingPubkeys: userFollowingPubkeys, query: userFollowingQuery } = useFollowings(\n    () => ({ pubkey: props.pubkey }),\n  );\n\n  const followed = () => {\n    const p = myPubkey();\n    return p != null && userFollowingPubkeys().includes(p);\n  };\n\n  const {\n    mutation: followingsMutation,\n    follow,\n    unfollow,\n  } = useFollowingsMutation(() => ({ pubkey: myPubkey() }));\n\n  const updateFollows = async (action: (ev: UnsignedEvent) => Promise<PublishEventResult>) => {\n    try {\n      const p = myPubkey();\n      if (p == null) return;\n\n      if (followingsMutation.isPending) return;\n\n      const latest = await fetchLatestFollowings({ pubkey: p });\n\n      if (\n        (latest.data() == null || latest.followingPubkeys().length === 0) &&\n        !window.confirm(i18n.t('profile.confirmUpdateEvenIfEmpty'))\n      )\n        return;\n\n      if ((latest?.data()?.created_at ?? 0) < (myFollowingQuery.data?.created_at ?? 0)) {\n        window.alert(i18n.t('profile.failedToFetchLatestFollowList'));\n        return;\n      }\n\n      const baseEvent = latest.data() ?? emptyFollowings(p);\n      await action(baseEvent);\n    } catch (err) {\n      console.error('failed to update contact list', err);\n      window.alert(i18n.t('profile.failedToUpdateFollowList'));\n    }\n  };\n\n  const doFollow = () => {\n    updateFollows((latestEvent) => follow(latestEvent, props.pubkey)).catch((err) => {\n      console.log('failed to follow', err);\n    });\n  };\n\n  const doUnfollow = () => {\n    if (!window.confirm(i18n.t('profile.confirmUnfollow'))) return;\n\n    updateFollows((latestEvent) => unfollow(latestEvent, props.pubkey)).catch((err) => {\n      console.log('failed to unfollow', err);\n    });\n  };\n\n  const otherActionsPopup = useContextMenu(() => ({\n    menu: [\n      /*\n        {\n          content: () => 'ユーザ宛に投稿',\n          onSelect: () => {\n            navigator.clipboard.writeText(npub()).catch((err) => window.alert(err));\n          },\n        },\n       */\n      {\n        content: i18n.t('profile.copyPubkey'),\n        onSelect: () => {\n          navigator.clipboard.writeText(npub()).catch((err) => window.alert(err));\n        },\n      },\n      {\n        content: i18n.t('profile.showJSON'),\n        onSelect: () => {\n          setModal('EventDebugModal');\n        },\n      },\n      {\n        content: i18n.t('profile.addColumn'),\n        items: [\n          {\n            content: i18n.t('profile.addUserColumn'),\n            onSelect: () => {\n              const columnName = profile()?.name ?? npub();\n              saveColumn(createPostsColumn({ name: columnName, pubkey: props.pubkey }));\n              request({ command: 'moveToLastColumn' }).catch((err) => console.error(err));\n              props.onClose?.();\n            },\n          },\n          {\n            content: i18n.t('profile.addUserHomeColumn'),\n            onSelect: () => {\n              const columnName = `${i18n.t('column.home')} / ${profile()?.name ?? npub()}`;\n              saveColumn(createFollowingColumn({ name: columnName, pubkey: props.pubkey }));\n              request({ command: 'moveToLastColumn' }).catch((err) => console.error(err));\n              props.onClose?.();\n            },\n          },\n        ],\n      },\n      {\n        content: !isMuted() ? i18n.t('profile.mute') : i18n.t('profile.unmute'),\n        onSelect: () => {\n          if (!isMuted()) {\n            addMutedPubkey(props.pubkey);\n          } else {\n            removeMutedPubkey(props.pubkey);\n          }\n        },\n      },\n      {\n        when: () => props.pubkey === myPubkey(),\n        content: !following() ? i18n.t('profile.followMyself') : i18n.t('profile.unfollowMyself'),\n        onSelect: () => {\n          if (!following()) {\n            doFollow();\n          } else {\n            doUnfollow();\n          }\n        },\n      },\n    ],\n  }));\n\n  const loadMore = useLoadMore(() => ({ duration: null }));\n\n  const { events, eose } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [\n      {\n        kinds: [1, 6],\n        authors: [props.pubkey],\n        limit: 10,\n        since: loadMore.since(),\n        until: loadMore.until(),\n      },\n    ],\n    eoseLimit: 10,\n    continuous: false,\n  }));\n\n  createEffect(() => loadMore.setEvents(events()));\n\n  return (\n    <BasicModal onClose={() => props.onClose?.()}>\n      <Show\n        when={profileQuery.isFetched && profile()?.banner}\n        fallback={<div class=\"h-12 shrink-0\" />}\n        keyed\n      >\n        {(bannerUrl) => (\n          <div class=\"h-40 w-full shrink-0 sm:h-52\">\n            <img src={bannerUrl} alt=\"header\" class=\"size-full object-cover\" />\n          </div>\n        )}\n      </Show>\n      <div class=\"mt-[-54px] flex items-end gap-4 px-4 pt-4\">\n        <div class=\"flex-1 shrink-0\">\n          <div class=\"size-28 overflow-hidden rounded-lg shadow-md\">\n            <Show when={profileQuery.isFetched && profile()?.picture} keyed>\n              {(pictureUrl) => (\n                <img src={pictureUrl} alt=\"user icon\" class=\"size-full object-cover\" />\n              )}\n            </Show>\n          </div>\n        </div>\n        <Show when={myPubkey() != null}>\n          <div class=\"flex shrink-0 flex-col items-center gap-1\">\n            <div class=\"flex flex-row justify-start gap-1\">\n              <Switch>\n                <Match when={props.pubkey === myPubkey()}>\n                  <button\n                    class=\"rounded-full border border-primary px-4 py-2 text-center font-bold text-primary hover:bg-primary hover:text-primary-fg sm:w-20\"\n                    onClick={() => showProfileEdit()}\n                  >\n                    {i18n.t('profile.editProfile')}\n                  </button>\n                </Match>\n                <Match when={followingsMutation.isPending}>\n                  <span class=\"rounded-full border border-primary px-4 py-2 text-primary sm:text-base\">\n                    {i18n.t('general.updating')}\n                  </span>\n                </Match>\n                <Match when={myFollowingQuery.isPending}>\n                  <span class=\"rounded-full border border-primary px-4 py-2 text-primary sm:text-base\">\n                    {i18n.t('general.loading')}\n                  </span>\n                </Match>\n                <Match when={following()}>\n                  <button\n                    class=\"rounded-full border border-primary bg-primary px-4 py-2 text-center font-bold text-primary-fg hover:bg-primary-hover sm:w-36\"\n                    onMouseEnter={() => setHoverFollowButton(true)}\n                    onMouseLeave={() => setHoverFollowButton(false)}\n                    onClick={() => doUnfollow()}\n                    disabled={followingsMutation.isPending}\n                  >\n                    <Show when={!hoverFollowButton()} fallback={i18n.t('profile.unfollow')}>\n                      {i18n.t('profile.followingCurrently')}\n                    </Show>\n                  </button>\n                </Match>\n                <Match when={!following()}>\n                  <button\n                    class=\"w-28 rounded-full border border-primary px-4 py-2 text-primary hover:border-primary-hover hover:text-primary-hover\"\n                    onClick={() => doFollow()}\n                    disabled={followingsMutation.isPending}\n                  >\n                    {i18n.t('profile.follow')}\n                  </button>\n                </Match>\n              </Switch>\n              <button\n                class=\"w-10 rounded-full border border-primary p-2 text-primary hover:border-primary-hover hover:text-primary-hover\"\n                onClick={() => setModal('ZapRequest')}\n              >\n                <Bolt />\n              </button>\n              <button\n                ref={otherActionsPopup.targetRef}\n                type=\"button\"\n                class=\"w-10 rounded-full border border-primary p-2 text-primary hover:border-primary-hover hover:text-primary-hover\"\n                onClick={() => otherActionsPopup.open()}\n              >\n                <EllipsisHorizontal />\n              </button>\n              {otherActionsPopup.popup()}\n            </div>\n            <Switch>\n              <Match when={userFollowingQuery.isPending}>\n                <div class=\"shrink-0 text-xs\">{i18n.t('general.loading')}</div>\n              </Match>\n              <Match when={followed()}>\n                <div class=\"shrink-0 text-xs\">{i18n.t('profile.followsYou')}</div>\n              </Match>\n            </Switch>\n          </div>\n        </Show>\n      </div>\n      <div class=\"flex items-start px-4 pt-2\">\n        <div class=\"h-16 shrink overflow-hidden\">\n          <Show when={profileQuery.isPending}>{i18n.t('general.loading')}</Show>\n          <Show when={(profile()?.display_name?.length ?? 0) > 0}>\n            <div class=\"truncate text-xl font-bold\">{profile()?.display_name}</div>\n          </Show>\n          <div class=\"flex items-center gap-2\">\n            <Show when={(profile()?.name?.length ?? 0) > 0}>\n              <div class=\"truncate text-xs\">@{profile()?.name}</div>\n            </Show>\n            <Show when={(profile()?.nip05?.length ?? 0) > 0}>\n              <div class=\"flex items-center text-xs\">\n                {nip05Identifier()?.ident}\n                <Switch\n                  fallback={\n                    <span class=\"inline-block size-4 text-danger\">\n                      <ExclamationCircle />\n                    </span>\n                  }\n                >\n                  <Match when={verificationQuery.isPending}>\n                    <span class=\"inline-block size-3\">\n                      <ArrowPath />\n                    </span>\n                  </Match>\n                  <Match when={isVerified()}>\n                    <span class=\"inline-block size-4 text-link\">\n                      <CheckCircle />\n                    </span>\n                  </Match>\n                </Switch>\n              </div>\n            </Show>\n          </div>\n          <div class=\"flex gap-1\">\n            <div class=\"truncate text-xs\">{npub()}</div>\n          </div>\n        </div>\n      </div>\n      <Show when={aboutParsed()} keyed>\n        {(parsed) => (\n          <div class=\"max-h-40 shrink-0 overflow-y-auto whitespace-pre-wrap px-4 py-2 text-sm\">\n            <TextNoteContentDisplay parsed={parsed} embedding={false} initialHidden />\n          </div>\n        )}\n      </Show>\n      <div class=\"flex border-t border-border px-4 py-2\">\n        <button class=\"flex flex-1 flex-col items-start\" onClick={() => setModal('Following')}>\n          <div class=\"text-sm\">{i18n.t('profile.following')}</div>\n          <div class=\"text-xl\">\n            <Show\n              when={userFollowingQuery.isFetched}\n              fallback={<span class=\"text-sm\">{i18n.t('general.loading')}</span>}\n            >\n              {userFollowingPubkeys().length}\n            </Show>\n          </div>\n        </button>\n        <Show when={!config().hideCount}>\n          <div class=\"flex flex-1 flex-col items-start\">\n            <div class=\"text-sm\">{i18n.t('profile.followers')}</div>\n            <div class=\"text-xl\">\n              <Show\n                when={showFollowers()}\n                fallback={\n                  <button\n                    class=\"text-sm hover:text-fg-secondary\"\n                    onClick={() => setShowFollowers(true)}\n                  >\n                    {i18n.t('profile.loadFollowers')}\n                  </button>\n                }\n                keyed\n              >\n                <FollowersCount pubkey={props.pubkey} />\n              </Show>\n            </div>\n          </div>\n        </Show>\n      </div>\n      <Show when={(profile()?.website ?? '').length > 0}>\n        <ul class=\"border-t border-border px-5 py-2 text-xs\">\n          <Show when={profile()?.website} keyed>\n            {(website) => (\n              <li class=\"flex items-center gap-1\">\n                <span class=\"inline-block size-4\" area-label=\"website\" title=\"website\">\n                  <GlobeAlt />\n                </span>\n                <SafeLink class=\"text-link underline\" href={website} />\n              </li>\n            )}\n          </Show>\n        </ul>\n      </Show>\n      <Switch>\n        <Match when={modal() === 'Following'}>\n          <UserList data={userFollowingPubkeys()} pubkeyExtractor={(e) => e} onClose={closeModal} />\n        </Match>\n        <Match when={modal() === 'EventDebugModal' && profileQuery.data} keyed>\n          {(event) => (\n            <EventDebugModal\n              event={event}\n              extra={JSON.stringify(profile(), null, 2)}\n              onClose={closeModal}\n            />\n          )}\n        </Match>\n        <Match when={modal() === 'ZapRequest'}>\n          <ZapRequestModal zapTo={{ pubkey: props.pubkey }} onClose={closeModal} />\n        </Match>\n      </Switch>\n      <ul class=\"border-t border-border p-1\">\n        <LoadMore loadMore={loadMore} eose={eose()}>\n          <Timeline events={events()} />\n        </LoadMore>\n      </ul>\n    </BasicModal>\n  );\n};\n\nexport default ProfileDisplay;\n"],"names":["ArrowPath","props","_el$","_tmpl$","_$spread","CheckCircle","ExclamationCircle","emptyFollowings","pubkey","Kind.Contacts","epoch","createFollowings","updatedTags","content","updateTags","baseEvent","updater","addPubkey","Tags","baseTags","removePubkey","name","value","useFollowingsMutation","propsProvider","queryClient","useQueryClient","createMemo","mutation","wrapMutate","usePublishEventMutation","results","queryKey","queryKeyUseFollowings","err","follow","unfollow","NIP05_REGEX","_fetch","queryProfile","fullname","match","domain","url","res","json","parseNip05Address","ident","user","useFollowers","config","useConfig","events","useSubscription","followersPubkeys","uniq","ev","useVerification","genQueryKey","query","createQuery","currentProps","nip05string","FollowersCount","count","_$memo","ProfileDisplay","i18n","useTranslation","addMutedPubkey","removeMutedPubkey","isPubkeyMuted","saveColumn","request","useRequestCommand","myPubkey","usePubkey","showProfileEdit","useModalState","npub","npubEncodeFallback","hoverFollowButton","setHoverFollowButton","createSignal","showFollowers","setShowFollowers","modal","setModal","closeModal","profile","event","profileEvent","profileQuery","useProfile","verification","verificationQuery","ensureNonNull","nip05","nip05Identifier","isVerified","isMuted","aboutParsed","about","undefined","parsed","parseTextNote","resolved","toResolved","genericEvent","followingPubkeys","myFollowingPubkeys","myFollowingQuery","useFollowings","pubkeyNonNull","following","includes","userFollowingPubkeys","userFollowingQuery","followed","p","followingsMutation","updateFollows","action","isPending","latest","fetchLatestFollowings","data","length","window","confirm","t","created_at","alert","error","doFollow","latestEvent","catch","log","doUnfollow","otherActionsPopup","useContextMenu","menu","onSelect","clipboard","writeText","items","columnName","createPostsColumn","command","console","onClose","createFollowingColumn","when","loadMore","useLoadMore","duration","eose","relayUrls","filters","kinds","authors","limit","since","until","eoseLimit","continuous","createEffect","setEvents","_$createComponent","BasicModal","children","Show","isFetched","banner","fallback","_tmpl$18","keyed","_el$36","_tmpl$19","_el$37","firstChild","bannerUrl","_tmpl$7","_el$2","_el$3","picture","_el$38","_tmpl$20","pictureUrl","_el$4","_tmpl$6","_el$5","_el$11","_el$12","nextSibling","Switch","Match","_el$6","$$click","_$insert","_el$7","_tmpl$2","_el$8","_el$9","_tmpl$3","addEventListener","_$effect","disabled","_el$10","_tmpl$4","Bolt","open","_ref$","targetRef","_$use","EllipsisHorizontal","popup","_el$13","_tmpl$5","_el$14","_el$15","_tmpl$13","_el$16","_el$18","_el$24","_el$25","display_name","_el$17","_tmpl$8","_el$19","_tmpl$9","_el$21","_tmpl$12","_el$39","_tmpl$21","_el$22","_tmpl$10","_el$23","_tmpl$11","_el$40","_tmpl$22","TextNoteContentDisplay","embedding","initialHidden","_el$26","_tmpl$15","_el$27","_el$28","_el$29","_el$41","_tmpl$23","hideCount","_el$30","_tmpl$14","_el$31","_el$32","_el$42","_tmpl$24","website","_el$33","_tmpl$16","_el$43","_tmpl$25","_el$44","GlobeAlt","SafeLink","href","UserList","pubkeyExtractor","e","EventDebugModal","extra","JSON","stringify","ZapRequestModal","zapTo","_el$34","_tmpl$17","LoadMore","Timeline","_$delegateEvents"],"mappings":"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","x_google_ignoreList":[0,1,2,5]}