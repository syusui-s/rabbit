{"version":3,"mappings":";4zCAAAA,IAAe,CAACC,EAAQ,MAAE,WAAAC,EAAAC,GAAA,EAAAC,SAAAF,EAA6JD,EAAK,OAAAC,CAAA,kYCYtLG,EAAwDJ,GAAU,CACtE,KAAM,CAACK,EAAkBC,CAAkB,EAAIC,EAAa,EAAK,EAE3DC,EAAuBA,IAAMF,EAAoBG,GAAY,CAACA,CAAO,EAE3E,kBAAAR,EAAAS,KAAAC,EAAAV,EAAAW,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAD,WAAAG,EAAAF,EAAAG,YAAAC,EAAAF,EAAAH,WAAAE,SAAAI,QAOmB,IAAMlB,EAAMmB,kBAAiBC,EAAAN,EAAAO,EAErCC,EAAI,KAACC,MAAI,QAAEvB,EAAMwB,IAAI,EAAEC,MAAK,GAAAC,aACrB,WAAAC,EAAAC,KAAAR,SAAAO,EAAmEH,CAAI,EAAAG,CAAA,KAAQ,QAAAP,EAAAN,EAAAO,EAEtFC,EAAI,KAACC,MAAI,QAAEvB,EAAMmB,aAAa,MAAEU,UAAQ,mBAAAC,EAAA5B,KAAAkB,SAAAU,EAAA,IAA0B9B,EAAM+B,IAAI,EAAAD,CAAA,UAAAJ,UAAA,OAAAM,EAAA9B,KAAAkB,SAAAY,EAAA,IACnDhC,EAAM+B,IAAI,EAAAC,CAAA,UAAAjB,EAAAG,QAIqB,IAAMV,IAAsBY,EAAAH,EAAAI,EAEpFtB,GAAgB,KAAAqB,EAAAnB,EAAAoB,EAItBC,EAAI,KAACC,MAAI,QAAElB,GAAkB,MAAAqB,UAAA,QAAG1B,EAAMiC,UAAU,UAAAhC,CAAA,IAGvD,EAEiCiC,EAAA,WC/BjC,MAAMC,GAAiBC,GAAoB,CACzC,MAAMC,EAAM,CAACD,EAAME,EAAE,EAEfC,EAASH,EAAMI,aAAaF,GAC9BC,GAAU,MAAMF,EAAII,KAAKF,CAAM,EAEnC,MAAMG,EAAUN,EAAMO,mBAAmBL,GACzC,OAAII,GAAW,MAAML,EAAII,KAAKC,CAAO,EAE9BE,EAAKP,CAAG,CACjB,EAEMQ,GAAoD7C,GAAU,CAClE,KAAM,CAAE8C,UAAWC,IAEbX,EAAQA,IAAMY,GAAShD,EAAMoC,KAAK,EAElC,CAAEa,UAAWC,EAAgB,KAAO,CACxCC,UAAWL,IAASK,UACpBC,QAAS,CACP,CAAEC,MAAO,CAAC,CAAC,EAAGhB,IAAKF,GAAcC,GAAO,EAAGkB,MAAO,IAClD,CAAED,MAAO,CAAC,CAAC,EAAG,KAAM,CAACrD,EAAMoC,MAAME,EAAE,EAAGgB,MAAO,GAAc,EAE7DA,MAAO,KACP,EAEF,OAAAjC,EAAQkC,EAAQ,KAACN,QAAM,OAAE,CAAC,GAAGA,GAAQ,EAAEO,SAAS,GAClD,EAEMC,GAA2EzD,GAAKqB,EACnFqC,EAAM,KAAAhC,UAAA,QAAAL,EACJsC,EAAK,KAACpC,MAAI,QAAEvB,EAAM4D,gBAAgBC,OAAS,WAAa7D,EAAM4D,eAAe,EAAEnC,MAAK,GAAAC,SACjFoC,GAAOzC,EAAMwB,GAAc,KAACT,OAAK,QAAE0B,EAAQ1B,KAAK,IAAI,ggBCvBtD2B,EAAkC/D,GAAU,CAChD,IAAIgE,EAEJ,MAAMC,EAAgBC,KAChBC,EAAOC,IAEPC,EAAQA,IAAMrE,EAAMqE,OAAS,SAEnCC,GAAiB,KAAO,CACtBC,YAAa,eACbC,QAAUC,GAAY,CAChBA,EAAQA,UAAY,gBAAkBA,EAAQC,cAAgB1E,EAAM0E,aACtEV,GAAcW,eAAe,CAAEC,SAAU,SAAUC,OAAQ,SAAU,CAEzE,GACA,EAEFP,GAAiB,KAAO,CACtBC,YAAa,mBACbC,QAASA,IAAM,CACTxE,EAAM8E,YACRd,GAAcW,eAAe,CAAEC,SAAU,SAAU,CAEvD,GACA,EAIF,KAAM,CAACG,EAAYC,CAAa,EAAIzE,IAEpC0E,SAAa,IAAM,CACjB,MAAMC,EAA2B,CAC/BC,YAAaA,IAAM,CACjBJ,KAAcK,SAAS,CAAEC,IAAK,EAAGT,SAAU,SAAU,CACvD,GAGF5E,EAAMsF,oBAAoBJ,CAAQ,CACpC,CAAC,EAED7D,EACGkE,GAAgBC,SAAQ,CAACC,MAAOxB,EAAa,IAAAvC,UAAA,OAAAzB,EAAAC,KAAAwF,EAErC1B,EAAY,cAAA0B,GAAA,WAAAC,EAAAD,EAAAzF,CAAA,EAAZ+D,EAAY/D,EAAAmB,EAAAnB,EAAAoB,EAShBC,EAAI,KACHC,MAAI,QAAE0C,EAAcA,cAAc2B,OAAO,EACzCnE,MAAK,OACLI,UAAQ,oBAAAlB,EAAAD,KAAAU,SAAAT,EAAA,IAE0CX,EAAM6F,MAAM,EAAAlF,CAAA,iBAAAE,EAAAe,KAAA+D,SAChDX,EAAanE,CAAA,EAAAO,EAAAP,EAAA,IACpBb,EAAM0B,QAAQ,EAAAb,CAAA,OAAAa,SAKnBoE,GAAQ,aAAAhF,EAAAiF,KAAA/D,EAAAlB,EAAAF,WAAAG,EAAAiB,EAAApB,WAAAK,EAAAF,EAAAC,YAAAgB,SAAAd,QAKO,IAAM+C,GAAe+B,gBAAe5E,EAAAL,EAAAM,EAG1C4E,GAAS,KAAA7E,EAAAH,EAAA,IAENkD,EAAK+B,EAAE,aAAa,CAAC,EAAApF,CAAA,iBAAAa,EAAAwE,KAAAR,SAIxBX,EAAarD,CAAA,EAAAP,EAAAO,EAAAN,EAGjBoC,GAAsB,CAACG,gBAAiBkC,EAAQ,GAAAnE,CAAA,MAGtD,GAAAyE,EAAAC,GAAAC,GAAArG,EAvCQ,CACT,eAAgBoE,MAAY,SAC5B,eAAgBA,MAAY,OAC5B,eAAgBA,MAAY,SAC5B,eAAgBA,MAAY,UAC7BgC,CAAA,GAAApG,CAAA,GAuCT,EAEsBiC,EAAA,oPClHtBqE,IAAe,CAACvG,EAAQ,MAAE,WAAAC,EAAAC,GAAA,EAAAC,SAAAF,EAA6JD,EAAK,OAAAC,CAAA,2mBCA5LuG,IAAe,CAACxG,EAAQ,MAAE,WAAAC,EAAAC,GAAA,EAAAC,SAAAF,EAA6JD,EAAK,OAAAC,CAAA,6kBC2B/KwG,OAAqE,WAAAxG,EAAAC,KAAAS,EAAAV,EAAAW,WAAAC,EAAAF,EAAAK,YAAAI,SAAAT,EAAA,IAExEX,EAAM0G,KAAK,EAAAtF,EAAAP,EAAA,IACXb,EAAM0B,QAAQ,EAAAzB,CAAA,KAIlB0G,EAAwC3G,GAA+C,CAC3F,MAAMmE,EAAOC,IACP,CAAEwC,aAAYC,eAAcC,cAAe/D,IAC3CgE,EAAUC,KAEVC,EAAkB5C,GAA+B,CACrDuC,EAAW,CAAE,GAAG5G,EAAMkH,OAAQ7C,QAAO,CACvC,EAEM8C,EAAQC,GAAkB,CAC9BN,EAAW9G,EAAMkH,OAAO5E,GAAI8E,CAAK,EACjCL,EAAQ,CAAEtC,QAAS,eAAgBC,YAAa0C,EAAO,EAAEC,SAAeC,QAAQC,MAAMC,CAAG,CAAC,CAC5F,EAEA,kBAAA1G,EAAAc,KAAAb,EAAAD,EAAAF,WAAAK,EAAAF,EAAAH,WAAAe,EAAAV,EAAAL,WAAAkB,EAAAb,EAAAD,YAAAyG,EAAA3F,EAAAlB,WAAA8G,EAAA5F,EAAAd,YAAA2G,EAAAD,EAAA1G,YAAA4G,EAAAD,EAAA/G,WAAAQ,SAAAN,EAAAO,EAEKoF,GAAqB,KAACC,OAAK,QAAEvC,EAAK+B,EAAE,2BAA2B,CAAC,MAAAxE,UAAA,OAAAM,EAAAtB,KAAAU,SAAAY,EAAAX,EAE5DwG,EAAG,CAACC,KAAM,CAAC,SAAU,OAAQ,SAAU,QAAQ,EAAUpG,aACjD,WAAAqG,EAAAhC,KAAAgC,SAAA7G,QASM,IAAM+F,EAAe5C,CAAK,EAACjD,EAAA2G,EAAA,IAEnC5D,EAAK+B,EAAG,iBAAgB7B,CAAM,EAAC,CAAC,EAAA+B,EAAA4B,GAAA,OAAAC,EAPRjI,EAAMkH,OAAO7C,QAAUA,EAAK6D,EACtClI,EAAMkH,OAAO7C,QAAUA,EAAK8D,EACxBnI,EAAMkH,OAAO7C,QAAUA,EAAK+D,EAC9BpI,EAAMkH,OAAO7C,QAAUA,EAAK4D,WAAAD,EAAAC,MAAAF,EAAAM,UAAAC,OAAA,sBAAAN,EAAAC,MAAA,EAAAC,IAAAF,EAAAE,MAAAH,EAAAM,UAAAC,OAAA,YAAAN,EAAAE,MAAA,EAAAC,IAAAH,EAAAG,MAAAJ,EAAAM,UAAAC,OAAA,gBAAAN,EAAAG,MAAA,EAAAC,IAAAJ,EAAAI,MAAAL,EAAAM,UAAAC,OAAA,cAAAN,EAAAI,MAAA,EAAAJ,CAAA,GAAAC,KAAAM,OAAAL,KAAAK,OAAAJ,KAAAI,OAAAH,KAAAG,OAAA,EAAAR,CAAA,KAMhD,GAAA/F,CAAA,IAAAjB,CAAA,EAAAK,EAAAN,EAAAO,EAINC,EAAI,KAACC,MAAI,QAAEvB,EAAMwI,mBAAmB,EAAE/G,MAAK,GAAAC,YAC7B+G,EAAO,CAAEvB,OAAQlH,EAAMkH,OAAQN,aAAY,EAAC,EAAA7F,CAAA,EAAAE,EAAAC,QAM9C,IAAMiG,EAAKnH,EAAM0E,YAAc,CAAC,EAACtD,EAAAO,EAAAN,EAGvCkF,GAAW,KAAAzE,EAAAZ,QAML,IAAMiG,EAAKnH,EAAM0E,YAAc,CAAC,EAACtD,EAAAqG,EAAApG,EAGvCqH,GAAY,KAAAf,EAAAzG,QAON,IAAM2F,EAAa7G,EAAMkH,OAAO5E,EAAE,EAAClB,EAAAwG,EAAAvG,EAGzCmF,GAAK,KAAAJ,EAAA4B,GAAA,OAAAW,EAvBDxE,EAAK+B,EAAE,wBAAwB,EAAC0C,EAShCzE,EAAK+B,EAAE,yBAAyB,EAAC2C,EAUjC1E,EAAK+B,EAAE,4BAA4B,EAAC4C,EAGG3E,EAAK+B,EAAE,4BAA4B,EAACyC,WAAAX,EAAAW,KAAAI,EAAA9H,EAAA,QAAA+G,EAAAW,KAAA,EAAAC,IAAAZ,EAAAY,MAAAG,EAAAjH,EAAA,QAAAkG,EAAAY,MAAA,EAAAC,IAAAb,EAAAa,MAAAE,EAAApB,EAAA,QAAAK,EAAAa,MAAA,EAAAC,IAAAd,EAAAc,MAAAC,EAAAnB,EAAA,aAAAI,EAAAc,MAAA,EAAAd,CAAA,GAAAW,IAAAJ,OAAAK,KAAAL,OAAAM,KAAAN,OAAAO,KAAAP,OAAA,EAAAzH,CAAA,IAO5F,EAE8BoB,EAAA,WCjG9B,KAAM,CAAC8G,GAAMC,EAAO,EAAIC,GAAW,IAAM3I,EAAqC,EAAE,CAAC,EAC3E4I,GAAa,CAACC,EAAmBC,IACrCJ,GAASxI,IAAa,CAAE,GAAGA,EAAS,CAAC2I,CAAS,EAAGC,GAAY,EAGzD,CAACC,GAAYC,EAAa,EAAIL,GAAW,IAAM3I,EAAsC,EAAE,CAAC,EACxFiJ,GAAgBJ,GAAsBK,GAAQ,IAAMH,KAAaF,CAAS,GAAK,EAAK,EAEpFM,GAAcC,GAAgD,CAClE,MAAMC,EAASC,GAAA,EACT,CAACR,EAAWS,CAAY,EAAIvJ,EAA4B,IAAI,EAElE,OAAA0E,EAAa,IAAM,CACjB,MAAMjF,EAAQ2J,EAAA,EAGd,GAFI3J,GAAS,MAETA,EAAM,UAAU,SAAW,EAAG,OAElC,KAAM,CAAE,UAAAoJ,GAAcpJ,EAChB+J,EAAgBN,GAAQ,IAAMT,GAAA,EAAOI,CAAS,CAAC,EAErD,GAAIW,GAAiB,KAAM,CACzBD,EAAaC,CAAa,EAC1B,MACF,CAEA,GAAIP,GAAaJ,CAAS,EACxB,OAGF,MAAMY,EAAIJ,EAAA,EACV,GAAII,GAAK,KAAM,OAEf,MAAMC,EAAoBxE,GACxB8D,GAAe9I,IAAa,CAAE,GAAGA,EAAS,CAAC2I,CAAS,EAAG3D,GAAQ,EAEjEwE,EAAiB,EAAI,EAErBC,GAAQF,EAAGZ,CAAS,EACjB,KAAMe,GAAW,CAChBC,GAAM,IAAM,CACVjB,GAAWC,EAAWe,CAAM,EAC5BL,EAAaK,CAAM,CACrB,CAAC,CACH,CAAC,EACA,MAAO3C,GAAQ,CACd,QAAQ,MAAM,sBAAsB4B,CAAS,IAAK5B,CAAG,CACvD,CAAC,EACA,QAAQ,IAAM,CACbyC,EAAiB,EAAK,CACxB,CAAC,CACL,CAAC,EAEMZ,CACT,ECjDMgB,GAAsCrK,GAAU,CACpD,MAAMsK,EAAWC,EAAW,IAAMC,GAAaxK,EAAMoC,KAAK,CAAC,EAErDiH,EAAYK,GAAW,IAAM,CACjC,KAAM,CAAE9D,WAAY0E,IACpB,OAAI1E,GAAW,MAAQA,EAAQ6E,SAAW,EAAU,KAC7C,CAAEnI,GAAIgI,IAAWhI,GAAI8G,UAAWxD,EACzC,CAAC,EAEK8E,EAA4BA,IAAM,CACtC,MAAMC,EAAOtB,IACb,GAAIsB,GAAQ,KAAM,MAAO,GACzBrD,QAAQsD,IAAID,CAAI,EAEhB,GAAI,CACF,OAAOE,GAAUF,CAAI,EAAEG,gBACzB,OAAStD,EAAK,CACZF,eAAQyD,KAAKvD,CAAG,EACT,EACT,CACF,EAEMwD,EAAqBA,IAAMV,IAAWQ,iBAE5C,OAAAzJ,EACGwG,EAAG,KAACC,MAAI,OAAE,CAAC,GAAGkD,IAAsB,GAAGN,GAA2B,CAAC,EAAAhJ,SAChEuJ,GAAO5J,EACN6J,EAAU,KAAAxJ,UAAA,QAAAL,EACR8J,GAAgB,CAACF,UAAgB,IAAEG,aAAW,OAAE,CAACC,EAAkB,CAAC,OAExE,CAGP,ECvBaC,GACXtL,GACG,CAAC,mCAAoCA,CAAK,EAEzCuL,GACJ5B,GACqC,CACrC,MAAM6B,EAAcC,GAAA,EACdzL,EAAQuK,EAAWZ,CAAa,EAChC+B,EAAc,IAAMJ,GAAyCtL,GAAO,EAEpE2L,EAAQC,GAAY,KAAO,CAC/B,SAAUF,EAAA,EACV,QAAS,CAAC,CAAE,SAAAG,EAAU,OAAAC,KAAa,CACjC,KAAM,EAAGC,CAAY,EAAIF,EACzB,GAAIE,GAAgB,KAAM,OAAO,QAAQ,QAAQ,IAAI,EAErD,KAAM,CAAE,KAAAC,EAAM,OAAAC,EAAQ,WAAAC,CAAA,EAAeH,EAC/BI,EAAO,IAAIC,GAAqD,CACpE,KAAM,gCACN,KAAAJ,EACA,OAAAC,EACA,WAAAC,CAAA,CACD,EACKG,EAAUF,EAAK,oBAAoB,MAAM,IAAM,CACnD,MAAM,IAAI,MACR,8CAA8CH,CAAI,IAAIC,CAAM,IAAIC,CAAU,GAE9E,CAAC,EACD,OAAAC,EAAK,SAAUlJ,GAAW,CACxB,MAAMqJ,EAASC,GAAgBtJ,CAAM,EACrCuI,EAAY,aAAaK,EAAUS,CAAM,CAC3C,CAAC,EACDE,GAAa,CAAE,KAAAL,EAAM,OAAAL,EAAQ,EACtBW,GACL,KACA,qCAAqCT,CAAI,IAAIC,CAAM,IAAIC,CAAU,IACjEG,CAAO,CACX,EACA,UAAW,IAAS,IACpB,OAAQ,MAAc,KACtB,EAIF,MAAO,CAAE,MAFK,IAAMV,EAAM,MAAQ,KAElB,MAAAA,CAAA,CAClB,ECpDMe,GAAyD1M,GAAU,CACvE,MAAMmE,EAAOC,IACP,CAAEyC,gBAAiB9D,IAEnB,CAAC4J,EAAgBC,CAAiB,EAAIrM,IAEtC,CAAE6B,SAAUmJ,GAAiC,KAAO,CACxDS,KAAM,MACNC,OAAQjM,EAAMkH,OAAO0C,OACrBsC,WAAYlM,EAAMkH,OAAOgF,YACzB,EAIF,OAAA7K,EACG0C,EAAM,KACL8B,QAAM,QAAAxE,EACHjB,EAAiB,KAChB2B,MAAI,QAAE/B,EAAMkH,OAAOnF,MAAQoC,EAAK+B,EAAE,iBAAiB,CAAC,MACpD1E,MAAI,QAAAH,EAAGwL,GAAY,KACnB5K,SAAUA,IAAAZ,EAAOsF,EAAc,KAACO,QAAM,QAAElH,EAAMkH,MAAM,MAAExC,aAAW,QAAE1E,EAAM0E,WAAW,IACpFoI,QAASA,IAAMjG,EAAa7G,EAAMkH,OAAO5E,EAAE,EAC3CnB,cAAeA,IAAMwL,KAAkBxH,aAAY,CAAC,OAGxDd,OAAK,QAAErE,EAAMkH,OAAO7C,KAAK,MACzBK,aAAW,QAAE1E,EAAM0E,WAAW,MAC9BI,YAAU,QAAE9E,EAAM8E,UAAU,EAC5BQ,kBAAmBsH,EAAiB,IAAAlL,UAAA,QAAAL,EAEnCC,EAAI,KAACC,MAAI,QAAEa,GAAO,EAAEX,MAAK,GAAAC,SACtBqL,GAAE1L,EAAMgJ,GAAQ,CAACjI,MAAO2K,EAAE,EAAI,IAIxC,EC/BMC,GAA2DhN,GAAU,CACzE,MAAMmE,EAAOC,IACP,CAAEtB,SAAQ+D,gBAAiB9D,IAE3B,CAAEkK,oBAAqBC,GAAc,KAAO,CAAEtD,OAAQ5J,EAAMkH,OAAO0C,QAAS,EAE5E,CAAC+C,EAAgBC,CAAiB,EAAIrM,IAEtC4M,EAAWC,EAAY,KAAO,CAClCC,SAAU,MACVC,OAAQA,IAAM,CACZX,KAAkBxH,aACpB,GACA,EAEI,CAAElC,SAAQsK,QAASrK,EAAgB,IAAM,CAC7C,MAAMsK,EAAU5K,EAAK,CAAC,GAAGqK,GAAkB,CAAC,EAC5C,OAAIO,EAAQ/C,SAAW,EAAU,KAC1B,CACLgD,QAAS,YACTtK,UAAWL,IAASK,UACpBC,QAAS,CACP,CACEC,MAAO,CAAC,EAAG,CAAC,EACZmK,UACAlK,MAAO,GACPoK,MAAOP,EAASO,QAChBC,MAAOR,EAASQ,OAAM,CACvB,EAEHC,UAAW,GACXC,WAAYV,EAASU,aACrBC,OAAQA,IAAM,CACZxG,QAAQsD,IAAI,YAAY,CAC1B,EACAmD,kBAAoB3L,GACdpC,EAAMkH,OAAO8G,eAAiB,KAAa,GACxCC,EAAmBjO,EAAMkH,OAAO8G,aAAa,EAAE5L,EAAMwD,OAAO,CACrE,CAEJ,CAAC,EAEDX,SAAa,IAAM,CACjBqC,QAAQsD,IAAI,OAAQ3H,GAAQ,EAC5BkK,EAASe,UAAUjL,GAAQ,CAC7B,CAAC,EAEDkL,EAAQ,IAAM7G,QAAQsD,IAAI,uBAAuB,CAAC,EAClDwD,GAAU,IAAM9G,QAAQsD,IAAI,yBAAyB,CAAC,EAEtDvJ,EACG0C,EAAM,KACL8B,QAAM,QAAAxE,EACHjB,EAAiB,KAChB2B,MAAI,QAAE/B,EAAMkH,OAAOnF,MAAQoC,EAAK+B,EAAE,aAAa,CAAC,MAChD1E,MAAI,QAAAH,EAAGgN,GAAI,KACXpM,SAAUA,IAAAZ,EAAOsF,EAAc,KAACO,QAAM,QAAElH,EAAMkH,MAAM,MAAExC,aAAW,QAAE1E,EAAM0E,WAAW,IACpFoI,QAASA,IAAMjG,EAAa7G,EAAMkH,OAAO5E,EAAE,EAC3CnB,cAAeA,IAAMwL,KAAkBxH,aAAY,CAAC,OAGxDd,OAAK,QAAErE,EAAMkH,OAAO7C,KAAK,MACzBK,aAAW,QAAE1E,EAAM0E,WAAW,MAC9BI,YAAU,QAAE9E,EAAM8E,UAAU,EAC5BQ,kBAAmBsH,EAAiB,IAAAlL,UAAA,QAAAL,EAEnCiN,EAAQ,CAACnB,WAAkB,IAAEI,MAAI,QAAEA,GAAM,MAAA7L,UAAA,QAAAL,EACvCkC,EAAQ,KAACN,QAAM,QAAEA,GAAQ,SAIlC,ufC7EMsL,GAA0CvO,GAAU,CACxD,KAAM,CAAEwO,eAAgBC,KAElBC,EAAoBC,GAAe,KAAO,CAC9CC,KAAM5O,EAAM6O,sBAAwB,IACpC,EAEF,kBAAA5O,EAAAS,KAAAC,EAAAV,EAAAW,WAAAC,EAAAF,EAAAK,YAAAF,EAAAD,EAAAD,WAAAoB,EAAAlB,EAAAE,YAAAI,SAAAT,EAAAU,EAGOC,EAAI,KAACC,MAAI,QAAEvB,EAAM8O,KAAK,EAAErN,MAAK,GAAAC,aACvB,WAAAT,EAAAW,KAAAmH,SAAA9H,EAAA,MAAyD8N,CAAG,EAAA9N,CAAA,KAAI,GAAAG,EAAAN,EAAA,IAI/Bd,EAAM0G,KAAK,EAAAtF,EAAAY,EAAA,IACIhC,EAAMgP,WAAW,EAAA5N,EAAAP,EAAAQ,EACvEC,EAAI,KAACC,MAAI,QAAEvB,EAAMiP,YAAY,EAAExN,MAAK,GAAAC,aACrB,WAAAC,EAAAoE,KAAAjE,EAAAH,EAAAf,WAAAkB,SAAAZ,QAIC,IAAMsN,EAAYS,CAAY,EAAC7N,EAAAU,EAAAT,EAEvC6N,GAAe,CAACtF,OAAQqF,EAAY,GAAAtN,CAAA,KAG1C,QAAAP,EAAAnB,EAAAoB,EAGJC,EAAI,KAACC,MAAI,QAAEvB,EAAM6O,oBAAoB,MAAAnN,UAAA,oBAAAX,EAAAb,KAAAa,EAAAG,QAMvB,IAAMwN,EAAkBS,OAAM,MAAAzJ,EAHlCgJ,EAAkBU,UAAS,cAAA1J,GAAA,WAAAC,EAAAD,EAAA3E,CAAA,EAA3B2N,EAAkBU,UAASrO,EAAAK,EAAAL,EAAAM,EAK/BtB,GAAgB,KAAAgB,CAAA,KAAAsO,GAAA,IAElBX,EAAkBY,OAAO,YAAArP,CAAA,IAKpC,EAE0BiC,EAAA,WC5C1B,MAAMqN,GAAgB5F,GAA2C,CAC/D,MAAM3J,EAAQuK,EAAWZ,CAAa,EAEhC,CAAE,MAAAgC,GAAUJ,GAAiC,KAAO,CACxD,KAAMiE,GACN,OAAQxP,IAAQ,OAChB,WAAYA,IAAQ,YACpB,EAEIoC,EAAQ,IAAMuJ,EAAM,KAEpB8D,EAAmB/F,GAAW,IAClCgG,EAAc,CAACtN,EAAA,GAAS,OAAO,CAAU,EAAE,CAAC,CAACwD,CAAO,KAAO,CACzD,UAAWA,CAAA,EACX,GAGE+J,EAAgBpF,EAAW,IAAM,CACrC,MAAMqF,EAAgBH,EAAA,EACtB,GAAIG,GAAiB,KAAM,OAAO,KAElC,MAAMC,EAAOhF,GAAU+E,CAAa,EACpC,OAAO,IAAIE,GAAaD,EAAK,IAAI,CACnC,CAAC,EAEKE,EAAYxF,EAAW,IACvBoB,EAAM,MAAQ,KAAa,KACxB,IAAIqE,GAASrE,EAAM,IAAI,CAC/B,EAaD,MAAO,CACL,MAAAvJ,EACA,UAAA2N,EACA,QAdc,IAAM,CACpB,GAAIA,EAAA,GAAa,iBAAmB,GACpC,GAAIJ,EAAA,GAAiB,iBAAmB,EAAC,EAazC,MAVY,IAAMI,EAAA,GAAa,SAAWJ,EAAA,GAAiB,QAW3D,YATkB,IAAMI,EAAA,GAAa,eAAiBJ,EAAA,GAAiB,cAUvE,MARY,IAAMI,EAAA,GAAa,SAAWJ,EAAA,GAAiB,QAS3D,MAAAhE,CAAA,CAEJ,ECpCMsE,GAAgDjQ,GAAU,CAC9D,MAAMmE,EAAOC,IAEP8L,EAAQA,IACZC,GAAY,CACVvG,OAAQ5J,EAAMiM,OACdC,WAAYlM,EAAMkM,WAClBF,KAAMX,EAAK+E,CACZ,EAEGvB,EAAuB,CAC3B,CACEjJ,QAASzB,EAAK+B,EAAE,gCAAgC,EAChDmK,SAAUA,IAAM,CACdC,UAAUC,UAAUC,UAAUN,GAAO,EAAE7I,MAAOG,GAAQiJ,OAAOC,MAAMlJ,CAAG,CAAC,CACzE,EACD,EAGH,OAAAnG,EACGkN,GAAU,KACTO,OAAK,QAAE9O,EAAM8O,KAAK,MAClBG,cAAY,QAAEjP,EAAMiM,MAAM,MAC1BvF,OAAK,QAAE1G,EAAM0G,OAAS1G,EAAMkM,UAAU,MACtC8C,aAAW,QAAEhP,EAAMgP,WAAW,EAC9BH,uBAA0C,CAGhD,EAEM7B,GAAoDhN,GAAU,CAClE,MAAMmE,EAAOC,IACP,CAAEtB,SAAQ+D,gBAAiB9D,IAE3B,CAAC4J,EAAgBC,CAAiB,EAAIrM,IAEtC,CAAEwP,YAAWjB,QAAOpI,QAAOsI,cAAa2B,WAAYpB,GAAa,KAAO,CAC5EtD,OAAQjM,EAAMkH,OAAO+E,OACrBC,WAAYlM,EAAMkH,OAAOgF,YACzB,EAEI0E,EAAaA,IACjB5Q,EAAMkH,OAAOnF,MAAQ2E,KAAWqJ,KAAa7D,cAAgB/H,EAAK+B,EAAE,kBAAkB,EAElFiH,EAAWC,EAAY,KAAO,CAAEC,SAAU,MAAO,EAEjD,CAAEpK,SAAQsK,QAASrK,EAAgB,IAAM,CAC7C,MAAMsK,EAAU5K,EAAK,CAAC,GAAG+N,GAAS,CAAC,EACnC,OAAInD,EAAQ/C,SAAW,EAAU,KAC1B,CACLgD,QAAS,YACTtK,UAAWL,IAASK,UACpBC,QAAS,CACP,CACEC,MAAO,CAAC,EAAG,CAAC,EACZmK,UACAlK,MAAO,GACPoK,MAAOP,EAASO,QAChBC,MAAOR,EAASQ,OAAM,CACvB,EAEHC,UAAW,GACXC,WAAYV,EAASU,aACrBC,OAAQA,IAAM,CACZxG,QAAQsD,IAAI,YAAY,CAC1B,EACAmD,kBAAoB3L,GACdpC,EAAMkH,OAAO8G,eAAiB,KAAa,GACxCC,EAAmBjO,EAAMkH,OAAO8G,aAAa,EAAE5L,EAAMwD,OAAO,CACrE,CAEJ,CAAC,EAED,OAAAvE,EACG0C,EAAM,KACL8B,QAAM,QAAAxE,EACHjB,EAAiB,KAChB2B,MAAI,QAAE6O,GAAY,MAClBpP,MAAI,QAAAH,EAAGwP,GAAK,KACZ5O,SAAUA,IAAA,CAAAZ,EAEL4O,GAAa,KACZhE,QAAM,QAAEjM,EAAMkH,OAAO+E,MAAM,MAC3BC,YAAU,QAAElM,EAAMkH,OAAOgF,UAAU,MACnC4C,OAAK,QAAEA,GAAO,MACdpI,OAAK,QAAEA,GAAO,MACdsI,aAAW,QAAEA,GAAa,IAAA3N,EAE3BsF,EAAc,KAACO,QAAM,QAAElH,EAAMkH,MAAM,MAAExC,aAAW,QAAE1E,EAAM0E,WAAW,KAGxEoI,QAASA,IAAMjG,EAAa7G,EAAMkH,OAAO5E,EAAE,EAC3CnB,cAAeA,IAAMwL,KAAkBxH,aAAY,CAAC,OAGxDd,OAAK,QAAErE,EAAMkH,OAAO7C,KAAK,MACzBK,aAAW,QAAE1E,EAAM0E,WAAW,MAC9BI,YAAU,QAAE9E,EAAM8E,UAAU,EAC5BQ,kBAAmBsH,EAAiB,IAAAlL,UAAA,QAAAL,EAEnCiN,EAAQ,CAACnB,WAAkB,IAAEI,MAAI,QAAEA,GAAM,MAAA7L,UAAA,QAAAL,EACvCkC,EAAQ,KAACN,QAAM,QAAEA,GAAQ,SAIlC,oUC3IA6N,IAAe,CAAC9Q,EAAQ,MAAE,WAAAC,EAAAC,GAAA,EAAAC,SAAAF,EAA6JD,EAAK,OAAAC,CAAA,oWCA5L8Q,IAAe,CAAC/Q,EAAQ,MAAE,WAAAC,EAAAC,GAAA,EAAAC,SAAAF,EAA4HD,EAAK,OAAAC,CAAA,8rBCsBrJ+Q,GAAoDhR,GAAU,CAClE,MAAMmE,EAAOC,IACP6M,EAAaC,KACb,CAAEC,mBAAoBpO,IACtB,CAAEyL,eAAgBC,KAClBrM,EAAQA,IAAMgP,GAASpR,EAAMoC,KAAK,EAClC6I,EAAUA,IAAM7I,IAAQiP,oBAExB,CAAEC,WAAYC,GAAW,KAAO,CACpC3H,OAAQ5J,EAAMoC,MAAMwH,QACpB,EAEI,CAAExH,MAAOoP,EAAc7F,MAAO8F,GAAsBC,GAAS,IACjEhC,EAAc,CAACzE,GAAS,CAAU,EAAE,CAAC,CAAC0G,CAAc,KAAO,CACzD1G,QAAS0G,GACT,CACJ,EAEMC,EAAYA,IAAMH,EAAkBI,WAAaL,KAAkB,KAEnEM,EAAgBA,IAAM1P,IAAQ2P,kBAC9BC,EAAaA,IAAMC,GAA0BH,GAAe,EAE5DI,EAAaC,GAAc,IAC/BzC,EAAc,CAACsC,GAAY,CAAU,EAAE,CAAC,CAACI,CAAK,KAAO,CACnDA,SACA,CACJ,EAEA,OACE/Q,EACCC,EAAI,KAACC,MAAI,QAAE8N,GAAA,KAACuC,GAAW,KAAI,CAACT,EAAgBnR,EAAMoC,KAAK,CAAC,MAAAV,UAAA,oBAAAzB,EAAAC,KAAAS,EAAAV,EAAAW,WAAAC,EAAAF,EAAAK,YAAAF,EAAAD,EAAAD,WAAAoB,EAAAlB,EAAAE,YAAAD,EAAAiB,EAAApB,WAAAK,EAAAF,EAAAC,YAAAW,EAAAd,EAAAG,YAAA0E,EAG9CwM,EAAWG,SAAQ,cAAA3M,GAAA,WAAAC,EAAAD,EAAA/E,CAAA,EAAnBuR,EAAWG,SAAQ1R,EAAAS,EAAAT,EAAAU,EAGvBiR,GAAoB,KAACR,eAAa,QAAEA,GAAe,KAAA1Q,EAAAnB,EAAA,IAErDiS,EAAW5C,QAAOzO,CAAA,EAAAO,EAAAN,EAAAO,EAGdC,EAAI,KAACC,MAAI,QAAE+P,KAAWiB,OAAO,EAAE9Q,MAAK,GAAAC,aAC9B,WAAA+F,EAAA7F,KAAAwE,SAAA,IAAA2C,EAAAtB,EAAA,MAEI+K,GAAazD,EAAK,MAAM,CAAC,GAAAtH,CAAA,KAKjC,GAAA1G,EAAAG,QAMQ,IAAMsN,EAAYxO,EAAMoC,MAAMwH,MAAM,EAACxI,EAAAL,EAAAM,EAE7C6N,GAAe,KAACtF,QAAM,QAAE5J,EAAMoC,MAAMwH,MAAM,KAAAxI,EAAAH,EAAA,IAENkD,EAAK+B,EAAE,sBAAsB,CAAC,EAAA9E,EAAAO,EAAA,IAGnDsP,EAAW7O,IAAQqQ,iBAAiB,CAAC,EAAAxS,CAAA,iBAAA6B,EAAApB,KAAAU,SAAAU,EAAAT,EAG1DC,EAAI,KACHC,MAAI,QAAEiQ,GAAc,MACpB3P,UAAQ,mBAAA6F,EAAA3B,KAAA4B,EAAAD,EAAA9G,WAAAQ,SAAAsG,EAAA,IAEHvD,EAAK+B,EAAE,iBAAiB,EAACyB,CAAA,EAAAvG,EAAAsG,EAAGuD,EAAO,MAAAvD,CAAA,MAGxCjG,MAAK,GAAAC,SAEHqL,GAAE1L,EAAMqR,GAAY,CAACtQ,MAAO2K,EAAE,EAAI,GAAAjL,CAAA,QAK9C,EAE+BI,EAAA,4CC7FzByQ,GAAaC,GAAK,WAAM,OAAO,0BAA+B,qDAAC,EAM/DC,GAA8C7S,GAAU,CAC5D,KAAM,CAAEmR,mBAAoBpO,IAE5B,OAAA1B,EACGwG,EAAG,KAACC,MAAI,QAAE9H,EAAMiD,MAAM,EAAAvB,SACnBU,GAAKf,EACJC,EAAI,KAACC,MAAI,OAAE,CAAC4P,EAAgB/O,CAAK,CAAC,MAAAV,UAAA,QAAAL,EAChCqC,EAAM,KAAC7B,UAAQ,QAAA3B,IAAA,MAAAwB,UAAA,QAAAL,EACbsC,EAAK,KAACpC,MAAI,QAAEa,EAAM4J,OAASX,EAAkB,MAAA3J,UAAA,QAAAL,EAC3C6J,EAAU,KAAAxJ,UAAA,QAAAL,EACRyR,GAAQ,CAAC1Q,QAAY,QAAAf,EAGzBsC,EAAK,KAACpC,MAAI,QAAEa,EAAM4J,OAASX,EAAa,MAAA3J,UAAA,QAAAL,EACtC6J,EAAU,KAAAxJ,UAAA,QAAAL,EACR0R,GAAQ,CAAC3Q,QAAY,QAAAf,EAIzBsC,EAAK,KAACpC,MAAI,QAAEa,EAAM4J,OAASX,EAAW,MAAA3J,UAAA,QAAAL,EACpC6J,EAAU,KAAAxJ,UAAA,QAAAL,EACR2R,GAAM,CAAC5Q,QAAY,QAAAf,EAGvBsC,EAAK,KAACpC,MAAI,QAAEa,EAAM4J,OAASX,EAAQ,MAAA3J,UAAA,QAAAL,EACjC6J,EAAU,KAAAxJ,UAAA,QAAAL,EACRsR,GAAU,CAACvQ,QAAY,eAKjC,CAGP,gNCZM6Q,GAA+D,CACnEC,QAAS,CAAC,CAAC,EACXF,OAAQ,CAAC,CAAC,EACVD,SAAU,CAAC,CAAC,EACZI,IAAK,CAAC,IAAI,CACZ,EAEMC,GAA+BpT,GAA4D,CAC/F,MAAMmE,EAAOC,IAEPiP,EAA8D,CAClE,CACEC,iBAAkB,UAClB5M,MAAOvC,EAAK+B,EAAE,2CAA2C,EACzD1E,KAAIH,EAAGyP,GAAQ,KAEjB,CACEwC,iBAAkB,SAClB5M,MAAOvC,EAAK+B,EAAE,2CAA2C,EACzD1E,KAAIH,EAAGkS,GAAsB,KAE/B,CACED,iBAAkB,WAClB5M,MAAOvC,EAAK+B,EAAE,6CAA6C,EAC3D1E,KAAIH,EAAGmS,GAAU,KAEnB,CACEF,iBAAkB,MAClB5M,MAAOvC,EAAK+B,EAAE,uCAAuC,EACrD1E,KAAIH,EAAG0P,GAAI,IACZ,EAGG0C,EAA2BA,IAC/BzT,EAAMkH,OAAOwM,mBAAqB,CAAC,GAAGC,EAAiB,EAEnDC,EAA8BN,GAClCG,IAA2BI,SAASP,CAAgB,EAEhDQ,EAAoBR,GAAuC,CAC/D,MAAMI,EAAoB,CAAC,GAAGD,GAA0B,EACpDG,EAA2BN,CAAgB,EAC7CI,EAAkBK,OAAOL,EAAkBM,QAAQV,CAAgB,EAAG,CAAC,EAEvEI,EAAkBjR,KAAK6Q,CAAgB,EAGzCtT,EAAM4G,WAAW,CACf,GAAG5G,EAAMkH,OACTwM,oBACD,CACH,EAEA,OAAArS,EAEKoF,GAAqB,KAACC,OAAK,QAAEvC,EAAK+B,EAAE,+CAA+C,CAAC,MAAAxE,UAAA,OAAAzB,EAAAC,KAAAkB,SAAAnB,EAAAoB,EAEhFwG,EAAG,CAACC,KAAMuL,EAAyB3R,SACjCA,CAAC,CAAE4R,mBAAkB5M,QAAOlF,WAAM,WAAAb,EAAAD,KAAAG,EAAAF,EAAAC,WAAAE,EAAAD,EAAAG,YAAAL,SAAAO,QAWtB,IAAM4S,EAAiBR,CAAgB,EAACvK,EAAApI,EAAA,QAP1C+F,CAAK,EAAAtF,EAAAP,EASuBW,CAAI,EAAAJ,EAAAN,EAChB4F,CAAK,EAAAN,EAAA4B,GAAA,OAAAW,EAAA,EARHiL,EAA2BN,CAAgB,EAAC1K,EAAA,EACtDgL,EAA2BN,CAAgB,EAACzK,EACxC,CAAC+K,EAA2BN,CAAgB,EAACxK,EAC/C,CAAC8K,EAA2BN,CAAgB,EAAC3K,WAAAX,EAAAW,KAAAhI,EAAA0H,UAAAC,OAAA,sBAAAN,EAAAW,KAAA,EAAAC,IAAAZ,EAAAY,MAAAjI,EAAA0H,UAAAC,OAAA,YAAAN,EAAAY,MAAA,EAAAC,IAAAb,EAAAa,MAAAlI,EAAA0H,UAAAC,OAAA,gBAAAN,EAAAa,MAAA,EAAAC,IAAAd,EAAAc,MAAAnI,EAAA0H,UAAAC,OAAA,cAAAN,EAAAc,MAAA,EAAAd,CAAA,GAAAW,IAAAJ,OAAAK,KAAAL,OAAAM,KAAAN,OAAAO,KAAAP,OAAA,EAAA5H,CAAA,KAOjE,GAAAV,CAAA,GAMb,EAEMgU,GAAiEjU,GAAU,CAC/E,MAAMmE,EAAOC,IACP,CAAEtB,SAAQ+D,gBAAiB9D,IAE3B,CAAC4J,EAAgBC,CAAiB,EAAIrM,IAEtC4M,EAAWC,EAAY,KAAO,CAClCC,SAAU,KACVC,OAAQA,IAAM,CACZX,KAAkBxH,aACpB,GACA,EAEIuO,EAAoBA,IAAM1T,EAAMkH,OAAOwM,mBAAqB,CAAC,GAAGC,EAAiB,EACjFtQ,EAAQA,IAAMT,EAAK8Q,IAAoBQ,QAASrQ,GAASoP,GAAyBpP,CAAI,CAAC,CAAC,EAExF,CAAEZ,OAAQkR,EAAe5G,QAASrK,EAAgB,IACtDG,IAAQoH,OAAS,EACb,CACEtH,UAAWL,IAASK,UACpBC,QAAS,CACP,CACEC,MAAOA,IACP,KAAM,CAACrD,EAAMkH,OAAO0C,MAAM,EAC1BtG,MAAO,GACPoK,MAAOP,EAASO,QAChBC,MAAOR,EAASQ,OAAM,CACvB,EAEHC,UAAW,GACXG,kBAAoB3L,GACdpC,EAAMkH,OAAO8G,eAAiB,KAAa,GACxCC,EAAmBjO,EAAMkH,OAAO8G,aAAa,EAAE5L,EAAMwD,OAAO,CACrE,EAEF,IACN,EAEAX,SAAa,IAAMkI,EAASe,UAAUiG,GAAe,CAAC,EAEtD9S,EACG0C,EAAM,KACL8B,QAAM,QAAAxE,EACHjB,EAAiB,KAChB2B,MAAI,QAAE/B,EAAMkH,OAAOnF,MAAQoC,EAAK+B,EAAE,qBAAqB,CAAC,MACxD1E,MAAI,QAAAH,EAAG+S,GAAI,KACXnS,SAAUA,IAAAZ,EACPsF,EAAc,KACbO,QAAM,QAAElH,EAAMkH,MAAM,MACpBxC,aAAW,QAAE1E,EAAM0E,WAAW,EAC9B8D,oBAAqB4K,GAA2B,EAGpDtG,QAASA,IAAMjG,EAAa7G,EAAMkH,OAAO5E,EAAE,EAC3CnB,cAAeA,IAAMwL,KAAkBxH,aAAY,CAAC,OAGxDd,OAAK,QAAErE,EAAMkH,OAAO7C,KAAK,MACzBK,aAAW,QAAE1E,EAAM0E,WAAW,MAC9BI,YAAU,QAAE9E,EAAM8E,UAAU,EAC5BQ,kBAAmBsH,EAAiB,IAAAlL,UAAA,QAAAL,EAEnCiN,EAAQ,CAACnB,WAAkB,IAAEI,MAAI,QAAEA,GAAM,MAAA7L,UAAA,QAAAL,EACvCwR,GAAY,KAAC5P,QAAM,QAAEkR,GAAe,SAI7C,EAEkCjS,EAAA,WCzKlC,MAAMmS,GAAmDrU,GAAU,CACjE,MAAMmE,EAAOC,IACP,CAAEtB,SAAQ+D,gBAAiB9D,IAE3B,CAAC4J,EAAgBC,CAAiB,EAAIrM,IAEtC4M,EAAWC,EAAY,KAAO,CAClCC,SAAU,KACVC,OAAQA,IAAM,CACZX,KAAkBxH,aACpB,GACA,EAEI,CAAElC,SAAQsK,QAASrK,EAAgB,KAAO,CAC9CC,UAAWL,IAASK,UACpBC,QAAS,CACP,CACEC,MAAO,CAAC,EAAG,CAAC,EACZmK,QAAS,CAACxN,EAAMkH,OAAO0C,MAAM,EAC7BtG,MAAO,GACPoK,MAAOP,EAASO,QAChBC,MAAOR,EAASQ,OAAM,CACvB,EAEHC,UAAW,GACXG,kBAAoB3L,GACdpC,EAAMkH,OAAO8G,eAAiB,KAAa,GACxCC,EAAmBjO,EAAMkH,OAAO8G,aAAa,EAAE5L,EAAMwD,OAAO,CACrE,EACA,EAEFX,SAAa,IAAMkI,EAASe,UAAUjL,GAAQ,CAAC,EAE/C5B,EACG0C,EAAM,KACL8B,QAAM,QAAAxE,EACHjB,EAAiB,KAChB2B,MAAI,QAAE/B,EAAMkH,OAAOnF,MAAQoC,EAAK+B,EAAE,cAAc,CAAC,MACjD1E,MAAI,QAAAH,EAAGiT,GAAI,KACXrS,SAAUA,IAAAZ,EAAOsF,EAAc,KAACO,QAAM,QAAElH,EAAMkH,MAAM,MAAExC,aAAW,QAAE1E,EAAM0E,WAAW,IACpFoI,QAASA,IAAMjG,EAAa7G,EAAMkH,OAAO5E,EAAE,EAC3CnB,cAAeA,IAAMwL,KAAkBxH,aAAY,CAAC,OAGxDd,OAAK,QAAErE,EAAMkH,OAAO7C,KAAK,MACzBK,aAAW,QAAE1E,EAAM0E,WAAW,MAC9BI,YAAU,QAAE9E,EAAM8E,UAAU,EAC5BQ,kBAAmBsH,EAAiB,IAAAlL,UAAA,QAAAL,EAEnCiN,EAAQ,CAACnB,WAAkB,IAAEI,MAAI,QAAEA,GAAM,MAAA7L,UAAA,QAAAL,EACvCkC,EAAQ,KAACN,QAAM,QAAEA,GAAQ,SAIlC,ECtDMsR,GAA2DvU,GAAU,CACzE,MAAMmE,EAAOC,IACP,CAAEtB,SAAQ+D,gBAAiB9D,IAE3B,CAAC4J,EAAgBC,CAAiB,EAAIrM,IAEtC4M,EAAWC,EAAY,KAAO,CAClCC,SAAU,KACVC,OAAQA,IAAM,CACZX,KAAkBxH,aACpB,GACA,EAEI,CAAElC,OAAQuR,EAAWjH,QAASrK,EAAgB,KAAO,CACzDC,UAAWL,IAASK,UACpBC,QAAS,CACP,CACEC,MAAO,CAAC,CAAC,EACTmK,QAAS,CAACxN,EAAMkH,OAAO0C,MAAM,EAC7BtG,MAAO,GACPoK,MAAOP,EAASO,QAChBC,MAAOR,EAASQ,OAAM,CACvB,EAEHC,UAAW,GACXG,kBAAoB3L,GACdpC,EAAMkH,OAAO8G,eAAiB,KAAa,GACxCC,EAAmBjO,EAAMkH,OAAO8G,aAAa,EAAE5L,EAAMwD,OAAO,CACrE,EACA,EAEFX,SAAa,IAAMkI,EAASe,UAAUsG,GAAW,CAAC,EAElDnT,EACG0C,EAAM,KACL8B,QAAM,QAAAxE,EACHjB,EAAiB,KAChB2B,MAAI,QAAE/B,EAAMkH,OAAOnF,MAAQoC,EAAK+B,EAAE,kBAAkB,CAAC,MACrD1E,MAAI,QAAAH,EAAGoT,GAAK,KACZxS,SAAUA,IAAAZ,EAAOsF,EAAc,KAACO,QAAM,QAAElH,EAAMkH,MAAM,MAAExC,aAAW,QAAE1E,EAAM0E,WAAW,IACpFoI,QAASA,IAAMjG,EAAa7G,EAAMkH,OAAO5E,EAAE,EAC3CnB,cAAeA,IAAMwL,KAAkBxH,aAAY,CAAC,OAGxDd,OAAK,QAAErE,EAAMkH,OAAO7C,KAAK,MACzBK,aAAW,QAAE1E,EAAM0E,WAAW,MAC9BI,YAAU,QAAE9E,EAAM8E,UAAU,EAC5BQ,kBAAmBsH,EAAiB,IAAAlL,UAAA,QAAAL,EAEnCiN,EAAQ,CAACnB,WAAkB,IAAEI,MAAI,QAAEA,GAAM,MAAA7L,UAAA,QAAAL,EACvCwR,GAAY,KAAC5P,QAAM,QAAEuR,GAAW,SAIzC,ECtDME,GAAqD1U,GAAU,CACnE,MAAMmE,EAAOC,IACP,CAAEyC,gBAAiB9D,IAEnB,CAAC4J,EAAgBC,CAAiB,EAAIrM,IAEtC4M,EAAWC,EAAY,KAAO,CAClCC,SAAU,MACVC,OAAQA,IAAM,CACZX,KAAkBxH,aACpB,GACA,EAEI,CAAElC,SAAQsK,QAASrK,EAAgB,KAAO,CAC9CC,UAAWnD,EAAMkH,OAAO/D,UACxBC,QAAS,CACP,CACEC,MAAO,CAAC,CAAC,EACTC,MAAO,GACPoK,MAAOP,EAASO,QAChBC,MAAOR,EAASQ,OAAM,CACvB,EAEHC,UAAW,GACXG,kBAAoB3L,GACdpC,EAAMkH,OAAO8G,eAAiB,KAAa,GACxCC,EAAmBjO,EAAMkH,OAAO8G,aAAa,EAAE5L,EAAMwD,OAAO,CACrE,EACA,EAEFX,SAAa,IAAMkI,EAASe,UAAUjL,GAAQ,CAAC,EAE/C5B,EACG0C,EAAM,KACL8B,QAAM,QAAAxE,EACHjB,EAAiB,KAChB2B,MAAI,QAAE/B,EAAMkH,OAAOnF,MAAQoC,EAAK+B,EAAE,cAAc,CAAC,MACjD1E,MAAI,QAAAH,EAAGsT,GAAQ,KACf1S,SAAUA,IAAAZ,EAAOsF,EAAc,KAACO,QAAM,QAAElH,EAAMkH,MAAM,MAAExC,aAAW,QAAE1E,EAAM0E,WAAW,IACpFoI,QAASA,IAAMjG,EAAa7G,EAAMkH,OAAO5E,EAAE,EAC3CnB,cAAeA,IAAMwL,KAAkBxH,aAAY,CAAC,OAGxDd,OAAK,QAAErE,EAAMkH,OAAO7C,KAAK,MACzBK,aAAW,QAAE1E,EAAM0E,WAAW,MAC9BI,YAAU,QAAE9E,EAAM8E,UAAU,EAC5BQ,kBAAmBsH,EAAiB,IAAAlL,UAAA,QAAAL,EAEnCiN,EAAQ,CAACnB,WAAkB,IAAEI,MAAI,QAAEA,GAAM,MAAA7L,UAAA,QAAAL,EACvCkC,EAAQ,KAACN,QAAM,QAAEA,GAAQ,SAIlC,8XCpDM2R,GAA0D5U,GAAU,CACxE,KAAM,CAACK,EAAkBC,CAAkB,EAAIC,EAAa,EAAK,EAC3D,CAACoL,EAAOkJ,CAAQ,EAAItU,EAAa,EAAE,EAEnC,CAAEqG,cAAe7D,IAEjBvC,EAAuBA,IAAMF,EAAoBG,GAAY,CAACA,CAAO,EAErEqU,EAAcA,IAAM,CACpBnJ,MAAY3L,EAAMkH,OAAOyE,OAC7B/E,EAAW,CAAE,GAAG5G,EAAMkH,OAAQyE,MAAOA,GAAM,CAAG,CAChD,EAEMoJ,EAAwDA,IAAM,CAClED,GACF,EAEME,EAA2DjI,GAAO,CACtE8H,EAAS9H,EAAGkI,cAAcxP,KAAK,CACjC,EAEMyP,EAAgEnI,GAAO,CAC3EA,EAAGoI,iBACHL,GACF,EAEA3G,SAAQ,IAAM,CACZ0G,EAAS7U,EAAMkH,OAAOyE,KAAK,CAC7B,CAAC,GAED,WAAA1L,EAAAC,KAAAS,EAAAV,EAAAW,WAAAC,EAAAF,EAAAC,WAAAE,EAAAD,EAAAD,WAAAoB,EAAAnB,EAAAG,YAAAD,EAAAiB,EAAApB,WAAAK,EAAAe,EAAAhB,YAAAF,SAAAI,QAOmB,IAAMlB,EAAMmB,kBAAiBC,EAAAN,EAAAO,EAErC+T,GAAe,KAAApT,EAAAqT,iBAAA,SAGWH,CAAY,EAAAnU,EAAAsU,iBAAA,OAO/BN,CAAU,EAAAhU,EAAAsU,iBAAA,SADRL,CAAY,EAAA/T,EAAAC,QAIM,IAAMV,IAAsBY,EAAAH,EAAAI,EACzDtB,GAAgB,KAAAqB,EAAAnB,EAAAoB,EAGpBC,EAAI,KAACC,MAAI,QAAElB,GAAkB,MAAAqB,UAAA,QAAG1B,EAAMiC,UAAU,UAAAmE,MAAArF,EAAA0E,MATpCkG,GAAO,EAAA1L,CAAA,IAY1B,EAQMqV,GAAqDtV,GAAU,CACnE,KAAM,CAAE6G,gBAAiB9D,IAEnB,CAAC4J,EAAgBC,CAAiB,EAAIrM,IAEtC4M,EAAWC,EAAY,KAAO,CAClCC,SAAU,KACVC,OAAQA,IAAM,CACZX,KAAkBxH,aACpB,GACA,EAEI,CAAElC,SAAQsK,QAASrK,EAAgB,IAAM,CAC7C,KAAM,CAAEyI,SAAU3L,EAAMkH,OAExB,OAAIyE,EAAMlB,SAAW,EAAU,KAExB,CACLtH,UAAWoS,GACXnS,QAAS,CACP,CACEC,MAAO,CAAC,CAAC,EACTmS,OAAQ7J,EACRrI,MAAO,GACPoK,MAAOP,EAASO,QAChBC,MAAOR,EAASQ,OAAM,CACvB,EAEHC,UAAW,GACXG,kBAAoB3L,GACdA,EAAMyN,KAAK4F,UAAU,CAAC,CAACC,CAAO,IAAMA,IAAY,SAAWA,IAAY,OAAO,GAAK,EAC9E,GACL1V,EAAMkH,OAAO8G,eAAiB,KAAa,GACxCC,EAAmBjO,EAAMkH,OAAO8G,aAAa,EAAE5L,EAAMwD,OAAO,CACrE,CAEJ,CAAC,EAEDX,SAAa,IAAM,CACjBkI,EAASe,UAAUjL,GAAQ,CAC7B,CAAC,EAED5B,EACG0C,EAAM,KACL8B,QAAM,QAAAxE,EACHuT,GAAkB,KACjB1N,QAAM,QAAElH,EAAMkH,MAAM,EACpBjF,SAAUA,IAAAZ,EAAOsF,EAAc,KAACO,QAAM,QAAElH,EAAMkH,MAAM,MAAExC,aAAW,QAAE1E,EAAM0E,WAAW,IACpFoI,QAASA,IAAMjG,EAAa7G,EAAMkH,OAAO5E,EAAE,EAC3CnB,cAAeA,IAAMwL,KAAkBxH,aAAY,CAAC,OAGxDd,OAAK,QAAErE,EAAMkH,OAAO7C,KAAK,MACzBK,aAAW,QAAE1E,EAAM0E,WAAW,MAC9BI,YAAU,QAAE9E,EAAM8E,UAAU,EAC5BQ,kBAAmBsH,EAAiB,IAAAlL,UAAA,QAAAL,EAEnCiN,EAAQ,CAACnB,WAAkB,IAAEI,MAAI,QAAEA,GAAM,MAAA7L,UAAA,QAAAL,EACvCkC,EAAQ,KAACN,QAAM,QAAEA,GAAQ,SAIlC,EAE4Bf,EAAA,4HC7ItByT,GAAUA,IAAM,CACpB,KAAM,CAAE7S,UAAWC,IAEnB,kBAAA9C,EAAAC,KAAAkB,SAAAnB,EAAAoB,EAEKwG,EAAG,KAACC,MAAI,QAAEhF,IAAS8S,OAAO,EAAAlU,SACxBA,CAACwF,EAAQE,IAAU,CAClB,MAAM1C,EAAcA,IAAM0C,IAAU,EAC9BtC,EAAaA,IAAMJ,MAAkB5B,IAAS8S,QAAQnL,OAC5D,OAAApJ,EACGqC,EAAM,KAAAhC,UAAA,QAAAL,EACJsC,EAAK,KAACpC,MAAI,QAAE2F,EAAO2O,aAAe,aAAe3O,CAAM,EAAEzF,MAAK,GAAAC,SAC3DoU,GAAezU,EACd2L,GAAe,CACd9F,OAAQ4O,EAAe,IACvBpR,aAAW,QAAEA,GAAa,MAC1BI,YAAU,QAAEA,GAAY,IAE3B,EAAAzD,EAEFsC,EAAK,KAACpC,MAAI,QAAE2F,EAAO2O,aAAe,gBAAkB3O,CAAM,EAAEzF,MAAK,GAAAC,SAC9DqU,GAAkB1U,EACjB4S,GAAkB,CACjB/M,OAAQ6O,EAAkB,IAC1BrR,aAAW,QAAEA,GAAa,MAC1BI,YAAU,QAAEA,GAAY,IAE3B,EAAAzD,EAEFsC,EAAK,KAACpC,MAAI,QAAE2F,EAAO2O,aAAe,SAAW3O,CAAM,EAAEzF,MAAK,GAAAC,SACvDsU,GAAW3U,EACVgT,GAAW,CACVnN,OAAQ8O,EAAW,IACnBtR,aAAW,QAAEA,GAAa,MAC1BI,YAAU,QAAEA,GAAY,IAE3B,EAAAzD,EAEFsC,EAAK,KAACpC,MAAI,QAAE2F,EAAO2O,aAAe,aAAe3O,CAAM,EAAEzF,MAAK,GAAAC,SAC3DuU,GAAe5U,EACdkT,GAAe,CACdrN,OAAQ+O,EAAe,IACvBvR,aAAW,QAAEA,GAAa,MAC1BI,YAAU,QAAEA,GAAY,IAE3B,EAAAzD,EAEFsC,EAAK,KAACpC,MAAI,QAAE2F,EAAO2O,aAAe,UAAY3O,CAAM,EAAEzF,MAAK,GAAAC,SACxDuU,GAAe5U,EACdqT,GAAY,CACXxN,OAAQ+O,EAAe,IACvBvR,aAAW,QAAEA,GAAa,MAC1BI,YAAU,QAAEA,GAAY,IAE3B,EAAAzD,EAEFsC,EAAK,KAACpC,MAAI,QAAE2F,EAAO2O,aAAe,aAAe3O,CAAM,EAAEzF,MAAK,GAAAC,SAC3DwU,GAAe7U,EACd8U,GAAe,CACdjP,OAAQgP,EAAe,IACvBxR,aAAW,QAAEA,GAAa,MAC1BI,YAAU,QAAEA,GAAY,IAE3B,EAAAzD,EAEFsC,EAAK,KAACpC,MAAI,QAAE2F,EAAO2O,aAAe,YAAc3O,CAAM,EAAEzF,MAAK,GAAAC,SAC1D0U,GAAc/U,EACbqL,GAAc,CACbxF,OAAQkP,EAAc,IACtB1R,aAAW,QAAEA,GAAa,MAC1BI,YAAU,QAAEA,GAAY,IAE3B,EAAAzD,EAEFsC,EAAK,KAACpC,MAAI,QAAE2F,EAAO2O,aAAe,UAAY3O,CAAM,EAAEzF,MAAK,GAAAC,SACxDuU,GAAe5U,EACdiU,GAAY,CACXpO,OAAQ+O,EAAe,IACvBvR,aAAW,QAAEA,GAAa,MAC1BI,YAAU,QAAEA,GAAY,IAE3B,KAIT,EAAC,GAAA7E,CAAA,IAIT,EC7FMoW,GAA8B,CAClC,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAe,EAC/C,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,mBAAmB,EACnD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,iBAAiB,EACjD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,iBAAiB,EACjD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,mBAAmB,EACnD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,eAAgB,YAAa,EAAE,EAC/D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,mBAAmB,EACnD,CAAE,IAAK,YAAa,QAAS,CAAE,QAAS,mBAAmB,EAC3D,CAAE,IAAK,YAAa,QAAS,CAAE,QAAS,iBAAiB,EACzD,CAAE,IAAK,UAAW,QAAS,CAAE,QAAS,iBAAiB,EACvD,CAAE,IAAK,aAAc,QAAS,CAAE,QAAS,mBAAmB,EAC5D,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,OAAO,EACvC,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,SAAS,EACzC,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,gBAAgB,EAChD,CAAE,IAAK,IAAK,QAAS,CAAE,QAAS,WAAW,EAC3C,CAAE,IAAK,QAAS,QAAS,CAAE,QAAS,iBAAiB,EACrD,CAAE,IAAK,YAAa,QAAS,CAAE,QAAS,kBAAkB,CAC5D,EAOMC,GAAsBC,GAA0B,CACpD,MAAMC,MAAU,IAChB,OAAAD,EAAU,QAASE,GAAa,CAC9BD,EAAI,IAAIC,EAAS,IAAKA,CAAQ,CAChC,CAAC,EACMD,CACT,EAEME,GAAkB,CAAC,CAAE,UAAAH,EAAYF,GAAiB,WAAAM,KAAuC,CAC7F,MAAMC,EAAeN,GAAmBC,CAAS,EAEjDpI,EAAQ,IAAM,CACZ,MAAM0I,EAAgBC,GAAU/J,GAAsB,CAGpD,GAFIA,EAAG,OAAS,WACZA,EAAG,SAAWA,EAAG,QAAUA,EAAG,SAC9BA,EAAG,kBAAkB,qBAAuBA,EAAG,kBAAkB,iBAAkB,OAEvF,MAAM0J,EAAWG,EAAa,IAAI7J,EAAG,GAAG,EAEpC0J,GAAY,MAEhBE,EAAWF,CAAQ,CACrB,EAAG,EAAE,EAEL,OAAO,iBAAiB,UAAWI,CAAa,EAEhDzI,GAAU,IAAM,CACd,OAAO,oBAAoB,UAAWyI,CAAa,CACrD,CAAC,CACH,CAAC,CACH,EAEaE,GAAuB,IAAM,CACxC,MAAMhQ,EAAUC,GAAA,EAEhB0P,GAAgB,CACd,WAAaD,GAAa,CACxB1P,EAAQ0P,EAAS,OAAO,EAAE,KACxB,IAAM,QAAQ,MAAM,iBAAiBA,EAAS,GAAG,8BAA8B,EAC9EjP,GAAQ,QAAQ,MAAMA,CAAG,EAE9B,EACD,CACH,yGC1EM6G,GAAkBA,IAAM,CAC5B0I,KAEA,MAAMC,EAAOC,KACP,CAAEnU,SAAQoU,qBAAsBnU,IAChC6G,EAASC,KAEf5E,SAAa,IAAM,CACjBkS,QAAQC,WACNtU,IAASK,UAAUqT,IAAI,MAAOa,GAAa,CACzC,GAAI,CACF,MAAMC,EAAQ,MAAMN,IAAOO,YAAYF,CAAQ,EAC/CC,EAAME,SAAYC,GAAgB,CAChCnQ,QAAQC,MAAO,WAAU8P,CAAS,KAAII,CAAI,EAAC,CAC7C,EACAH,EAAMI,QAAU,IAAM,CACpBpQ,QAAQyD,KAAM,UAASsM,CAAS,EAAC,CACnC,CACF,OAAS7P,EAAK,CACZF,QAAQC,MAAM,qBAAsBC,CAAG,CACzC,CACF,CAAC,CACH,EAAEH,MAAM,IAAM,CACZ,CACD,CACH,CAAC,EAEDpC,EAAa,IAAM,CAEjB,MAAM+E,EAAIJ,IACNI,GAAK,MACPkN,EAAkB,CAAEtN,OAAQI,EAAG,CAEnC,CAAC,EAED2N,GAASnQ,GAAQ,CACfF,QAAQC,MAAM,mBAAoBC,CAAG,CACvC,CAAC,GAED,WAAAvH,EAAAC,KAAAkB,SAAAnB,EAAAoB,EAEKuW,GAAO,UAAAxW,EAAAnB,EAAAoB,EACPsU,GAAO,UAAAvU,EAAAnB,EAAAoB,EACPwW,GAAW,UAAA5X,CAAA,IAGlB","names":["EllipsisVertical","props","_el$","_tmpl$","_$spread","BasicColumnHeader","isSettingsOpened","setIsSettingOpened","createSignal","toggleSettingsOpened","current","_tmpl$2","_el$2","firstChild","_el$3","_el$4","_el$6","nextSibling","_el$7","$$click","onClickHeader","_$insert","_$createComponent","Show","when","icon","keyed","children","_el$8","_tmpl$3","fallback","_el$9","name","_el$5","settings","_$delegateEvents","relatedEvents","event","ids","id","rootId","rootEvent","push","replyId","replyingToEvent","uniq","RepliesDisplay","config","useConfig","textNote","events","useSubscription","relayUrls","filters","kinds","limit","Timeline","reverse","TimelineContentDisplay","Switch","Match","timelineContent","type","replies","Column","columnDivRef","timelineState","useTimelineState","i18n","useTranslation","width","useHandleCommand","commandType","handler","command","columnIndex","scrollIntoView","behavior","inline","lastColumn","timelineEl","setTimelineEl","createEffect","operator","scrollToTop","scrollTo","top","columnOperatorRef","TimelineContext","Provider","value","_ref$","_$use","content","header","timeline","_tmpl$4","clearTimeline","ArrowLeft","t","_tmpl$5","_$effect","_$p","_$classList","ChevronLeft","Trash","ColumnSettingsSection","title","ColumnSettings","saveColumn","removeColumn","moveColumn","request","useRequestCommand","setColumnWidth","column","move","index","catch","console","error","err","_el$10","_el$11","_el$12","_el$13","For","each","_el$14","_p$","_v$5","_v$6","_v$7","_v$8","classList","toggle","undefined","renderOtherSettings","render","ChevronRight","_v$","_v$2","_v$3","_v$4","_$setAttribute","memo","setMemo","createRoot","updateMemo","encrypted","decrypted","decrypting","setDecrypting","isDecrypting","untrack","useDecrypt","propsProvider","pubkey","usePubkey","setDecrypted","memoizedValue","p","updateDecrypting","decrypt","result","batch","Bookmark","bookmark","createMemo","genericEvent","length","bookmarkedEventIdsPrivate","json","log","parseTags","taggedEventIds","warn","bookmarkedEventIds","eventId","ColumnItem","EventDisplayById","ensureKinds","Kind","queryKeyUseParameterizedReplaceableEvent","useParameterizedReplaceableEvent","queryClient","useQueryClient","genQueryKey","query","createQuery","queryKey","signal","currentProps","kind","author","identifier","task","BatchedEventsTask","promise","latest","pickLatestEvent","registerTask","timeout","BookmarkColumn","columnOperator","setColumnOperator","BookmarkIcon","onClose","ev","FollowingColumn","followingPubkeys","useFollowings","loadMore","useLoadMore","duration","onLoad","eose","authors","debugId","since","until","eoseLimit","continuous","onEOSE","clientEventFilter","contentFilter","applyContentFilter","setEvents","onMount","onCleanup","Home","LoadMore","ColumnInfo","showProfile","useModalState","otherActionsPopup","useContextMenu","menu","otherActionMenuItems","image","url","description","authorPubkey","UserDisplayName","open","targetRef","_$memo","popup","useFollowSet","Kind.Followsets","decryptedContent","ensureNonNull","decryptedTags","decryptedJson","tags","NostrSetTags","followSet","NostrSet","FollowSetInfo","naddr","naddrEncode","Followsets","onSelect","navigator","clipboard","writeText","window","alert","pubkeys","columnName","Users","AtSymbol","Bolt","ReactionDisplay","formatDate","useFormatDate","shouldMuteEvent","reaction","lastTaggedEventId","profile","useProfile","reactedEvent","reactedEventQuery","useEvent","eventIdNonNull","isRemoved","isSuccess","reactionTypes","toReactionTypes","emojiTypes","reactionTypesToEmojiTypes","emojiPopup","useEmojiPopup","emoji","emojiRef","ReactionEmojiDisplay","picture","thumbnailUrl","createdAtAsDate","EventDisplay","ZapReceipt","lazy","Notification","TextNote","Reaction","Repost","NotificationTypeKindsMap","Replies","Zap","NotificationSettingsSection","notificationFilterOptions","notificationType","ArrowPathRoundedSquare","HeartSolid","currentNotificationTypes","notificationTypes","NotificationTypes","isNotificationTypeSelected","includes","toggleColumnType","splice","indexOf","NotificationColumn","flatMap","notifications","Bell","PostsColumn","User","ReactionsColumn","reactions","Heart","RelaysColumn","GlobeAlt","SearchColumnHeader","setQuery","updateQuery","handleBlur","handleChange","currentTarget","handleSubmit","preventDefault","MagnifyingGlass","addEventListener","SearchColumn","relaysForSearching","search","findIndex","tagName","Columns","columns","columnType","followingColumn","notificationColumn","postsColumn","reactionsColumn","followSetColumn","FollowSetColumn","bookmarkColumn","defaultShortcut","createShortcutsMap","shortcuts","map","shortcut","useShortcutKeys","onShortcut","shortcutsMap","handleKeydown","throttle","useMountShortcutKeys","pool","usePool","initializeColumns","Promise","allSettled","relayUrl","relay","ensureRelay","onnotice","msg","onclose","onError","SideBar","GlobalModal"],"ignoreList":[0,4,5,15,16],"sources":["../../node_modules/heroicons/24/outline/ellipsis-vertical.svg","../../src/components/column/BasicColumnHeader.tsx","../../src/components/timeline/TimelineContentDisplay.tsx","../../src/components/column/Column.tsx","../../node_modules/heroicons/24/outline/chevron-left.svg","../../node_modules/heroicons/24/outline/trash.svg","../../src/components/column/ColumnSettings.tsx","../../src/nostr/useDecrypt.ts","../../src/components/timeline/Bookmark.tsx","../../src/nostr/useParameterizedReplaceableEvent.ts","../../src/components/column/BookmarkColumn.tsx","../../src/components/column/FollowingColumn.tsx","../../src/components/column/ColumnInfo.tsx","../../src/nostr/useFollowSet.ts","../../src/components/column/FollowSetColumn.tsx","../../node_modules/heroicons/24/outline/at-symbol.svg","../../node_modules/heroicons/24/solid/bolt.svg","../../src/components/event/Reaction.tsx","../../src/components/timeline/Notification.tsx","../../src/components/column/NotificationColumn.tsx","../../src/components/column/PostsColumn.tsx","../../src/components/column/ReactionsColumn.tsx","../../src/components/column/RelaysColumn.tsx","../../src/components/column/SearchColumn.tsx","../../src/components/column/Columns.tsx","../../src/hooks/useShortcutKeys.ts","../../src/pages/Home.tsx"],"sourcesContent":["export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5m0 6a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5m0 6a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5\"/></svg>","import { type Component, type JSX, Show, createSignal } from 'solid-js';\n\nimport EllipsisVertical from 'heroicons/24/outline/ellipsis-vertical.svg';\n\nexport type BasicColumnHeaderProps = {\n  name: string;\n  icon?: JSX.Element;\n  settings: () => JSX.Element;\n  onClose?: () => void;\n  onClickHeader?: () => void;\n};\n\nconst BasicColumnHeader: Component<BasicColumnHeaderProps> = (props) => {\n  const [isSettingsOpened, setIsSettingOpened] = createSignal(false);\n\n  const toggleSettingsOpened = () => setIsSettingOpened((current) => !current);\n\n  return (\n    <div class=\"flex flex-col\">\n      <div class=\"flex h-8 items-center gap-1\">\n        <h2 class=\"min-w-0 flex-1\">\n          <button\n            type=\"button\"\n            class=\"flex w-full items-center gap-1 ps-2 select-text\"\n            onClick={() => props.onClickHeader?.()}\n          >\n            <Show when={props.icon} keyed>\n              {(icon) => <span class=\"inline-block size-4 shrink-0 text-fg-secondary\">{icon}</span>}\n            </Show>\n            <Show when={props.onClickHeader} fallback={<span class=\"truncate\">{props.name}</span>}>\n              <span class=\"truncate\">{props.name}</span>\n            </Show>\n          </button>\n        </h2>\n        <button class=\"flex h-full place-items-center px-2\" onClick={() => toggleSettingsOpened()}>\n          <span class=\"inline-block size-4\">\n            <EllipsisVertical />\n          </span>\n        </button>\n      </div>\n      <Show when={isSettingsOpened()}>{props.settings()}</Show>\n    </div>\n  );\n};\n\nexport default BasicColumnHeader;\n","import { Switch, Match, type Component } from 'solid-js';\n\nimport uniq from 'lodash/uniq';\nimport { type Filter } from 'nostr-tools/filter';\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport Timeline from '@/components/timeline/Timeline';\nimport { type TimelineContent } from '@/components/timeline/TimelineContext';\nimport useConfig from '@/core/useConfig';\nimport { textNote } from '@/nostr/event';\nimport useSubscription from '@/nostr/useSubscription';\n\nimport type TextNote from '@/nostr/event/TextNote';\n\nconst relatedEvents = (event: TextNote) => {\n  const ids = [event.id];\n\n  const rootId = event.rootEvent()?.id;\n  if (rootId != null) ids.push(rootId);\n\n  const replyId = event.replyingToEvent()?.id;\n  if (replyId != null) ids.push(replyId);\n\n  return uniq(ids);\n};\n\nconst RepliesDisplay: Component<{ event: NostrEvent }> = (props) => {\n  const { config } = useConfig();\n\n  const event = () => textNote(props.event);\n\n  const { events } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [\n      { kinds: [1], ids: relatedEvents(event()), limit: 25 },\n      { kinds: [1], '#e': [props.event.id], limit: 25 } as Filter,\n    ],\n    limit: 200,\n  }));\n\n  return <Timeline events={[...events()].reverse()} />;\n};\n\nconst TimelineContentDisplay: Component<{ timelineContent: TimelineContent }> = (props) => (\n  <Switch>\n    <Match when={props.timelineContent.type === 'Replies' && props.timelineContent} keyed>\n      {(replies) => <RepliesDisplay event={replies.event} />}\n    </Match>\n  </Switch>\n);\n\nexport default TimelineContentDisplay;\n","import { Show, type JSX, type Component, createSignal, createEffect } from 'solid-js';\n\nimport ArrowLeft from 'heroicons/24/outline/arrow-left.svg';\n\nimport TimelineContentDisplay from '@/components/timeline/TimelineContentDisplay';\nimport { TimelineContext, useTimelineState } from '@/components/timeline/TimelineContext';\nimport { type ColumnWidth } from '@/core/column';\nimport { useHandleCommand } from '@/hooks/useCommandBus';\nimport { useTranslation } from '@/i18n/useTranslation';\n\nexport type ColumnProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  width: ColumnWidth;\n  header: JSX.Element;\n  children: JSX.Element;\n  columnOperatorRef?: (el: ColumnOperator) => void;\n};\n\nexport interface ColumnOperator {\n  scrollToTop(): void;\n}\n\nconst Column: Component<ColumnProps> = (props) => {\n  let columnDivRef: HTMLDivElement | undefined;\n\n  const timelineState = useTimelineState();\n  const i18n = useTranslation();\n\n  const width = () => props.width ?? 'medium';\n\n  useHandleCommand(() => ({\n    commandType: 'moveToColumn',\n    handler: (command) => {\n      if (command.command === 'moveToColumn' && command.columnIndex === props.columnIndex) {\n        columnDivRef?.scrollIntoView({ behavior: 'smooth', inline: 'center' });\n      }\n    },\n  }));\n\n  useHandleCommand(() => ({\n    commandType: 'moveToLastColumn',\n    handler: () => {\n      if (props.lastColumn) {\n        columnDivRef?.scrollIntoView({ behavior: 'smooth' });\n      }\n    },\n  }));\n\n  // 2つの `ref={setTimelineEl}` は `<Show>` の異なる分岐に存在し、\n  // 同時にレンダリングされないので、`timelineEl` は常にひとつの HTMLElement と関連づけられる。\n  const [timelineEl, setTimelineEl] = createSignal<HTMLElement>();\n\n  createEffect(() => {\n    const operator: ColumnOperator = {\n      scrollToTop: () => {\n        timelineEl()?.scrollTo({ top: 0, behavior: 'smooth' });\n      },\n    };\n\n    props.columnOperatorRef?.(operator);\n  });\n\n  return (\n    <TimelineContext.Provider value={timelineState}>\n      <div\n        ref={columnDivRef}\n        class=\"flex w-[80vw] shrink-0 snap-center snap-always flex-col border-r border-border sm:snap-align-none\"\n        classList={{\n          'sm:w-[500px]': width() === 'widest',\n          'sm:w-[360px]': width() === 'wide',\n          'sm:w-[320px]': width() === 'medium',\n          'sm:w-[280px]': width() === 'narrow',\n        }}\n      >\n        <Show\n          when={timelineState.timelineState.content}\n          keyed\n          fallback={\n            <>\n              <div class=\"shrink-0 border-b border-border\">{props.header}</div>\n              <div ref={setTimelineEl} class=\"scrollbar flex flex-col overflow-y-scroll pb-16\">\n                {props.children}\n              </div>\n            </>\n          }\n        >\n          {(timeline) => (\n            <>\n              <div class=\"flex shrink-0 items-center border-b border-border px-2\">\n                <button\n                  class=\"flex w-full items-center gap-1\"\n                  onClick={() => timelineState?.clearTimeline()}\n                >\n                  <div class=\"inline-block size-4\">\n                    <ArrowLeft />\n                  </div>\n                  <div>{i18n.t('column.back')}</div>\n                </button>\n              </div>\n              <div\n                ref={setTimelineEl}\n                class=\"scrollbar flex max-h-full flex-col overflow-y-scroll scroll-smooth pb-16\"\n              >\n                <TimelineContentDisplay timelineContent={timeline} />\n              </div>\n            </>\n          )}\n        </Show>\n      </div>\n    </TimelineContext.Provider>\n  );\n};\n\nexport default Column;\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.75 19.5 8.25 12l7.5-7.5\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0\"/></svg>","import { type Component, type JSX, For, Show } from 'solid-js';\n\nimport ChevronLeft from 'heroicons/24/outline/chevron-left.svg';\nimport ChevronRight from 'heroicons/24/outline/chevron-right.svg';\nimport Trash from 'heroicons/24/outline/trash.svg';\n\nimport { type ColumnType } from '@/core/column';\nimport useConfig from '@/core/useConfig';\nimport { useRequestCommand } from '@/hooks/useCommandBus';\nimport { useTranslation } from '@/i18n/useTranslation';\n\nexport type RenderOtherSettingsProps<T> = {\n  column: T;\n  saveColumn: (column: T) => void;\n};\n\ntype ColumnSettingsProps<T extends ColumnType> = {\n  column: T;\n  columnIndex: number;\n  renderOtherSettings?: (props: RenderOtherSettingsProps<T>) => JSX.Element;\n};\n\ntype ColumnSettingsSectionProps = {\n  title: string;\n  children: JSX.Element;\n};\n\nexport const ColumnSettingsSection: Component<ColumnSettingsSectionProps> = (props) => (\n  <div class=\"flex flex-col gap-2 border-b border-border p-2\">\n    <div>{props.title}</div>\n    <div>{props.children}</div>\n  </div>\n);\n\nconst ColumnSettings = <T extends ColumnType>(props: ColumnSettingsProps<T>): JSX.Element => {\n  const i18n = useTranslation();\n  const { saveColumn, removeColumn, moveColumn } = useConfig();\n  const request = useRequestCommand();\n\n  const setColumnWidth = (width: ColumnType['width']) => {\n    saveColumn({ ...props.column, width });\n  };\n\n  const move = (index: number) => {\n    moveColumn(props.column.id, index);\n    request({ command: 'moveToColumn', columnIndex: index }).catch((err) => console.error(err));\n  };\n\n  return (\n    <div class=\"flex flex-col border-t border-border\">\n      <ColumnSettingsSection title={i18n.t('column.config.columnWidth')}>\n        <div class=\"scrollbar flex h-9 gap-2 overflow-x-auto\">\n          <For each={['widest', 'wide', 'medium', 'narrow'] as const}>\n            {(width) => (\n              <button\n                class=\"rounded-md border px-4 text-fg-secondary\"\n                classList={{\n                  'border-fg-secondary': props.column.width === width,\n                  'font-bold': props.column.width === width,\n                  'border-border': props.column.width !== width,\n                  'font-normal': props.column.width !== width,\n                }}\n                onClick={() => setColumnWidth(width)}\n              >\n                {i18n.t(`column.config.${width}`)}\n              </button>\n            )}\n          </For>\n        </div>\n      </ColumnSettingsSection>\n      <Show when={props.renderOtherSettings} keyed>\n        {(render) => render({ column: props.column, saveColumn })}\n      </Show>\n      <div class=\"flex h-10 items-center gap-2\">\n        <button\n          class=\"py-4 pl-2\"\n          title={i18n.t('column.config.moveLeft')}\n          onClick={() => move(props.columnIndex - 1)}\n        >\n          <span class=\"inline-block size-4\">\n            <ChevronLeft />\n          </span>\n        </button>\n        <button\n          class=\"py-4 pr-2\"\n          title={i18n.t('column.config.moveRight')}\n          onClick={() => move(props.columnIndex + 1)}\n        >\n          <span class=\"inline-block size-4\">\n            <ChevronRight />\n          </span>\n        </button>\n        <div class=\"flex-1\" />\n        <button\n          class=\"px-2 py-4 text-danger hover:text-rose-600\"\n          title={i18n.t('column.config.removeColumn')}\n          onClick={() => removeColumn(props.column.id)}\n        >\n          <span class=\"inline-block size-4\" aria-label={i18n.t('column.config.removeColumn')}>\n            <Trash />\n          </span>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default ColumnSettings;\n","import { createEffect, createRoot, createSignal, batch, untrack } from 'solid-js';\n\nimport { decrypt } from '@/nostr/useCommands';\nimport usePubkey from '@/nostr/usePubkey';\n\ntype UseDecryptProps = {\n  encrypted: string;\n};\n\n// eslint-disable-next-line solid/reactivity\nconst [memo, setMemo] = createRoot(() => createSignal<Record<string, string>>({}));\nconst updateMemo = (encrypted: string, decrypted: string) =>\n  setMemo((current) => ({ ...current, [encrypted]: decrypted }));\n\n// eslint-disable-next-line solid/reactivity\nconst [decrypting, setDecrypting] = createRoot(() => createSignal<Record<string, boolean>>({}));\nconst isDecrypting = (encrypted: string) => untrack(() => decrypting()[encrypted] ?? false);\n\nconst useDecrypt = (propsProvider: () => UseDecryptProps | null) => {\n  const pubkey = usePubkey();\n  const [decrypted, setDecrypted] = createSignal<string | null>(null);\n\n  createEffect(() => {\n    const props = propsProvider();\n    if (props == null) return;\n\n    if (props.encrypted.length === 0) return;\n\n    const { encrypted } = props;\n    const memoizedValue = untrack(() => memo()[encrypted]);\n\n    if (memoizedValue != null) {\n      setDecrypted(memoizedValue);\n      return;\n    }\n\n    if (isDecrypting(encrypted)) {\n      return;\n    }\n\n    const p = pubkey();\n    if (p == null) return;\n\n    const updateDecrypting = (value: boolean) =>\n      setDecrypting((current) => ({ ...current, [encrypted]: value }));\n\n    updateDecrypting(true);\n\n    decrypt(p, encrypted)\n      .then((result) => {\n        batch(() => {\n          updateMemo(encrypted, result);\n          setDecrypted(result);\n        });\n      })\n      .catch((err) => {\n        console.error(`failed to decrypt \"${encrypted}\"`, err);\n      })\n      .finally(() => {\n        updateDecrypting(false);\n      });\n  });\n\n  return decrypted;\n};\n\nexport default useDecrypt;\n","import { For, type Component, createMemo } from 'solid-js';\n\nimport * as Kind from 'nostr-tools/kinds';\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport ColumnItem from '@/components/ColumnItem';\nimport EventDisplayById from '@/components/event/EventDisplayById';\nimport { genericEvent } from '@/nostr/event';\nimport { parseTags } from '@/nostr/event/Tags';\nimport useDecrypt from '@/nostr/useDecrypt';\n\nexport type BookmarkProps = {\n  event: NostrEvent;\n};\n\nconst Bookmark: Component<BookmarkProps> = (props) => {\n  const bookmark = createMemo(() => genericEvent(props.event));\n\n  const decrypted = useDecrypt(() => {\n    const { content } = bookmark();\n    if (content == null || content.length === 0) return null;\n    return { id: bookmark().id, encrypted: content };\n  });\n\n  const bookmarkedEventIdsPrivate = () => {\n    const json = decrypted();\n    if (json == null) return [];\n    console.log(json);\n\n    try {\n      return parseTags(json).taggedEventIds();\n    } catch (err) {\n      console.warn(err);\n      return [];\n    }\n  };\n\n  const bookmarkedEventIds = () => bookmark().taggedEventIds();\n\n  return (\n    <For each={[...bookmarkedEventIds(), ...bookmarkedEventIdsPrivate()]}>\n      {(eventId) => (\n        <ColumnItem>\n          <EventDisplayById eventId={eventId} ensureKinds={[Kind.ShortTextNote]} />\n        </ColumnItem>\n      )}\n    </For>\n  );\n};\n\nexport default Bookmark;\n","import { createMemo } from 'solid-js';\n\nimport { createQuery, useQueryClient, type UseQueryResult } from '@tanstack/solid-query';\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport { pickLatestEvent } from '@/nostr/event/comparator';\nimport {\n  registerTask,\n  BatchedEventsTask,\n  type ParameterizedReplaceableEventTask,\n} from '@/nostr/useBatchedEvents';\nimport timeout from '@/utils/timeout';\n\n// Parameterized Replaceable Event\nexport type UseParameterizedReplaceableEventProps = {\n  kind: number;\n  author: string;\n  identifier: string;\n};\n\nexport type UseParameterizedReplaceableEvent = {\n  event: () => NostrEvent | null;\n  query: UseQueryResult<NostrEvent | null>;\n};\n\nexport const queryKeyUseParameterizedReplaceableEvent = (\n  props: UseParameterizedReplaceableEventProps | null,\n) => ['useParameterizedReplaceableEvent', props] as const;\n\nconst useParameterizedReplaceableEvent = (\n  propsProvider: () => UseParameterizedReplaceableEventProps | null,\n): UseParameterizedReplaceableEvent => {\n  const queryClient = useQueryClient();\n  const props = createMemo(propsProvider);\n  const genQueryKey = () => queryKeyUseParameterizedReplaceableEvent(props());\n\n  const query = createQuery(() => ({\n    queryKey: genQueryKey(),\n    queryFn: ({ queryKey, signal }) => {\n      const [, currentProps] = queryKey;\n      if (currentProps == null) return Promise.resolve(null);\n\n      const { kind, author, identifier } = currentProps;\n      const task = new BatchedEventsTask<ParameterizedReplaceableEventTask>({\n        type: 'ParameterizedReplaceableEvent',\n        kind,\n        author,\n        identifier,\n      });\n      const promise = task.firstEventPromise().catch(() => {\n        throw new Error(\n          `parameterized replaceable event not found: ${kind}:${author}:${identifier}`,\n        );\n      });\n      task.onUpdate((events) => {\n        const latest = pickLatestEvent(events);\n        queryClient.setQueryData(queryKey, latest);\n      });\n      registerTask({ task, signal });\n      return timeout(\n        15000,\n        `useParameterizedReplaceableEvent: ${kind}:${author}:${identifier}`,\n      )(promise);\n    },\n    staleTime: 5 * 60 * 1000, // 5 min\n    gcTime: 4 * 60 * 60 * 1000, // 4 hour\n  }));\n\n  const event = () => query.data ?? null;\n\n  return { event, query };\n};\n\nexport default useParameterizedReplaceableEvent;\n","import { type Component, createSignal, Show } from 'solid-js';\n\nimport BookmarkIcon from 'heroicons/24/outline/bookmark.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column, { type ColumnOperator } from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport Bookmark from '@/components/timeline/Bookmark';\nimport { type BookmarkColumnType } from '@/core/column';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useParameterizedReplaceableEvent from '@/nostr/useParameterizedReplaceableEvent';\n\ntype BookmarkColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: BookmarkColumnType;\n};\n\nconst BookmarkColumn: Component<BookmarkColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { removeColumn } = useConfig();\n\n  const [columnOperator, setColumnOperator] = createSignal<ColumnOperator>();\n\n  const { event } = useParameterizedReplaceableEvent(() => ({\n    kind: 30001,\n    author: props.column.pubkey,\n    identifier: props.column.identifier,\n  }));\n\n  // TODO 暗号化されたデータがある場合は復号する\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n.t('column.bookmark')}\n          icon={<BookmarkIcon />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n          onClickHeader={() => columnOperator()?.scrollToTop()}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      columnOperatorRef={setColumnOperator}\n    >\n      <Show when={event()} keyed>\n        {(ev) => <Bookmark event={ev} />}\n      </Show>\n    </Column>\n  );\n};\n\nexport default BookmarkColumn;\n","import { type Component, createEffect, createSignal, onCleanup, onMount } from 'solid-js';\n\nimport Home from 'heroicons/24/outline/home.svg';\nimport uniq from 'lodash/uniq';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column, { type ColumnOperator } from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { type FollowingColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useFollowings from '@/nostr/useFollowings';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype FollowingColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: FollowingColumnType;\n};\n\nconst FollowingColumn: Component<FollowingColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const { followingPubkeys } = useFollowings(() => ({ pubkey: props.column.pubkey }));\n\n  const [columnOperator, setColumnOperator] = createSignal<ColumnOperator>();\n\n  const loadMore = useLoadMore(() => ({\n    duration: 4 * 60 * 60,\n    onLoad: () => {\n      columnOperator()?.scrollToTop();\n    },\n  }));\n\n  const { events, eose } = useSubscription(() => {\n    const authors = uniq([...followingPubkeys()]);\n    if (authors.length === 0) return null;\n    return {\n      debugId: 'following',\n      relayUrls: config().relayUrls,\n      filters: [\n        {\n          kinds: [1, 6],\n          authors,\n          limit: 20,\n          since: loadMore.since(),\n          until: loadMore.until(),\n        },\n      ],\n      eoseLimit: 20,\n      continuous: loadMore.continuous(),\n      onEOSE: () => {\n        console.log('home: eose');\n      },\n      clientEventFilter: (event) => {\n        if (props.column.contentFilter == null) return true;\n        return applyContentFilter(props.column.contentFilter)(event.content);\n      },\n    };\n  });\n\n  createEffect(() => {\n    console.log('home', events());\n    loadMore.setEvents(events());\n  });\n\n  onMount(() => console.log('home timeline mounted'));\n  onCleanup(() => console.log('home timeline unmounted'));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n.t('column.home')}\n          icon={<Home />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n          onClickHeader={() => columnOperator()?.scrollToTop()}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      columnOperatorRef={setColumnOperator}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default FollowingColumn;\n","import { type Component, Show } from 'solid-js';\n\nimport EllipsisVertical from 'heroicons/24/outline/ellipsis-vertical.svg';\n\nimport UserDisplayName from '@/components/UserDisplayName';\nimport useContextMenu, { type MenuItem } from '@/components/utils/useContextMenu';\nimport useModalState from '@/hooks/useModalState';\n\nexport type ColumnInfoProps = {\n  image?: string;\n  title: string;\n  description?: string;\n  authorPubkey?: string;\n  extraInfo?: string;\n  otherActionMenuItems?: MenuItem[];\n};\n\nconst ColumnInfo: Component<ColumnInfoProps> = (props) => {\n  const { showProfile } = useModalState();\n\n  const otherActionsPopup = useContextMenu(() => ({\n    menu: props.otherActionMenuItems ?? [],\n  }));\n\n  return (\n    <div class=\"flex items-start gap-2 border-t border-border p-1 break-all\">\n      <div class=\"mt-1 size-14 shrink-0 overflow-hidden rounded-sm\">\n        <Show when={props.image} keyed>\n          {(url) => <img class=\"size-full object-cover\" alt=\"icon\" src={url} />}\n        </Show>\n      </div>\n      <div class=\"flex flex-1 flex-col overflow-hidden\">\n        <h3 class=\"truncate text-lg font-bold\">{props.title}</h3>\n        <p class=\"max-h-13 overflow-y-auto text-sm break-all\">{props.description}</p>\n        <Show when={props.authorPubkey} keyed>\n          {(authorPubkey) => (\n            <div class=\"text-xs\">\n              <button\n                class=\"truncate select-text hover:text-link hover:underline\"\n                onClick={() => showProfile(authorPubkey)}\n              >\n                <UserDisplayName pubkey={authorPubkey} />\n              </button>\n            </div>\n          )}\n        </Show>\n      </div>\n      <Show when={props.otherActionMenuItems}>\n        <>\n          <button\n            ref={otherActionsPopup.targetRef}\n            type=\"button\"\n            class=\"size-4 shrink-0\"\n            onClick={() => otherActionsPopup.open()}\n          >\n            <EllipsisVertical />\n          </button>\n          {otherActionsPopup.popup()}\n        </>\n      </Show>\n    </div>\n  );\n};\n\nexport default ColumnInfo;\n","import { createMemo } from 'solid-js';\n\nimport * as Kind from 'nostr-tools/kinds';\n\nimport NostrSet, { NostrSetTags } from '@/nostr/event/sets/NostrSet';\nimport { parseTags } from '@/nostr/event/Tags';\nimport useDecrypt from '@/nostr/useDecrypt';\nimport useParameterizedReplaceableEvent, {\n  queryKeyUseParameterizedReplaceableEvent,\n} from '@/nostr/useParameterizedReplaceableEvent';\nimport ensureNonNull from '@/utils/ensureNonNull';\n\ntype UseFollowSetProps = {\n  author: string;\n  identifier: string;\n};\n\nexport const queryKeyUseFollowSet = (props: UseFollowSetProps) =>\n  queryKeyUseParameterizedReplaceableEvent({ kind: Kind.Followsets, ...props });\n\nconst useFollowSet = (propsProvider: () => UseFollowSetProps) => {\n  const props = createMemo(propsProvider);\n\n  const { query } = useParameterizedReplaceableEvent(() => ({\n    kind: Kind.Followsets,\n    author: props().author,\n    identifier: props().identifier,\n  }));\n\n  const event = () => query.data;\n\n  const decryptedContent = useDecrypt(() =>\n    ensureNonNull([event()?.content] as const)(([content]) => ({\n      encrypted: content,\n    })),\n  );\n\n  const decryptedTags = createMemo(() => {\n    const decryptedJson = decryptedContent();\n    if (decryptedJson == null) return null;\n\n    const tags = parseTags(decryptedJson);\n    return new NostrSetTags(tags.tags);\n  });\n\n  const followSet = createMemo(() => {\n    if (query.data == null) return null;\n    return new NostrSet(query.data);\n  });\n\n  const pubkeys = () => [\n    ...(followSet()?.taggedPubkeys() ?? []),\n    ...(decryptedTags()?.taggedPubkeys() ?? []),\n  ];\n\n  const title = () => followSet()?.title() || decryptedTags()?.title();\n\n  const description = () => followSet()?.description() || decryptedTags()?.description();\n\n  const image = () => followSet()?.image() || decryptedTags()?.image();\n\n  return {\n    event,\n    followSet,\n    pubkeys,\n    title,\n    description,\n    image,\n    query,\n  };\n};\n\nexport default useFollowSet;\n","import { type Component, createSignal } from 'solid-js';\n\nimport Users from 'heroicons/24/outline/users.svg';\nimport uniq from 'lodash/uniq';\nimport * as Kind from 'nostr-tools/kinds';\nimport { naddrEncode } from 'nostr-tools/nip19';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column, { type ColumnOperator } from '@/components/column/Column';\nimport ColumnInfo from '@/components/column/ColumnInfo';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { type FollowSetColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useFollowSet from '@/nostr/useFollowSet';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype FollowingColumnProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: FollowSetColumnType;\n};\n\nexport type FollowSetInfoProps = {\n  author: string;\n  identifier: string;\n  image?: string;\n  title?: string;\n  description?: string;\n};\n\nconst FollowSetInfo: Component<FollowSetInfoProps> = (props) => {\n  const i18n = useTranslation();\n\n  const naddr = () =>\n    naddrEncode({\n      pubkey: props.author,\n      identifier: props.identifier,\n      kind: Kind.Followsets,\n    });\n\n  const otherActionMenuItems = [\n    {\n      content: i18n.t('column.columnInfoCommon.copyId'),\n      onSelect: () => {\n        navigator.clipboard.writeText(naddr()).catch((err) => window.alert(err));\n      },\n    },\n  ];\n\n  return (\n    <ColumnInfo\n      image={props.image}\n      authorPubkey={props.author}\n      title={props.title ?? props.identifier}\n      description={props.description}\n      otherActionMenuItems={otherActionMenuItems}\n    />\n  );\n};\n\nconst FollowingColumn: Component<FollowingColumnProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const [columnOperator, setColumnOperator] = createSignal<ColumnOperator>();\n\n  const { followSet, image, title, description, pubkeys } = useFollowSet(() => ({\n    author: props.column.author,\n    identifier: props.column.identifier,\n  }));\n\n  const columnName = () =>\n    props.column.name || title() || followSet()?.identifier() || i18n.t('column.followSet');\n\n  const loadMore = useLoadMore(() => ({ duration: null }));\n\n  const { events, eose } = useSubscription(() => {\n    const authors = uniq([...pubkeys()]);\n    if (authors.length === 0) return null;\n    return {\n      debugId: 'following',\n      relayUrls: config().relayUrls,\n      filters: [\n        {\n          kinds: [1, 6],\n          authors,\n          limit: 20,\n          since: loadMore.since(),\n          until: loadMore.until(),\n        },\n      ],\n      eoseLimit: 20,\n      continuous: loadMore.continuous(),\n      onEOSE: () => {\n        console.log('home: eose');\n      },\n      clientEventFilter: (event) => {\n        if (props.column.contentFilter == null) return true;\n        return applyContentFilter(props.column.contentFilter)(event.content);\n      },\n    };\n  });\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={columnName()}\n          icon={<Users />}\n          settings={() => (\n            <>\n              <FollowSetInfo\n                author={props.column.author}\n                identifier={props.column.identifier}\n                image={image()}\n                title={title()}\n                description={description()}\n              />\n              <ColumnSettings column={props.column} columnIndex={props.columnIndex} />\n            </>\n          )}\n          onClose={() => removeColumn(props.column.id)}\n          onClickHeader={() => columnOperator()?.scrollToTop()}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      columnOperatorRef={setColumnOperator}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default FollowingColumn;\n","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"1.5\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M16.5 12a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0m0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 1 0-2.636 6.364M16.5 12V8.25\"/></svg>","export default (props = {}) => <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" aria-hidden=\"true\" data-slot=\"icon\" viewBox=\"0 0 24 24\"{...props}><path fill-rule=\"evenodd\" d=\"M14.615 1.595a.75.75 0 0 1 .359.852L12.982 9.75h7.268a.75.75 0 0 1 .548 1.262l-10.5 11.25a.75.75 0 0 1-1.272-.71l1.992-7.302H3.75a.75.75 0 0 1-.548-1.262l10.5-11.25a.75.75 0 0 1 .913-.143\" clip-rule=\"evenodd\"/></svg>","import { type Component, Show } from 'solid-js';\n\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport EventDisplay from '@/components/event/EventDisplay';\nimport ReactionEmojiDisplay, { reactionTypesToEmojiTypes } from '@/components/ReactionEmojiDisplay';\nimport useEmojiPopup from '@/components/useEmojiPopup';\nimport UserDisplayName from '@/components/UserDisplayName';\nimport useConfig from '@/core/useConfig';\nimport useFormatDate from '@/hooks/useFormatDate';\nimport useModalState from '@/hooks/useModalState';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport { reaction } from '@/nostr/event';\nimport useEvent from '@/nostr/useEvent';\nimport useProfile from '@/nostr/useProfile';\nimport ensureNonNull from '@/utils/ensureNonNull';\nimport { thumbnailUrl } from '@/utils/url';\n\ntype ReactionDisplayProps = {\n  event: NostrEvent;\n};\n\nconst ReactionDisplay: Component<ReactionDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const formatDate = useFormatDate();\n  const { shouldMuteEvent } = useConfig();\n  const { showProfile } = useModalState();\n  const event = () => reaction(props.event);\n  const eventId = () => event().lastTaggedEventId();\n\n  const { profile } = useProfile(() => ({\n    pubkey: props.event.pubkey,\n  }));\n\n  const { event: reactedEvent, query: reactedEventQuery } = useEvent(() =>\n    ensureNonNull([eventId()] as const)(([eventIdNonNull]) => ({\n      eventId: eventIdNonNull,\n    })),\n  );\n\n  const isRemoved = () => reactedEventQuery.isSuccess && reactedEvent() == null;\n\n  const reactionTypes = () => event().toReactionTypes();\n  const emojiTypes = () => reactionTypesToEmojiTypes(reactionTypes());\n\n  const emojiPopup = useEmojiPopup(() =>\n    ensureNonNull([emojiTypes()] as const)(([emoji]) => ({\n      emoji,\n    })),\n  );\n\n  return (\n    // if the reacted event is not found, it should be a removed event\n    <Show when={!isRemoved() && !shouldMuteEvent(props.event)}>\n      <div class=\"flex items-center gap-1 pl-[2px] text-sm\">\n        <span\n          ref={emojiPopup.emojiRef}\n          class=\"webkit-touch-callout-none notification-icon flex h-4 max-w-[64px] min-w-4 shrink-0 place-items-center overflow-hidden select-none\"\n        >\n          <ReactionEmojiDisplay reactionTypes={reactionTypes()} />\n        </span>\n        {emojiPopup.popup()}\n        <div class=\"notification-user flex flex-1 gap-1 overflow-hidden\">\n          <div class=\"author-icon size-5 shrink-0 overflow-hidden rounded-sm\">\n            <Show when={profile()?.picture} keyed>\n              {(url) => (\n                <img\n                  src={thumbnailUrl(url, 'icon')}\n                  alt=\"icon\"\n                  // TODO autofit\n                  class=\"size-full object-cover\"\n                />\n              )}\n            </Show>\n          </div>\n          <div class=\"flex min-w-0 flex-1 overflow-hidden\">\n            <button\n              class=\"truncate font-bold select-text hover:text-link hover:underline\"\n              onClick={() => showProfile(props.event.pubkey)}\n            >\n              <UserDisplayName pubkey={props.event.pubkey} />\n            </button>\n            <span class=\"shrink-0 whitespace-pre\">{i18n.t('notification.reacted')}</span>\n          </div>\n        </div>\n        <div class=\"text-xs\">{formatDate(event().createdAtAsDate())}</div>\n      </div>\n      <div class=\"notification-event py-1\">\n        <Show\n          when={reactedEvent()}\n          fallback={\n            <div class=\"truncate\">\n              {i18n.t('general.loading')} {eventId()}\n            </div>\n          }\n          keyed\n        >\n          {(ev) => <EventDisplay event={ev} />}\n        </Show>\n      </div>\n    </Show>\n  );\n};\n\nexport default ReactionDisplay;\n","import { For, Switch, Match, lazy, type Component, Show } from 'solid-js';\n\nimport * as Kind from 'nostr-tools/kinds';\nimport { type Event as NostrEvent } from 'nostr-tools/pure';\n\nimport ColumnItem from '@/components/ColumnItem';\nimport Reaction from '@/components/event/Reaction';\nimport Repost from '@/components/event/Repost';\nimport TextNote from '@/components/event/TextNote';\nimport useConfig from '@/core/useConfig';\n\nconst ZapReceipt = lazy(() => import('@/components/event/ZapReceipt'));\n\nexport type NotificationProps = {\n  events: NostrEvent[];\n};\n\nconst Notification: Component<NotificationProps> = (props) => {\n  const { shouldMuteEvent } = useConfig();\n\n  return (\n    <For each={props.events}>\n      {(event) => (\n        <Show when={!shouldMuteEvent(event)}>\n          <Switch fallback={<div>unknown event</div>}>\n            <Match when={event.kind === Kind.ShortTextNote}>\n              <ColumnItem>\n                <TextNote event={event} />\n              </ColumnItem>\n            </Match>\n            <Match when={event.kind === Kind.Reaction}>\n              <ColumnItem>\n                <Reaction event={event} />\n              </ColumnItem>\n            </Match>\n            {/* TODO ちゃんとnotification用のコンポーネント使う */}\n            <Match when={event.kind === Kind.Repost}>\n              <ColumnItem>\n                <Repost event={event} />\n              </ColumnItem>\n            </Match>\n            <Match when={event.kind === Kind.Zap}>\n              <ColumnItem>\n                <ZapReceipt event={event} />\n              </ColumnItem>\n            </Match>\n          </Switch>\n        </Show>\n      )}\n    </For>\n  );\n};\n\nexport default Notification;\n","import { type JSX, type Component, For, createSignal, createEffect } from 'solid-js';\n\nimport ArrowPathRoundedSquare from 'heroicons/24/outline/arrow-path-rounded-square.svg';\nimport AtSymbol from 'heroicons/24/outline/at-symbol.svg';\nimport Bell from 'heroicons/24/outline/bell.svg';\nimport Bolt from 'heroicons/24/solid/bolt.svg';\nimport HeartSolid from 'heroicons/24/solid/heart.svg';\nimport uniq from 'lodash/uniq';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column, { type ColumnOperator } from '@/components/column/Column';\nimport ColumnSettings, {\n  ColumnSettingsSection,\n  type RenderOtherSettingsProps,\n} from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Notification from '@/components/timeline/Notification';\nimport {\n  type NotificationColumnType,\n  type NotificationType,\n  NotificationTypes,\n} from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype NotificationColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: NotificationColumnType;\n};\n\ntype NotificationFilterOptionsEntry = {\n  notificationType: NotificationType;\n  title: string;\n  icon: JSX.Element;\n};\n\nconst NotificationTypeKindsMap: Record<NotificationType, number[]> = {\n  Replies: [1],\n  Repost: [6],\n  Reaction: [7],\n  Zap: [9735],\n};\n\nconst NotificationSettingsSection = (props: RenderOtherSettingsProps<NotificationColumnType>) => {\n  const i18n = useTranslation();\n\n  const notificationFilterOptions: NotificationFilterOptionsEntry[] = [\n    {\n      notificationType: 'Replies',\n      title: i18n.t('column.notificationSettings.types.replies'),\n      icon: <AtSymbol />,\n    },\n    {\n      notificationType: 'Repost',\n      title: i18n.t('column.notificationSettings.types.reposts'),\n      icon: <ArrowPathRoundedSquare />,\n    },\n    {\n      notificationType: 'Reaction',\n      title: i18n.t('column.notificationSettings.types.reactions'),\n      icon: <HeartSolid />,\n    },\n    {\n      notificationType: 'Zap',\n      title: i18n.t('column.notificationSettings.types.zap'),\n      icon: <Bolt />,\n    },\n  ] as const;\n\n  const currentNotificationTypes = (): NotificationType[] =>\n    props.column.notificationTypes ?? [...NotificationTypes];\n\n  const isNotificationTypeSelected = (notificationType: NotificationType) =>\n    currentNotificationTypes().includes(notificationType);\n\n  const toggleColumnType = (notificationType: NotificationType) => {\n    const notificationTypes = [...currentNotificationTypes()];\n    if (isNotificationTypeSelected(notificationType)) {\n      notificationTypes.splice(notificationTypes.indexOf(notificationType), 1);\n    } else {\n      notificationTypes.push(notificationType);\n    }\n\n    props.saveColumn({\n      ...props.column,\n      notificationTypes,\n    });\n  };\n\n  return (\n    <>\n      <ColumnSettingsSection title={i18n.t('column.notificationSettings.notificationTypes')}>\n        <div class=\"flex gap-1\">\n          <For each={notificationFilterOptions}>\n            {({ notificationType, title, icon }) => (\n              <button\n                type=\"button\"\n                class=\"flex flex-1 flex-col items-center rounded-md border py-1 text-fg-secondary\"\n                title={title}\n                classList={{\n                  'border-fg-secondary': isNotificationTypeSelected(notificationType),\n                  'font-bold': isNotificationTypeSelected(notificationType),\n                  'border-border': !isNotificationTypeSelected(notificationType),\n                  'font-normal': !isNotificationTypeSelected(notificationType),\n                }}\n                onClick={() => toggleColumnType(notificationType)}\n              >\n                <span class=\"inline-block size-4\">{icon}</span>\n                <span class=\"text-xs\">{title}</span>\n              </button>\n            )}\n          </For>\n        </div>\n      </ColumnSettingsSection>\n    </>\n  );\n};\n\nconst NotificationColumn: Component<NotificationColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const [columnOperator, setColumnOperator] = createSignal<ColumnOperator>();\n\n  const loadMore = useLoadMore(() => ({\n    duration: null,\n    onLoad: () => {\n      columnOperator()?.scrollToTop();\n    },\n  }));\n\n  const notificationTypes = () => props.column.notificationTypes ?? [...NotificationTypes];\n  const kinds = () => uniq(notificationTypes().flatMap((type) => NotificationTypeKindsMap[type]));\n\n  const { events: notifications, eose } = useSubscription(() =>\n    kinds().length > 0\n      ? {\n          relayUrls: config().relayUrls,\n          filters: [\n            {\n              kinds: kinds(),\n              '#p': [props.column.pubkey],\n              limit: 20,\n              since: loadMore.since(),\n              until: loadMore.until(),\n            },\n          ],\n          eoseLimit: 20,\n          clientEventFilter: (event) => {\n            if (props.column.contentFilter == null) return true;\n            return applyContentFilter(props.column.contentFilter)(event.content);\n          },\n        }\n      : null,\n  );\n\n  createEffect(() => loadMore.setEvents(notifications()));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n.t('column.notification')}\n          icon={<Bell />}\n          settings={() => (\n            <ColumnSettings\n              column={props.column}\n              columnIndex={props.columnIndex}\n              renderOtherSettings={NotificationSettingsSection}\n            />\n          )}\n          onClose={() => removeColumn(props.column.id)}\n          onClickHeader={() => columnOperator()?.scrollToTop()}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      columnOperatorRef={setColumnOperator}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Notification events={notifications()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default NotificationColumn;\n","import { createEffect, type Component, createSignal } from 'solid-js';\n\nimport User from 'heroicons/24/outline/user.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column, { type ColumnOperator } from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { type PostsColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype PostsColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: PostsColumnType;\n};\n\nconst PostsColumn: Component<PostsColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const [columnOperator, setColumnOperator] = createSignal<ColumnOperator>();\n\n  const loadMore = useLoadMore(() => ({\n    duration: null,\n    onLoad: () => {\n      columnOperator()?.scrollToTop();\n    },\n  }));\n\n  const { events, eose } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [\n      {\n        kinds: [1, 6],\n        authors: [props.column.pubkey],\n        limit: 10,\n        since: loadMore.since(),\n        until: loadMore.until(),\n      },\n    ],\n    eoseLimit: 10,\n    clientEventFilter: (event) => {\n      if (props.column.contentFilter == null) return true;\n      return applyContentFilter(props.column.contentFilter)(event.content);\n    },\n  }));\n\n  createEffect(() => loadMore.setEvents(events()));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n.t('column.posts')}\n          icon={<User />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n          onClickHeader={() => columnOperator()?.scrollToTop()}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      columnOperatorRef={setColumnOperator}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default PostsColumn;\n","import { createEffect, type Component, createSignal } from 'solid-js';\n\nimport Heart from 'heroicons/24/outline/heart.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column, { type ColumnOperator } from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Notification from '@/components/timeline/Notification';\nimport { type ReactionsColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype ReactionsColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: ReactionsColumnType;\n};\n\nconst ReactionsColumn: Component<ReactionsColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { config, removeColumn } = useConfig();\n\n  const [columnOperator, setColumnOperator] = createSignal<ColumnOperator>();\n\n  const loadMore = useLoadMore(() => ({\n    duration: null,\n    onLoad: () => {\n      columnOperator()?.scrollToTop();\n    },\n  }));\n\n  const { events: reactions, eose } = useSubscription(() => ({\n    relayUrls: config().relayUrls,\n    filters: [\n      {\n        kinds: [7],\n        authors: [props.column.pubkey],\n        limit: 10,\n        since: loadMore.since(),\n        until: loadMore.until(),\n      },\n    ],\n    eoseLimit: 10,\n    clientEventFilter: (event) => {\n      if (props.column.contentFilter == null) return true;\n      return applyContentFilter(props.column.contentFilter)(event.content);\n    },\n  }));\n\n  createEffect(() => loadMore.setEvents(reactions()));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n.t('column.reactions')}\n          icon={<Heart />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n          onClickHeader={() => columnOperator()?.scrollToTop()}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      columnOperatorRef={setColumnOperator}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Notification events={reactions()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default ReactionsColumn;\n","import { createEffect, type Component, createSignal } from 'solid-js';\n\nimport GlobeAlt from 'heroicons/24/outline/globe-alt.svg';\n\nimport BasicColumnHeader from '@/components/column/BasicColumnHeader';\nimport Column, { type ColumnOperator } from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { type RelaysColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport useConfig from '@/core/useConfig';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport useSubscription from '@/nostr/useSubscription';\n\ntype RelaysColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: RelaysColumnType;\n};\n\nconst RelaysColumn: Component<RelaysColumnDisplayProps> = (props) => {\n  const i18n = useTranslation();\n  const { removeColumn } = useConfig();\n\n  const [columnOperator, setColumnOperator] = createSignal<ColumnOperator>();\n\n  const loadMore = useLoadMore(() => ({\n    duration: 4 * 60 * 60,\n    onLoad: () => {\n      columnOperator()?.scrollToTop();\n    },\n  }));\n\n  const { events, eose } = useSubscription(() => ({\n    relayUrls: props.column.relayUrls,\n    filters: [\n      {\n        kinds: [1],\n        limit: 20,\n        since: loadMore.since(),\n        until: loadMore.until(),\n      },\n    ],\n    eoseLimit: 20,\n    clientEventFilter: (event) => {\n      if (props.column.contentFilter == null) return true;\n      return applyContentFilter(props.column.contentFilter)(event.content);\n    },\n  }));\n\n  createEffect(() => loadMore.setEvents(events()));\n\n  return (\n    <Column\n      header={\n        <BasicColumnHeader\n          name={props.column.name ?? i18n.t('column.relay')}\n          icon={<GlobeAlt />}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n          onClickHeader={() => columnOperator()?.scrollToTop()}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      columnOperatorRef={setColumnOperator}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default RelaysColumn;\n","import { type Component, createEffect, createSignal, Show, type JSX, onMount } from 'solid-js';\n\nimport EllipsisVertical from 'heroicons/24/outline/ellipsis-vertical.svg';\nimport MagnifyingGlass from 'heroicons/24/outline/magnifying-glass.svg';\n\nimport Column, { type ColumnOperator } from '@/components/column/Column';\nimport ColumnSettings from '@/components/column/ColumnSettings';\nimport LoadMore, { useLoadMore } from '@/components/column/LoadMore';\nimport Timeline from '@/components/timeline/Timeline';\nimport { type SearchColumnType } from '@/core/column';\nimport { applyContentFilter } from '@/core/contentFilter';\nimport { relaysForSearching } from '@/core/relayUrls';\nimport useConfig from '@/core/useConfig';\nimport useSubscription from '@/nostr/useSubscription';\n\nexport type SearchColumnHeaderProps = {\n  column: SearchColumnType;\n  settings: () => JSX.Element;\n  onClose?: () => void;\n  onClickHeader?: () => void;\n};\n\nconst SearchColumnHeader: Component<SearchColumnHeaderProps> = (props) => {\n  const [isSettingsOpened, setIsSettingOpened] = createSignal(false);\n  const [query, setQuery] = createSignal('');\n\n  const { saveColumn } = useConfig();\n\n  const toggleSettingsOpened = () => setIsSettingOpened((current) => !current);\n\n  const updateQuery = () => {\n    if (query() === props.column.query) return;\n    saveColumn({ ...props.column, query: query() });\n  };\n\n  const handleBlur: JSX.EventHandler<HTMLInputElement, Event> = () => {\n    updateQuery();\n  };\n\n  const handleChange: JSX.EventHandler<HTMLInputElement, Event> = (ev) => {\n    setQuery(ev.currentTarget.value);\n  };\n\n  const handleSubmit: JSX.EventHandler<HTMLFormElement, SubmitEvent> = (ev) => {\n    ev.preventDefault();\n    updateQuery();\n  };\n\n  onMount(() => {\n    setQuery(props.column.query);\n  });\n\n  return (\n    <div class=\"flex flex-col\">\n      <div class=\"flex h-8 items-center gap-1 px-2\">\n        <h2 class=\"flex items-center\">\n          <button\n            type=\"button\"\n            class=\"inline-block size-4 text-fg-secondary\"\n            onClick={() => props.onClickHeader?.()}\n          >\n            <MagnifyingGlass />\n          </button>\n        </h2>\n        <form class=\"flex-1\" onSubmit={handleSubmit}>\n          <input\n            class=\"w-full rounded-sm border border-border bg-bg px-1 py-0 ring-border focus:border-border focus:ring-primary\"\n            type=\"text\"\n            name=\"query\"\n            value={query()}\n            onChange={handleChange}\n            onBlur={handleBlur}\n          />\n        </form>\n        <button class=\"size-4\" onClick={() => toggleSettingsOpened()}>\n          <EllipsisVertical />\n        </button>\n      </div>\n      <Show when={isSettingsOpened()}>{props.settings()}</Show>\n    </div>\n  );\n};\n\nexport type SearchColumnDisplayProps = {\n  columnIndex: number;\n  lastColumn: boolean;\n  column: SearchColumnType;\n};\n\nconst SearchColumn: Component<SearchColumnDisplayProps> = (props) => {\n  const { removeColumn } = useConfig();\n\n  const [columnOperator, setColumnOperator] = createSignal<ColumnOperator>();\n\n  const loadMore = useLoadMore(() => ({\n    duration: null,\n    onLoad: () => {\n      columnOperator()?.scrollToTop();\n    },\n  }));\n\n  const { events, eose } = useSubscription(() => {\n    const { query } = props.column;\n\n    if (query.length === 0) return null;\n\n    return {\n      relayUrls: relaysForSearching,\n      filters: [\n        {\n          kinds: [1],\n          search: query,\n          limit: 20,\n          since: loadMore.since(),\n          until: loadMore.until(),\n        },\n      ],\n      eoseLimit: 20,\n      clientEventFilter: (event) => {\n        if (event.tags.findIndex(([tagName]) => tagName === 'mostr' || tagName === 'proxy') >= 0)\n          return false;\n        if (props.column.contentFilter == null) return true;\n        return applyContentFilter(props.column.contentFilter)(event.content);\n      },\n    };\n  });\n\n  createEffect(() => {\n    loadMore.setEvents(events());\n  });\n\n  return (\n    <Column\n      header={\n        <SearchColumnHeader\n          column={props.column}\n          settings={() => <ColumnSettings column={props.column} columnIndex={props.columnIndex} />}\n          onClose={() => removeColumn(props.column.id)}\n          onClickHeader={() => columnOperator()?.scrollToTop()}\n        />\n      }\n      width={props.column.width}\n      columnIndex={props.columnIndex}\n      lastColumn={props.lastColumn}\n      columnOperatorRef={setColumnOperator}\n    >\n      <LoadMore loadMore={loadMore} eose={eose()}>\n        <Timeline events={events()} />\n      </LoadMore>\n    </Column>\n  );\n};\n\nexport default SearchColumn;\n","import { For, Switch, Match } from 'solid-js';\n\nimport BookmarkColumn from '@/components/column/BookmarkColumn';\nimport FollowingColumn from '@/components/column/FollowingColumn';\nimport FollowSetColumn from '@/components/column/FollowSetColumn';\nimport NotificationColumn from '@/components/column/NotificationColumn';\nimport PostsColumn from '@/components/column/PostsColumn';\nimport ReactionsColumn from '@/components/column/ReactionsColumn';\nimport RelaysColumn from '@/components/column/RelaysColumn';\nimport SearchColumn from '@/components/column/SearchColumn';\nimport useConfig from '@/core/useConfig';\n\nconst Columns = () => {\n  const { config } = useConfig();\n\n  return (\n    <div class=\"scrollbar flex h-full snap-x snap-mandatory flex-row overflow-x-scroll scroll-smooth\">\n      <For each={config().columns}>\n        {(column, index) => {\n          const columnIndex = () => index() + 1;\n          const lastColumn = () => columnIndex() === config().columns.length;\n          return (\n            <Switch>\n              <Match when={column.columnType === 'Following' && column} keyed>\n                {(followingColumn) => (\n                  <FollowingColumn\n                    column={followingColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Notification' && column} keyed>\n                {(notificationColumn) => (\n                  <NotificationColumn\n                    column={notificationColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Posts' && column} keyed>\n                {(postsColumn) => (\n                  <PostsColumn\n                    column={postsColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Reactions' && column} keyed>\n                {(reactionsColumn) => (\n                  <ReactionsColumn\n                    column={reactionsColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Relays' && column} keyed>\n                {(reactionsColumn) => (\n                  <RelaysColumn\n                    column={reactionsColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'FollowSet' && column} keyed>\n                {(followSetColumn) => (\n                  <FollowSetColumn\n                    column={followSetColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Bookmark' && column} keyed>\n                {(bookmarkColumn) => (\n                  <BookmarkColumn\n                    column={bookmarkColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n              <Match when={column.columnType === 'Search' && column} keyed>\n                {(reactionsColumn) => (\n                  <SearchColumn\n                    column={reactionsColumn}\n                    columnIndex={columnIndex()}\n                    lastColumn={lastColumn()}\n                  />\n                )}\n              </Match>\n            </Switch>\n          );\n        }}\n      </For>\n    </div>\n  );\n};\n\nexport default Columns;\n","import { onMount, onCleanup } from 'solid-js';\n\nimport throttle from 'lodash/throttle';\n\nimport { useRequestCommand, type Command } from '@/hooks/useCommandBus';\n\ntype Shortcut = { key: string; command: Command };\n\nconst defaultShortcut: Shortcut[] = [\n  { key: 'n', command: { command: 'openPostForm' } },\n  { key: 'h', command: { command: 'moveToPrevColumn' } },\n  { key: 'j', command: { command: 'moveToNextItem' } },\n  { key: 'k', command: { command: 'moveToPrevItem' } },\n  { key: 'l', command: { command: 'moveToNextColumn' } },\n  { key: '1', command: { command: 'moveToColumn', columnIndex: 1 } },\n  { key: '2', command: { command: 'moveToColumn', columnIndex: 2 } },\n  { key: '3', command: { command: 'moveToColumn', columnIndex: 3 } },\n  { key: '4', command: { command: 'moveToColumn', columnIndex: 4 } },\n  { key: '5', command: { command: 'moveToColumn', columnIndex: 5 } },\n  { key: '6', command: { command: 'moveToColumn', columnIndex: 6 } },\n  { key: '7', command: { command: 'moveToColumn', columnIndex: 7 } },\n  { key: '8', command: { command: 'moveToColumn', columnIndex: 8 } },\n  { key: '9', command: { command: 'moveToColumn', columnIndex: 9 } },\n  { key: '0', command: { command: 'moveToLastColumn' } },\n  { key: 'ArrowLeft', command: { command: 'moveToPrevColumn' } },\n  { key: 'ArrowDown', command: { command: 'moveToNextItem' } },\n  { key: 'ArrowUp', command: { command: 'moveToPrevItem' } },\n  { key: 'ArrowRight', command: { command: 'moveToNextColumn' } },\n  { key: 'f', command: { command: 'like' } },\n  { key: 't', command: { command: 'repost' } },\n  { key: 'r', command: { command: 'openReplyForm' } },\n  { key: '?', command: { command: 'openHelp' } },\n  { key: 'Enter', command: { command: 'openItemDetail' } },\n  { key: 'Backspace', command: { command: 'closeItemDetail' } },\n];\n\ntype UseShortcutKeysProps = {\n  shortcuts?: Shortcut[];\n  onShortcut: (shortcut: Shortcut) => void;\n};\n\nconst createShortcutsMap = (shortcuts: Shortcut[]) => {\n  const map = new Map<string, Shortcut>();\n  shortcuts.forEach((shortcut) => {\n    map.set(shortcut.key, shortcut);\n  });\n  return map;\n};\n\nconst useShortcutKeys = ({ shortcuts = defaultShortcut, onShortcut }: UseShortcutKeysProps) => {\n  const shortcutsMap = createShortcutsMap(shortcuts);\n\n  onMount(() => {\n    const handleKeydown = throttle((ev: KeyboardEvent) => {\n      if (ev.type !== 'keydown') return;\n      if (ev.ctrlKey || ev.altKey || ev.metaKey) return;\n      if (ev.target instanceof HTMLTextAreaElement || ev.target instanceof HTMLInputElement) return;\n\n      const shortcut = shortcutsMap.get(ev.key);\n\n      if (shortcut == null) return;\n\n      onShortcut(shortcut);\n    }, 50);\n\n    window.addEventListener('keydown', handleKeydown);\n\n    onCleanup(() => {\n      window.removeEventListener('keydown', handleKeydown);\n    });\n  });\n};\n\nexport const useMountShortcutKeys = () => {\n  const request = useRequestCommand();\n\n  useShortcutKeys({\n    onShortcut: (shortcut) => {\n      request(shortcut.command).then(\n        () => console.debug(`shortcut key '${shortcut.key}' was processed successfully`),\n        (err) => console.error(err),\n      );\n    },\n  });\n};\n\nexport default useShortcutKeys;\n","import { createEffect, type Component, onError } from 'solid-js';\n\nimport Columns from '@/components/column/Columns';\nimport GlobalModal from '@/components/modal/GlobalModal';\nimport SideBar from '@/components/SideBar';\nimport useConfig from '@/core/useConfig';\nimport { useMountShortcutKeys } from '@/hooks/useShortcutKeys';\nimport usePool from '@/nostr/usePool';\nimport usePubkey from '@/nostr/usePubkey';\n\nconst Home: Component = () => {\n  useMountShortcutKeys();\n\n  const pool = usePool();\n  const { config, initializeColumns } = useConfig();\n  const pubkey = usePubkey();\n\n  createEffect(() => {\n    Promise.allSettled(\n      config().relayUrls.map(async (relayUrl) => {\n        try {\n          const relay = await pool().ensureRelay(relayUrl);\n          relay.onnotice = (msg: string) => {\n            console.error(`NOTICE: ${relayUrl}: ${msg}`);\n          };\n          relay.onclose = () => {\n            console.warn(`CLOSE: ${relayUrl}`);\n          };\n        } catch (err) {\n          console.error('ensureRelay failed', err);\n        }\n      }),\n    ).catch(() => {\n      /* nothing to do */\n    });\n  });\n\n  createEffect(() => {\n    // pubkeyが得られてはじめてカラムを初期化できる\n    const p = pubkey();\n    if (p != null) {\n      initializeColumns({ pubkey: p });\n    }\n  });\n\n  onError((err) => {\n    console.error('uncaught error: ', err);\n  });\n\n  return (\n    <div class=\"absolute inset-0 flex h-dvh w-screen touch-manipulation flex-row overflow-hidden\">\n      <SideBar />\n      <Columns />\n      <GlobalModal />\n    </div>\n  );\n};\n\nexport default Home;\n"],"file":"Home-COO2tapr.js"}