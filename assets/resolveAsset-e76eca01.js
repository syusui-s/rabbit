import{$ as l,U as h,V as $,h as N,w as I,j as z,F as W}from"./index-eb31dddd.js";const w=Symbol("store-raw"),u=Symbol("store-node");function T(e){let t=e[l];if(!t&&(Object.defineProperty(e,l,{value:t=new Proxy(e,U)}),!Array.isArray(e))){const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];s[i].get&&Object.defineProperty(e,i,{enumerable:s[i].enumerable,get:s[i].get.bind(t)})}}return t}function g(e){let t;return e!=null&&typeof e=="object"&&(e[l]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function d(e,t=new Set){let n,s,r,o;if(n=e!=null&&e[w])return n;if(!g(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,f=e.length;i<f;i++)r=e[i],(s=d(r,t))!==r&&(e[i]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),f=Object.getOwnPropertyDescriptors(e);for(let c=0,b=i.length;c<b;c++)o=i[c],!f[o].get&&(r=e[o],(s=d(r,t))!==r&&(e[o]=s))}return e}function O(e){let t=e[u];return t||Object.defineProperty(e,u,{value:t=Object.create(null)}),t}function A(e,t,n){return e[t]||(e[t]=D(n))}function K(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===l||t===u||(delete n.value,delete n.writable,n.get=()=>e[l][t]),n}function _(e){if($()){const t=O(e);(t._||(t._=D()))()}}function L(e){return _(e),Reflect.ownKeys(e)}function D(e){const[t,n]=I(e,{equals:!1,internal:!0});return t.$=n,t}const U={get(e,t,n){if(t===w)return e;if(t===l)return n;if(t===h)return _(e),n;const s=O(e),r=s[t];let o=r?r():e[t];if(t===u||t==="__proto__")return o;if(!r){const i=Object.getOwnPropertyDescriptor(e,t);$()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(o=A(s,t,o)())}return g(o)?T(o):o},has(e,t){return t===w||t===l||t===h||t===u||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:L,getOwnPropertyDescriptor:K};function y(e,t,n,s=!1){if(!s&&e[t]===n)return;const r=e[t],o=e.length;n===void 0?delete e[t]:e[t]=n;let i=O(e),f;(f=A(i,t,r))&&f.$(()=>n),Array.isArray(e)&&e.length!==o&&(f=A(i,"length",o))&&f.$(e.length),(f=i._)&&f.$()}function k(e,t){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const r=n[s];y(e,r,t[r])}}function F(e,t){if(typeof t=="function"&&(t=t(e)),t=d(t),Array.isArray(t)){if(e===t)return;let n=0,s=t.length;for(;n<s;n++){const r=t[n];e[n]!==r&&y(e,n,r)}y(e,"length",s)}else k(e,t)}function a(e,t,n=[]){let s,r=e;if(t.length>1){s=t.shift();const i=typeof s,f=Array.isArray(e);if(Array.isArray(s)){for(let c=0;c<s.length;c++)a(e,[s[c]].concat(t),n);return}else if(f&&i==="function"){for(let c=0;c<e.length;c++)s(e[c],c)&&a(e,[c].concat(t),n);return}else if(f&&i==="object"){const{from:c=0,to:b=e.length-1,by:p=1}=s;for(let S=c;S<=b;S+=p)a(e,[S].concat(t),n);return}else if(t.length>1){a(e[s],t,[s].concat(n));return}r=e[s],n=[s].concat(n)}let o=t[0];typeof o=="function"&&(o=o(r,n),o===r)||s===void 0&&o==null||(o=d(o),s===void 0||g(r)&&g(o)&&!Array.isArray(o)?k(r,o):y(e,s,o))}function E(...[e,t]){const n=d(e||{}),s=Array.isArray(n),r=T(n);function o(...i){N(()=>{s&&i.length===1?F(n,i[0]):a(n,i)})}return[r,o]}const J=(e,t,n)=>{const s=e();return{getItem(r){const o=s.getItem(r);return o!=null?n(o):null},setItem(r,o){const i=t(o);s.setItem(r,i)}}},M=(e,t,n)=>{const[s,r]=I(!1),[o,i]=E(t);return z(()=>{const f=n.getItem(e);f!=null&&i(f),r(!0)}),W(()=>{s()&&n.setItem(e,o)}),[o,i]},R={loggedIn:!1,agreements:{nostrBuild:!1}},q=e=>JSON.stringify(e),B=e=>JSON.parse(e),C=J(()=>window.localStorage,q,B),[P,j]=M("RabbitPersistStatus",R,C),X=()=>({persistStatus:()=>({...R,...P}),loggedIn:()=>{j(s=>({...s,loggedIn:!0}))},agreeToToS:s=>{j("agreements",r=>({...r,[s]:!0}))},didAgreeToToS:s=>P.agreements[s]??!1}),Y=e=>{const t=new URL("/rabbit/",window.location.href);return new URL(e,t).href};export{J as a,M as b,E as c,X as d,Y as r,d as u};
//# sourceMappingURL=resolveAsset-e76eca01.js.map
