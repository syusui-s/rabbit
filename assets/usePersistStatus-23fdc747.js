import{$ as a,X as $,Y as h,J as L,c as T,o as K,k as W}from"./index-30967d68.js";const P=Symbol("store-raw"),u=Symbol("store-node"),c=Symbol("store-has"),k=Symbol("store-self");function R(e){let n=e[a];if(!n&&(Object.defineProperty(e,a,{value:n=new Proxy(e,J)}),!Array.isArray(e))){const t=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let o=0,r=t.length;o<r;o++){const i=t[o];s[i].get&&Object.defineProperty(e,i,{enumerable:s[i].enumerable,get:s[i].get.bind(n)})}}return n}function b(e){let n;return e!=null&&typeof e=="object"&&(e[a]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function g(e,n=new Set){let t,s,o,r;if(t=e!=null&&e[P])return t;if(!b(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let i=0,l=e.length;i<l;i++)o=e[i],(s=g(o,n))!==o&&(e[i]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const i=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let f=0,O=i.length;f<O;f++)r=i[f],!l[r].get&&(o=e[r],(s=g(o,n))!==o&&(e[r]=s))}return e}function y(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function S(e,n,t){if(e[n])return e[n];const[s,o]=T(t,{equals:!1,internal:!0});return s.$=o,e[n]=s}function E(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||!t.configurable||n===a||n===u||(delete t.value,delete t.writable,t.get=()=>e[a][n]),t}function _(e){h()&&S(y(e,u),k)()}function F(e){return _(e),Reflect.ownKeys(e)}const J={get(e,n,t){if(n===P)return e;if(n===a)return t;if(n===$)return _(e),t;const s=y(e,u),o=s[n];let r=o?o():e[n];if(n===u||n===c||n==="__proto__")return r;if(!o){const i=Object.getOwnPropertyDescriptor(e,n);h()&&(typeof r!="function"||e.hasOwnProperty(n))&&!(i&&i.get)&&(r=S(s,n,r)())}return b(r)?R(r):r},has(e,n){return n===P||n===a||n===$||n===u||n===c||n==="__proto__"?!0:(h()&&S(y(e,c),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:F,getOwnPropertyDescriptor:E};function A(e,n,t,s=!1){if(!s&&e[n]===t)return;const o=e[n],r=e.length;t===void 0?(delete e[n],e[c]&&e[c][n]&&o!==void 0&&e[c][n].$()):(e[n]=t,e[c]&&e[c][n]&&o===void 0&&e[c][n].$());let i=y(e,u),l;if((l=S(i,n,o))&&l.$(()=>t),Array.isArray(e)&&e.length!==r){for(let f=e.length;f<r;f++)(l=i[f])&&l.$();(l=S(i,"length",r))&&l.$(e.length)}(l=i[k])&&l.$()}function D(e,n){const t=Object.keys(n);for(let s=0;s<t.length;s+=1){const o=t[s];A(e,o,n[o])}}function U(e,n){if(typeof n=="function"&&(n=n(e)),n=g(n),Array.isArray(n)){if(e===n)return;let t=0,s=n.length;for(;t<s;t++){const o=n[t];e[t]!==o&&A(e,t,o)}A(e,"length",s)}else D(e,n)}function d(e,n,t=[]){let s,o=e;if(n.length>1){s=n.shift();const i=typeof s,l=Array.isArray(e);if(Array.isArray(s)){for(let f=0;f<s.length;f++)d(e,[s[f]].concat(n),t);return}else if(l&&i==="function"){for(let f=0;f<e.length;f++)s(e[f],f)&&d(e,[f].concat(n),t);return}else if(l&&i==="object"){const{from:f=0,to:O=e.length-1,by:z=1}=s;for(let w=f;w<=O;w+=z)d(e,[w].concat(n),t);return}else if(n.length>1){d(e[s],n,[s].concat(t));return}o=e[s],t=[s].concat(t)}let r=n[0];typeof r=="function"&&(r=r(o,t),r===o)||s===void 0&&r==null||(r=g(r),s===void 0||b(o)&&b(r)&&!Array.isArray(r)?D(o,r):A(e,s,r))}function X(...[e,n]){const t=g(e||{}),s=Array.isArray(t),o=R(t);function r(...i){L(()=>{s&&i.length===1?U(t,i[0]):d(t,i)})}return[o,r]}const Y=(e,n,t)=>{const s=e();return{getItem(o){const r=s.getItem(o);return r!=null?t(r):null},setItem(o,r){const i=n(r);s.setItem(o,i)}}},q=(e,n,t)=>{const[s,o]=T(!1),[r,i]=X(n);return K(()=>{const l=t.getItem(e);l!=null&&i(l),o(!0)}),W(()=>{s()&&t.setItem(e,r)}),[r,i]},G=e=>{const n=new URL("/rabbit/",window.location.href);return new URL(e,n).href},N={loggedIn:!1,agreements:{nostrBuild:!1}},B=e=>JSON.stringify(e),C=e=>JSON.parse(e),H=Y(()=>window.localStorage,B,C),[j,I]=q("RabbitPersistStatus",N,H),Q=()=>({persistStatus:()=>({...N,...j}),loggedIn:()=>{I(s=>({...s,loggedIn:!0}))},agreeToToS:s=>{I("agreements",o=>({...o,[s]:!0}))},didAgreeToToS:s=>j.agreements[s]??!1});export{g as a,Y as b,X as c,q as d,G as r,Q as u};
//# sourceMappingURL=usePersistStatus-23fdc747.js.map
