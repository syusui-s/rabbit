{"version":3,"file":"Permalink-mjKucN0F.js","sources":["../../src/pages/Permalink.tsx"],"sourcesContent":["import { createEffect, onMount } from 'solid-js';\n\nimport { useNavigate, useParams } from '@solidjs/router';\nimport { decode } from 'nostr-tools/nip19';\n\nimport GlobalModal from '@/components/modal/GlobalModal';\nimport SideBar from '@/components/SideBar';\nimport useModalState from '@/hooks/useModalState';\n\nconst Permalink = () => {\n  const navigate = useNavigate();\n  const params = useParams();\n  const { modalState, showProfile } = useModalState();\n\n  const navigateTop = () => navigate('/');\n\n  onMount(() => {\n    if (params.id != null) {\n      try {\n        const decoded = decode(params.id);\n        if (decoded.type === 'npub') {\n          showProfile(decoded.data);\n        }\n      } catch (err) {\n        window.alert('Invalid ID');\n        navigateTop();\n      }\n    } else {\n      navigateTop();\n    }\n  });\n\n  createEffect(() => {\n    if (modalState().type === 'Closed') {\n      navigateTop();\n    }\n  });\n\n  return (\n    <div class=\"absolute inset-0 flex w-screen touch-manipulation flex-row overflow-hidden\">\n      <SideBar />\n      <GlobalModal />\n    </div>\n  );\n};\n\nexport default Permalink;\n"],"names":["Permalink","navigate","useNavigate","params","useParams","modalState","showProfile","useModalState","navigateTop","onMount","id","decoded","decode","type","data","window","alert","createEffect","_el$","_tmpl$","_$insert","_$createComponent","SideBar","GlobalModal"],"mappings":"0RASMA,EAAYA,IAAM,CACtB,MAAMC,EAAWC,IACXC,EAASC,IACT,CAAEC,WAAAA,EAAYC,YAAAA,CAAa,EAAGC,EAAa,EAE3CC,EAAcA,IAAMP,EAAS,GAAG,EAEtCQ,OAAAA,EAAQ,IAAM,CACZ,GAAIN,EAAOO,IAAM,KACf,GAAI,CACF,MAAMC,EAAUC,EAAOT,EAAOO,EAAE,EAC5BC,EAAQE,OAAS,QACnBP,EAAYK,EAAQG,IAAI,CAE3B,MAAa,CACZC,OAAOC,MAAM,YAAY,EACzBR,GACF,MAEAA,GAEJ,CAAC,EAEDS,EAAa,IAAM,CACbZ,EAAU,EAAGQ,OAAS,UACxBL,GAEJ,CAAC,GAED,IAAA,CAAA,MAAAU,EAAAC,IAAAC,OAAAA,EAAAF,EAAAG,EAEKC,EAAO,CAAA,CAAA,EAAA,IAAA,EAAAF,EAAAF,EAAAG,EACPE,EAAW,CAAA,CAAA,EAAA,IAAA,EAAAL,CAAA,IAGlB"}