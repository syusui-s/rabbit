import{i as y,t as g,j as _,a as r,h as b,F as E,d as F,r as v,c as h,u as T,n as x,b as C,ak as k,x as L,y as O,v as R}from"./index-BGil3yr3.js";import{d as q}from"./EventDisplay-Bg-BUC7y.js";import{q as p,s as Q,v as I,r as S,B as $}from"./SideBar-D7s-pOfk.js";const j=g('<div class="block shrink-0 overflow-hidden border-b border-border p-1">'),m=t=>(()=>{const s=j();return y(s,()=>t.children),s})(),G=t=>{const{shouldMuteEvent:s}=_();return r(E,{get each(){return t.events},children:e=>r(b,{get when(){return!s(e)},get children(){return r(m,{get children(){return r(q,{event:e})}})}})})},K=g("<div class=none>"),P=g('<button class="flex h-12 w-full flex-col items-center justify-center hover:text-fg-secondary"><span>'),U=g('<button class="flex h-12 w-full flex-col items-center justify-center hover:text-fg-secondary disabled:text-fg-secondary/30"><span>'),H=t=>{const s=v(t),e=i=>{const{duration:w}=s();if(w!=null)return i-w},[n,o]=h([]),[u,l]=h(e(p())),[a,c]=h(),[d,f]=h();return{setEvents:o,since:u,until:a,continuous:()=>a()==null,loadLatest:()=>{k(()=>{c(void 0),l(e(p()))}),d()?.scrollIntoView()},loadOld:()=>{const i=Q(n());i!=null&&(k(()=>{c(i.created_at),l(e(i.created_at))}),d()?.scrollIntoView())},setTopMarkerRef:f}},J=t=>{const s=T();return[r(b,{get when(){return!t.loadMore.continuous()},get children(){return[(()=>{const e=K(),n=t.loadMore.setTopMarkerRef;return typeof n=="function"?x(n,e):t.loadMore.setTopMarkerRef=e,e})(),r(m,{get children(){const e=P(),n=e.firstChild;return e.$$click=()=>t.loadMore.loadLatest(),y(n,()=>s.t("column.loadLatest")),e}})]}}),v(()=>t.children),r(m,{get children(){const e=U(),n=e.firstChild;return e.$$click=()=>t.loadMore.loadOld(),y(n,()=>s.t("column.loadOld")),C(()=>e.disabled=!t.eose),e}})]};F(["click"]);const M=t=>{const s=()=>{const n=t();if(n==null)return[];const o=[];return R(n).pTags().forEach(l=>{const[,a,c,d]=l,f={pubkey:a,petname:d};c!=null&&c.length>0&&(f.mainRelayUrl=c),o.push(f)}),o};return{followings:s,followingPubkeys:()=>s().map(n=>n.pubkey),data:t}},N=async({pubkey:t},s)=>{const e=new $({type:"Followings",pubkey:t});S({task:e,signal:s});const n=await e.latestEventPromise();return M(()=>n)},X=t=>{const s=L(),e=v(t),n=()=>["useFollowings",e()],o=O(()=>({queryKey:n(),queryFn:I({taskProvider:([,l])=>{if(l==null)return null;const{pubkey:a}=l;return new $({type:"Followings",pubkey:a})},queryClient:s}),staleTime:5*60*1e3,gcTime:3*24*60*60*1e3,refetchOnMount:!0,refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchInterval:0})),u=()=>s.invalidateQueries({queryKey:n()});return{...M(()=>o.data),invalidateFollowings:u,query:o}};export{m as C,J as L,G as T,H as a,N as f,X as u};
//# sourceMappingURL=useFollowings-C707nEon.js.map
