{"version":3,"file":"About-CgjJ2ygN.js","sources":["../../src/components/modal/About.tsx"],"sourcesContent":["import { type Component, createResource, For, Show } from 'solid-js';\n\nimport BasicModal from '@/components/modal/BasicModal';\nimport SafeLink from '@/components/utils/SafeLink';\nimport useModalState from '@/hooks/useModalState';\nimport { useTranslation } from '@/i18n/useTranslation';\nimport resolveAsset from '@/utils/resolveAsset';\n\ntype AboutProps = {\n  onClose: () => void;\n};\n\ntype PackageInfo = {\n  self: {\n    name: string;\n    author: string;\n    version: string;\n    homepage: string;\n    licenseSpdx: string;\n    licenseText: string;\n  };\n  packages: {\n    name: string;\n    version: string;\n    licenseSpdx: string;\n    licenseText: string;\n  }[];\n};\n\nconst fetchPackageInfo = async (): Promise<PackageInfo> => {\n  const res = await fetch(resolveAsset('packageInfo.json'));\n  const body = await res.text();\n  return JSON.parse(body) as PackageInfo;\n};\n\nconst commit = import.meta.env.VITE_COMMIT as string | null;\n\nconst authorPubkey = '96203d66276e3214ea93b6c78a577c3c9a7279f9ee7e51b22f3b8c17643a819c';\n\nconst About: Component<AboutProps> = (props) => {\n  const i18n = useTranslation();\n\n  const { showProfile } = useModalState();\n\n  const [packageInfo] = createResource(fetchPackageInfo);\n\n  return (\n    <BasicModal onClose={props.onClose}>\n      <div class=\"p-8\">\n        <div class=\"flex flex-col items-center pt-8\">\n          <img src={resolveAsset('images/rabbit_app_256.png')} alt=\"Logo\" width=\"64\" height=\"64\" />\n\n          <h1 class=\"my-4\">\n            Rabbit{' '}\n            <span id=\"app-version\">\n              <Show when={commit} fallback=\"(dev)\">\n                {' '}\n                ({commit})\n              </Show>\n            </span>\n          </h1>\n        </div>\n\n        <div class=\"my-4 flex justify-center gap-3\">\n          <SafeLink\n            class=\"rounded-sm border-2 border-primary px-4 py-2 font-bold text-primary hover:border-primary-hover hover:text-primary-hover\"\n            href=\"https://github.com/syusui-s/rabbit/issues/new/choose\"\n          >\n            {i18n.t('about.bugReport')}\n          </SafeLink>\n          <SafeLink\n            class=\"rounded-sm border-2 border-primary px-4 py-2 font-bold text-primary hover:border-primary-hover hover:text-primary-hover\"\n            href=\"https://github.com/syusui-s/rabbit\"\n          >\n            {i18n.t('about.sourceCode')}\n          </SafeLink>\n        </div>\n\n        <h2 class=\"my-4 text-xl font-bold\">{i18n.t('about.termOfService')}</h2>\n\n        <p class=\"my-4\">\n          Copyright &copy; 2023, 2024{' '}\n          <button\n            type=\"button\"\n            class=\"inline text-link underline\"\n            onClick={() => showProfile(authorPubkey)}\n          >\n            Shusui Moyatani\n          </button>{' '}\n          and{' '}\n          <SafeLink\n            class=\"text-link underline\"\n            href=\"https://github.com/syusui-s/rabbit/graphs/contributors\"\n          >\n            Rabbit contributors\n          </SafeLink>\n        </p>\n\n        <pre class=\"max-h-96 overflow-auto rounded-sm bg-bg-tertiary p-2 text-sm\">\n          {i18n.t('about.agplText')}\n        </pre>\n\n        <p>\n          <SafeLink class=\"text-link underline\" href=\"https://gpl.mhatta.org/agpl.ja.html\">\n            {i18n.t('about.agplTranslationJa')}\n          </SafeLink>\n        </p>\n\n        <pre class=\"scrollbar max-h-96 overflow-auto rounded-sm bg-bg-tertiary p-4 text-xs\">\n          {packageInfo()?.self.licenseText}\n        </pre>\n\n        <h2 class=\"my-4 text-xl font-bold\">{i18n.t('about.usingLibraries')}</h2>\n\n        <For each={packageInfo()?.packages ?? []}>\n          {(p) => (\n            <>\n              <h3 class=\"mt-4 mb-2 font-mono\">\n                {p.name}@{p.version} ({p.licenseSpdx})\n              </h3>\n              <pre class=\"scrollbar max-h-96 overflow-auto rounded-sm bg-bg-tertiary p-4 text-xs\">\n                {p.licenseText}\n              </pre>\n            </>\n          )}\n        </For>\n      </div>\n    </BasicModal>\n  );\n};\n\nexport default About;\n"],"names":["fetchPackageInfo","body","fetch","resolveAsset","text","JSON","parse","commit","import","authorPubkey","About","props","i18n","useTranslation","showProfile","useModalState","packageInfo","createResource","_$createComponent","BasicModal","onClose","children","_el$","_tmpl$","_el$2","firstChild","_el$3","_el$4","nextSibling","_el$5","_el$7","_el$8","_el$9","_el$10","_el$11","_el$13","_el$17","_el$18","_el$19","_el$20","_$insert","Show","when","fallback","SafeLink","href","t","$$click","self","licenseText","For","each","packages","p","_el$21","_tmpl$2","_el$22","_el$25","_el$23","_el$26","name","version","licenseSpdx","_el$27","_tmpl$3","_$effect","_$setAttribute","_$delegateEvents"],"mappings":"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"}