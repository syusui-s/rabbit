import{$ as l,P,Q as j,h as W,w as g,j as I,A as $}from"./index-207b2b7e.js";const O=Symbol("store-raw"),u=Symbol("store-node");function _(e){let t=e[l];if(!t&&(Object.defineProperty(e,l,{value:t=new Proxy(e,K)}),!Array.isArray(e))){const n=Object.keys(e),s=Object.getOwnPropertyDescriptors(e);for(let r=0,o=n.length;r<o;r++){const i=n[r];s[i].get&&Object.defineProperty(e,i,{enumerable:s[i].enumerable,get:s[i].get.bind(t)})}}return t}function y(e){let t;return e!=null&&typeof e=="object"&&(e[l]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function d(e,t=new Set){let n,s,r,o;if(n=e!=null&&e[O])return n;if(!y(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,c=e.length;i<c;i++)r=e[i],(s=d(r,t))!==r&&(e[i]=s)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let f=0,S=i.length;f<S;f++)o=i[f],!c[o].get&&(r=e[o],(s=d(r,t))!==r&&(e[o]=s))}return e}function h(e){let t=e[u];return t||Object.defineProperty(e,u,{value:t=Object.create(null)}),t}function A(e,t,n){return e[t]||(e[t]=k(n))}function z(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===l||t===u||(delete n.value,delete n.writable,n.get=()=>e[l][t]),n}function D(e){if(j()){const t=h(e);(t._||(t._=k()))()}}function L(e){return D(e),Reflect.ownKeys(e)}function k(e){const[t,n]=g(e,{equals:!1,internal:!0});return t.$=n,t}const K={get(e,t,n){if(t===O)return e;if(t===l)return n;if(t===P)return D(e),n;const s=h(e),r=s[t];let o=r?r():e[t];if(t===u||t==="__proto__")return o;if(!r){const i=Object.getOwnPropertyDescriptor(e,t);j()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(o=A(s,t,o)())}return y(o)?_(o):o},has(e,t){return t===O||t===l||t===P||t===u||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:L,getOwnPropertyDescriptor:z};function b(e,t,n,s=!1){if(!s&&e[t]===n)return;const r=e[t],o=e.length;n===void 0?delete e[t]:e[t]=n;let i=h(e),c;(c=A(i,t,r))&&c.$(()=>n),Array.isArray(e)&&e.length!==o&&(c=A(i,"length",o))&&c.$(e.length),(c=i._)&&c.$()}function N(e,t){const n=Object.keys(t);for(let s=0;s<n.length;s+=1){const r=n[s];b(e,r,t[r])}}function T(e,t){if(typeof t=="function"&&(t=t(e)),t=d(t),Array.isArray(t)){if(e===t)return;let n=0,s=t.length;for(;n<s;n++){const r=t[n];e[n]!==r&&b(e,n,r)}b(e,"length",s)}else N(e,t)}function a(e,t,n=[]){let s,r=e;if(t.length>1){s=t.shift();const i=typeof s,c=Array.isArray(e);if(Array.isArray(s)){for(let f=0;f<s.length;f++)a(e,[s[f]].concat(t),n);return}else if(c&&i==="function"){for(let f=0;f<e.length;f++)s(e[f],f)&&a(e,[f].concat(t),n);return}else if(c&&i==="object"){const{from:f=0,to:S=e.length-1,by:p=1}=s;for(let w=f;w<=S;w+=p)a(e,[w].concat(t),n);return}else if(t.length>1){a(e[s],t,[s].concat(n));return}r=e[s],n=[s].concat(n)}let o=t[0];typeof o=="function"&&(o=o(r,n),o===r)||s===void 0&&o==null||(o=d(o),s===void 0||y(r)&&y(o)&&!Array.isArray(o)?N(r,o):b(e,s,o))}function U(...[e,t]){const n=d(e||{}),s=Array.isArray(n),r=_(n);function o(...i){W(()=>{s&&i.length===1?T(n,i[0]):a(n,i)})}return[r,o]}const E=(e,t,n)=>{const s=e();return{getItem(r){const o=s.getItem(r);return o!=null?n(o):null},setItem(r,o){const i=t(o);s.setItem(r,i)}}},F=(e,t,n)=>{const[s,r]=g(!1),[o,i]=g(t);return I(()=>{const c=n.getItem(e);c!=null&&i(()=>c),r(!0)}),$(()=>{s()&&n.setItem(e,o())}),[o,i]},X=(e,t,n)=>{const[s,r]=g(!1),[o,i]=U(t);return I(()=>{const c=n.getItem(e);c!=null&&i(c),r(!0)}),$(()=>{s()&&n.setItem(e,o)}),[o,i]},Y=e=>{const t=new URL("/rabbit/",window.location.href);return new URL(e,t).href},R={loggedIn:!1,agreeWithNostrBuild:!1},J=e=>JSON.stringify(e),M=e=>JSON.parse(e),q=E(()=>window.localStorage,J,M),[B,C]=F("RabbitPersistStatus",R,q),G=()=>({persistStatus:()=>({...R,...B()}),loggedIn:()=>{C(t=>({...t,loggedIn:!0}))}});export{E as a,X as b,U as c,G as d,Y as r,d as u};
//# sourceMappingURL=usePersistStatus-893e3ec0.js.map
