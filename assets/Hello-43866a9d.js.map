{"version":3,"file":"Hello-43866a9d.js","sources":["../../src/pages/Hello.tsx"],"sourcesContent":["import { createSignal, onMount, Switch, Match, type Component } from 'solid-js';\n\nimport { useNavigate } from '@solidjs/router';\n\nimport usePersistStatus from '@/hooks/usePersistStatus';\n\ntype SignerStatus = 'checking' | 'available' | 'unavailable';\n\nconst useSignerStatus = () => {\n  const [signerStatus, setSignerStatus] = createSignal<SignerStatus>('checking');\n\n  const checkStatus = () => {\n    if (window.nostr != null) {\n      setSignerStatus('available');\n    } else {\n      setSignerStatus('unavailable');\n    }\n  };\n\n  onMount(() => {\n    let count = 0;\n    const intervalId = setInterval(() => {\n      checkStatus();\n      if (count >= 10) clearInterval(intervalId);\n      count += 1;\n    }, 1000);\n  });\n\n  return signerStatus;\n};\n\nconst Hello: Component = () => {\n  const signerStatus = useSignerStatus();\n  const navigate = useNavigate();\n  const { persistStatus, loggedIn } = usePersistStatus();\n\n  const handleLogin = () => {\n    loggedIn();\n    navigate('/');\n  };\n\n  onMount(() => {\n    if (persistStatus().loggedIn) {\n      navigate('/');\n    }\n  });\n\n  return (\n    <div class=\"mx-auto flex max-w-[640px] flex-col items-center p-4 text-stone-600\">\n      <div class=\"flex flex-col items-center gap-4 rounded bg-white p-4\">\n        <img src=\"./images/rabbit_256.png\" width=\"96\" alt=\"logo\" height=\"96\" />\n        <h1 class=\"text-5xl font-black text-rose-300\">Rabbit</h1>\n        <div>Rabbit is a Web client for Nostr.</div>\n        <p class=\"text-center\">\n          <span class=\"font-bold text-rose-400\">注意: 現在ベータ版です。</span>\n          <br />\n          未実装の機能やバグがあることを承知の上でご利用ください。\n        </p>\n      </div>\n      <div class=\"p-8 shadow-md\">\n        <Switch>\n          <Match when={signerStatus() === 'checking'}>\n            拡張機能のインストール状況を確認中です...\n          </Match>\n          <Match when={signerStatus() === 'unavailable'}>\n            <div class=\"pb-1 text-lg font-bold\">拡張機能がインストールされていません！</div>\n            <p class=\"pt-2\">\n              利用にはNIP-07に対応した拡張機能が必要です。\n              <br />\n              <a\n                class=\"text-blue-500 underline\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href=\"https://scrapbox.io/nostr/NIP-07#63e1c10c8b8fcb00000584fc\"\n              >\n                こちらを参考\n              </a>\n              に拡張機能をインストールしてください。\n            </p>\n            <p class=\"pt-2\">\n              はじめてNostrを利用する方は\n              <a\n                class=\"text-blue-500 underline\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href=\"https://scrapbox.io/nostr/%E3%81%AF%E3%81%98%E3%82%81%E3%81%A6%E3%81%AENostr%E3%80%90%E3%81%AF%E3%81%98%E3%82%81%E3%81%A6%E3%81%AE%E6%96%B9%E3%81%AF%E3%81%93%E3%81%A1%E3%82%89%E3%80%91\"\n              >\n                はじめてのNostr\n              </a>\n              を参考にするとよいでしょう。\n            </p>\n          </Match>\n          <Match when={signerStatus() === 'available'}>\n            <button\n              class=\"rounded bg-rose-400 p-4 text-lg font-bold text-white hover:shadow-md\"\n              onClick={handleLogin}\n            >\n              NIP-07 拡張機能でログイン\n            </button>\n          </Match>\n        </Switch>\n      </div>\n    </div>\n  );\n};\n\nexport default Hello;\n"],"names":["useSignerStatus","signerStatus","setSignerStatus","createSignal","checkStatus","window","nostr","onMount","count","intervalId","setInterval","clearInterval","Hello","navigate","useNavigate","persistStatus","loggedIn","usePersistStatus","handleLogin","_el$","_tmpl$5","cloneNode","_el$2","firstChild","_el$3","nextSibling","_$insert","_$createComponent","Switch","children","Match","when","_tmpl$","_tmpl$2","_tmpl$3","_el$7","_tmpl$4","$$click","_$delegateEvents"],"mappings":"g3CAQMA,EAAkBA,IAAM,CAC5B,KAAM,CAACC,EAAcC,CAAe,EAAIC,EAA2B,UAAU,EAEvEC,EAAcA,IAAM,CACpBC,OAAOC,OAAS,KAClBJ,EAAgB,WAAW,EAE3BA,EAAgB,aAAa,GAIjCK,OAAAA,EAAQ,IAAM,CACZ,IAAIC,EAAQ,EACZ,MAAMC,EAAaC,YAAY,IAAM,CACnCN,IACII,GAAS,IAAIG,cAAcF,CAAU,EACzCD,GAAS,CACV,EAAE,GAAI,CACT,CAAC,EAEMP,CACT,EAEMW,EAAmBA,IAAM,CAC7B,MAAMX,EAAeD,IACfa,EAAWC,IACX,CAAEC,cAAAA,EAAeC,SAAAA,CAAU,EAAGC,EAAgB,EAE9CC,EAAcA,IAAM,CACxBF,IACAH,EAAS,GAAG,GAGdN,OAAAA,EAAQ,IAAM,CACRQ,EAAe,EAACC,UAClBH,EAAS,GAAG,CAEhB,CAAC,GAED,IAAA,CAAA,MAAAM,EAAAC,EAAAC,UAAA,EAAA,EAAAC,EAAAH,EAAAI,WAAAC,EAAAF,EAAAG,YAAAC,OAAAA,EAAAF,EAAAG,EAaOC,EAAM,CAAA,IAAAC,UAAA,CAAA,MAAAF,CAAAA,EACJG,EAAK,CAAA,IAACC,MAAI,CAAA,OAAE9B,EAAc,IAAK,UAAU,EAAA4B,SAAA,yBAAAF,EAAAA,EAGzCG,EAAK,CAAA,IAACC,MAAI,CAAA,OAAE9B,EAAc,IAAK,aAAa,EAAA,IAAA4B,UAAA,CAAA,MAAAG,CAAAA,EAAAX,UAAAY,EAAAA,EAAAA,EAAAZ,UAAA,EAAA,EAAAa,EAAAb,UAAA,EAAA,CAAA,CAAA,EAAAM,EAAAA,EA4B5CG,EAAK,CAAA,IAACC,MAAI,CAAA,OAAE9B,EAAc,IAAK,WAAW,EAAA,IAAA4B,UAAA,CAAA,MAAAM,EAAAC,EAAAf,UAAA,EAAA,EAAAc,OAAAA,EAAAE,QAG9BnB,EAAWiB,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,EAAAhB,CAAA,IASlC,EAEqBmB,EAAA,CAAA,OAAA,CAAA"}